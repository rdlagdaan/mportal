import{n as m,j as e,F as ye,a as S}from"./index-Bkt22I5c.js";import{r as t}from"./handsontable-B9UYrM3w.js";import{a as le}from"./csrf-uY3Wrgmc.js";import{F as _e,a as je,b as Ne}from"./TrashIcon-Be_nZ2Ki.js";import"./react-DJG_os-6.js";const Z=[{value:"straight_line",label:"Straight Line"},{value:"declining_balance",label:"Declining Balance"},{value:"units_of_production",label:"Units of Production"},{value:"none",label:"None"}];function G({label:c,placeholder:z="Search…",options:d,valueLabel:k,onInputChange:x,onSelect:R,required:D}){const[F,u]=t.useState(!1),[K,i]=t.useState(0),h=t.useRef(null),N=t.useRef(null),f=t.useMemo(()=>{const r=new Set,n=[];for(const w of d||[]){const v=`${String(w.id)}::${w.label}`;r.has(v)||(r.add(v),n.push(w))}return n},[d]).filter(r=>r.label.toLowerCase().includes((k||"").toLowerCase()));return t.useEffect(()=>{h.current?.focus()},[F,k]),t.useEffect(()=>{const r=n=>{N.current?.contains(n.target)||u(!1)};return document.addEventListener("mousedown",r),()=>document.removeEventListener("mousedown",r)},[]),t.useEffect(()=>{const r=()=>u(!1);return window.addEventListener("faims-close-combos",r),()=>window.removeEventListener("faims-close-combos",r)},[]),e.jsxs("div",{className:"relative",ref:N,children:[e.jsx("label",{className:"block text-sm mb-1",children:c}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:h,className:"w-full border rounded px-3 py-2 pr-9",placeholder:z,value:k,onFocus:()=>u(!0),onChange:r=>{x(r.target.value),u(!0),i(0)},onKeyDown:r=>{if(F||u(!0),r.key==="ArrowDown")r.preventDefault(),i(n=>Math.min(n+1,Math.max(f.length-1,0)));else if(r.key==="ArrowUp")r.preventDefault(),i(n=>Math.max(n-1,0));else if(r.key==="Enter"){r.preventDefault();const n=f[K];n&&(R(n),u(!1),requestAnimationFrame(()=>h.current?.focus()))}else r.key==="Escape"&&(u(!1),requestAnimationFrame(()=>h.current?.focus()))},required:D}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onMouseDown:r=>{r.preventDefault(),u(n=>!n),requestAnimationFrame(()=>h.current?.focus())},"aria-label":"Toggle options",children:"▼"})]}),F&&e.jsx("ul",{className:"absolute z-50 mt-1 max-h-56 w-full overflow-auto rounded-md border bg-white shadow-lg",children:f.length?f.map((r,n)=>e.jsx("li",{className:`px-3 py-2 cursor-pointer ${n===K?"bg-amber-100 font-semibold":"hover:bg-amber-50"}`,onMouseDown:w=>{w.preventDefault(),R(r),u(!1),requestAnimationFrame(()=>h.current?.focus())},children:r.label},`${r.id}-${r.label}`)):e.jsx("li",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type to search; pick an item to bind."})]})}function $e(){const[c,z]=t.useState("class"),[d,k]=t.useState(null),[x,R]=t.useState(null),[D,F]=t.useState(!1),[u,K]=t.useState(10),[i,h]=t.useState(1),[N,P]=t.useState(1),[f,r]=t.useState(""),[n,w]=t.useState(""),[v,ce]=t.useState("code"),L=t.useRef(null),[A,re]=t.useState([]),[Q,oe]=t.useState([]),[H,ne]=t.useState([]),[ie,Y]=t.useState(!1),[E,J]=t.useState("add"),[C,V]=t.useState(null),[de,T]=t.useState(""),[X,me]=t.useState([]),W=t.useMemo(()=>{const s=new Set;return X.filter(a=>{const l=a.class_code?.trim();return!l||s.has(l)?!1:(s.add(l),!0)})},[X]);t.useEffect(()=>{const s=X.map(a=>a.class_code);console.log("[Taxonomy] classOptions total:",X.length,"unique:",new Set(s).size)},[X]);const[we,Ce]=t.useState(""),[q,ue]=t.useState([]),[pe,ee]=t.useState(""),[he,I]=t.useState(""),xe=s=>s.toUpperCase().replace(/[^A-Z0-9-]/g,""),[y,_]=t.useState({class_code:"",class_name:"",default_life_months:60,default_depr_method:"straight_line",residual_rate:0,is_active:!0,sort_order:0}),[M,$]=t.useState({class_code:void 0,cat_code:"",cat_name:"",is_active:!0,sort_order:0}),[b,g]=t.useState({cat_code:void 0,type_code:"",type_name:"",life_months_override:void 0,depr_method_override:void 0,residual_rate_override:void 0,is_active:!0,sort_order:0});t.useEffect(()=>{(async()=>{try{const a=await m.get("/settings/paginaterecs");K(Number(a.data?.value)||10)}catch{}await Promise.all([j(1,c,n),B(),se()])})()},[]),t.useEffect(()=>(L.current&&clearTimeout(L.current),L.current=setTimeout(()=>w(f),300),()=>{L.current&&clearTimeout(L.current)}),[f]),t.useEffect(()=>{j(1,c,n)},[n,c,v,d?.id,x?.id]);async function j(s=1,a=c,l=""){F(!0);try{if(a==="class"){const o=await m.get("/assets/classes",{params:{per_page:u,page:s,q:l,order:v==="recent"?"recent":"class_code"}});re(o.data.data),h(o.data.current_page),P(o.data.last_page)}else if(a==="category"){const o=await m.get("/assets/categories",{params:{per_page:u,page:s,q:l,order:v==="recent"?"recent":"cat_code",class_code:d?.class_code||void 0}});oe(o.data.data),h(o.data.current_page),P(o.data.last_page)}else{const o=await m.get("/assets/types",{params:{per_page:u,page:s,q:l,order:v==="recent"?"recent":"type_code",cat_code:x?.cat_code||void 0}});ne(o.data.data),h(o.data.current_page),P(o.data.last_page)}}finally{F(!1)}}async function B(){let a=1,l=1;const o=[];for(;;){const O=await m.get("/assets/classes",{params:{per_page:200,page:a,order:"class_code"}});if(o.push(...O.data.data??[]),l=O.data.last_page??1,a>=l)break;a++}const p=new Map;for(const O of o)p.has(O.class_code)||p.set(O.class_code,O);const te=Array.from(p.values());return me(te),te}async function se(){const s=await m.get("/assets/categories",{params:{per_page:1e3,page:1,order:"cat_code"}});let a=s.data.data??[];const l=s.data.last_page??1;for(let o=2;o<=l;o++){const p=await m.get("/assets/categories",{params:{per_page:100,page:o,order:"cat_code"}});a=a.concat(p.data.data??[])}return ue(a),a}async function be(){if(window.dispatchEvent(new Event("faims-close-combos")),J("add"),V(null),c==="class"&&_({class_code:"",class_name:"",default_life_months:60,default_depr_method:"straight_line",residual_rate:0,is_active:!0,sort_order:0}),c==="category"&&(await B(),$({class_code:d?.class_code,cat_code:"",cat_name:"",is_active:!0,sort_order:0}),T(d?`${d.class_code} • ${d.class_name}`:"")),c==="type"){g({cat_code:x?.cat_code,type_code:"",type_name:"",is_active:!0,sort_order:0});const s=x?`${x.cat_code} • ${x.cat_name}`:"";I(s)}Y(!0)}function ge(s){if(window.dispatchEvent(new Event("faims-close-combos")),J("edit"),V(s.id),c==="class"&&_({...s}),c==="category"){$({...s});const a=A.find(l=>l.class_code===s.class_code);T(a?`${a.class_code} • ${a.class_name}`:"")}if(c==="type"){g({...s});const a=q.find(l=>l.cat_code===s.cat_code);I(a?`${a.cat_code} • ${a.cat_name}`:"")}Y(!0)}function U(){Y(!1)}async function fe(s){s.preventDefault(),await le("lrwsis");try{if(c==="class"){const a=y;E==="edit"&&C?await m.patch(`/assets/classes/${C}`,a,{headers:{"X-XSRF-TOKEN":S.get("XSRF-TOKEN")||""},withCredentials:!0}):await m.post("/assets/classes",a,{headers:{"X-XSRF-TOKEN":S.get("XSRF-TOKEN")||""},withCredentials:!0});const l=await B();T("");const o=l.find(p=>p.class_code===(y.class_code||""));o&&(k(o),T(`${o.class_code} • ${o.class_name}`))}else if(c==="category"){const a={...M,class_code:M.class_code??d?.class_code};if(!a.class_code){alert("Select a Class first.");return}E==="edit"&&C?await m.patch(`/assets/categories/${C}`,a,{headers:{"X-XSRF-TOKEN":S.get("XSRF-TOKEN")||""},withCredentials:!0}):await m.post("/assets/categories",a,{headers:{"X-XSRF-TOKEN":S.get("XSRF-TOKEN")||""},withCredentials:!0}),await se()}else{const a={...b,cat_code:b.cat_code??x?.cat_code};if(!a.cat_code){alert("Select a Category first.");return}E==="edit"&&C?await m.patch(`/assets/types/${C}`,a,{headers:{"X-XSRF-TOKEN":S.get("XSRF-TOKEN")||""},withCredentials:!0}):await m.post("/assets/types",a,{headers:{"X-XSRF-TOKEN":S.get("XSRF-TOKEN")||""},withCredentials:!0})}U(),await j(i)}catch(a){alert(a?.response?.data?.message||"Save failed")}}async function ve(s){if(!confirm("Delete this record?"))return;await le("lrwsis");const l=`${{class:"/assets/classes",category:"/assets/categories",type:"/assets/types"}[c]}/${s}`;try{await m.delete(l,{headers:{"X-XSRF-TOKEN":S.get("XSRF-TOKEN")||""},withCredentials:!0});const p=(c==="class"?A:c==="category"?Q:H).length===1&&i>1?i-1:i;await j(p)}catch(o){const p=o?.response?.data?.message??(c==="class"?"Cannot delete this class because it is linked to one or more categories.":c==="category"?"Cannot delete this category because it is linked to types or assets.":"Cannot delete this type because it is linked to assets.");alert(p)}}const ae=c==="class"?A:c==="category"?Q:H;return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-full faims-ui",children:[e.jsx("nav",{className:"mb-4 faims-tabs border-b border-gray-200",children:e.jsx("ul",{className:"flex gap-2",children:["class","category","type"].map(s=>{const a=s==="class"?"Class (Group)":s==="category"?"Category (Sub-Group)":"Type",l=c===s;return e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>z(s),className:`tab ${l?"active":""}`,children:a})},s)})})}),e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:be,className:"inline-flex items-center gap-2 bg-green-700 text-white px-4 py-2 rounded hover:bg-green-600",children:[e.jsx(_e,{className:"h-5 w-5"})," Add New"]}),e.jsx("input",{className:"w-96 border rounded px-3 py-2",placeholder:"Search…",value:f,onChange:s=>r(s.target.value)}),e.jsxs("select",{className:"border rounded px-2 py-2",value:v,onChange:s=>ce(s.target.value),children:[e.jsx("option",{value:"code",children:"Sort: Code"}),e.jsx("option",{value:"name",children:"Sort: Name"}),e.jsx("option",{value:"recent",children:"Sort: Recent"}),e.jsx("option",{value:"sort",children:"Sort: Manual"})]}),c!=="class"&&e.jsxs("select",{className:"border rounded px-2 py-2",value:d?.id??"",onChange:async s=>{const a=Number(s.target.value||0),l=A.find(o=>o.id===a)||null;k(l),R(null)},children:[e.jsx("option",{value:"",children:"Select Class…"}),A.map(s=>e.jsxs("option",{value:s.id,children:[s.class_code," • ",s.class_name]},s.id))]}),c==="type"&&e.jsx("div",{className:"col-span-4",children:e.jsx(G,{label:"Category",placeholder:"Search or select…",options:q.filter(s=>!d||s.class_code===d.class_code).map(s=>({id:s.id,label:`${s.cat_code} • ${s.cat_name}`})),valueLabel:pe,onInputChange:ee,onSelect:s=>{ee(s.label);const a=q.find(l=>l.id===Number(s.id))||null;R(a)},required:!1})})]}),D&&e.jsx("div",{className:"flex justify-center my-6",children:e.jsx("div",{className:"w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),!D&&e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsxs("thead",{className:"bg-amber-50 text-gray-800",children:[c==="class"&&e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Code"}),e.jsx("th",{className:"p-2",children:"Name"}),e.jsx("th",{className:"p-2",children:"Life"}),e.jsx("th",{className:"p-2",children:"Method"}),e.jsx("th",{className:"p-2",children:"Residual%"}),e.jsx("th",{className:"p-2",children:"Active"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]}),c==="category"&&e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Class"}),e.jsx("th",{className:"p-2",children:"Code"}),e.jsx("th",{className:"p-2",children:"Name"}),e.jsx("th",{className:"p-2",children:"Active"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]}),c==="type"&&e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Category"}),e.jsx("th",{className:"p-2",children:"Code"}),e.jsx("th",{className:"p-2",children:"Name"}),e.jsx("th",{className:"p-2",children:"Life⚑"}),e.jsx("th",{className:"p-2",children:"Method⚑"}),e.jsx("th",{className:"p-2",children:"Residual⚑"}),e.jsx("th",{className:"p-2",children:"Active"}),e.jsx("th",{className:"p-2 w-28 text-center",children:"Actions"})]})]}),e.jsxs("tbody",{children:[ae.map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:(i-1)*u+a+1}),c==="class"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:s.class_code}),e.jsx("td",{className:"p-2",children:s.class_name}),e.jsx("td",{className:"p-2",children:s.default_life_months}),e.jsx("td",{className:"p-2",children:Z.find(l=>l.value===s.default_depr_method)?.label}),e.jsx("td",{className:"p-2",children:s.residual_rate}),e.jsx("td",{className:"p-2",children:s.is_active?"Yes":"No"})]}),c==="category"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:s.class_code}),e.jsx("td",{className:"p-2",children:s.cat_code}),e.jsx("td",{className:"p-2",children:s.cat_name}),e.jsx("td",{className:"p-2",children:s.is_active?"Yes":"No"})]}),c==="type"&&e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"p-2",children:s.cat_code}),e.jsx("td",{className:"p-2",children:s.type_code}),e.jsx("td",{className:"p-2",children:s.type_name}),e.jsx("td",{className:"p-2",children:s.life_months_override??"—"}),e.jsx("td",{className:"p-2",children:s.depr_method_override?Z.find(l=>l.value===s.depr_method_override)?.label:"—"}),e.jsx("td",{className:"p-2",children:s.residual_rate_override??"—"}),e.jsx("td",{className:"p-2",children:s.is_active?"Yes":"No"})]}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>ge(s),title:"Edit",children:e.jsx(je,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>ve(s.id),title:"Delete",children:e.jsx(Ne,{className:"h-5 w-5"})})]})})]},s.id)),ae.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:9,children:"No records found"})})]})]})}),e.jsxs("div",{className:"flex justify-between mt-4 text-sm text-gray-700",children:[e.jsx("button",{onClick:()=>j(1),disabled:i===1,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"First"}),e.jsx("button",{onClick:()=>j(i-1),disabled:i===1,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"self-center",children:["Page ",i," of ",N]}),e.jsx("button",{onClick:()=>j(i+1),disabled:i===N,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Next"}),e.jsx("button",{onClick:()=>j(N),disabled:i===N,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Last"})]}),ie&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:U}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:E==="edit"?c==="class"?"Edit Class":c==="category"?"Edit Category":"Edit Type":c==="class"?"Add Class":c==="category"?"Add Category":"Add Type"}),e.jsx("button",{onClick:U,className:"p-1 rounded hover:bg-gray-100",children:e.jsx(ye,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:fe,className:"p-6 grid grid-cols-12 gap-4",children:[c==="class"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Class Code"}),e.jsx("input",{value:y.class_code||"",onChange:s=>_(a=>({...a,class_code:xe(s.target.value).slice(0,8)})),pattern:"[A-Z0-9\\-]{1,25}",title:'Use letters A–Z, digits 0–9 and "-" only',className:"w-full border rounded px-3 py-2",required:!0,maxLength:8})]}),e.jsxs("div",{className:"col-span-5",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Class Name"}),e.jsx("input",{value:y.class_name||"",onChange:s=>_(a=>({...a,class_name:s.target.value})),className:"w-full border rounded px-3 py-2",required:!0,maxLength:150})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Life (mo)"}),e.jsx("input",{type:"number",min:1,value:y.default_life_months??60,onChange:s=>_(a=>({...a,default_life_months:+s.target.value})),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Method"}),e.jsx("select",{value:y.default_depr_method||"straight_line",onChange:s=>_(a=>({...a,default_depr_method:s.target.value})),className:"w-full border rounded px-3 py-2",required:!0,children:Z.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Residual %"}),e.jsx("input",{type:"number",min:0,max:100,step:.01,value:y.residual_rate??0,onChange:s=>_(a=>({...a,residual_rate:+s.target.value})),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsx("div",{className:"col-span-2 flex items-end gap-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!y.is_active,onChange:s=>_(a=>({...a,is_active:s.target.checked}))}),e.jsx("span",{className:"text-sm",children:"Active"})]})})]}),c==="category"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-4",children:e.jsx(G,{label:"Class",placeholder:"Search or select class…",required:!0,options:W.map(s=>({id:s.id,label:`${s.class_code} • ${s.class_name}`})),valueLabel:de,onInputChange:T,onSelect:s=>{T(s.label);const a=W.find(l=>l.id===Number(s.id));$(l=>({...l,class_code:a?.class_code}))}})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Category Code"}),e.jsx("input",{value:M.cat_code||"",onChange:s=>$(a=>({...a,cat_code:s.target.value.toUpperCase().slice(0,5)})),className:"w-full border rounded px-3 py-2",required:!0,maxLength:5})]}),e.jsxs("div",{className:"col-span-5",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Category Name"}),e.jsx("input",{value:M.cat_name||"",onChange:s=>$(a=>({...a,cat_name:s.target.value})),className:"w-full border rounded px-3 py-2",required:!0,maxLength:150})]}),e.jsx("div",{className:"col-span-2 flex items-end gap-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!M.is_active,onChange:s=>$(a=>({...a,is_active:s.target.checked}))}),e.jsx("span",{className:"text-sm",children:"Active"})]})})]}),c==="type"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-4",children:e.jsx(G,{label:"Category",placeholder:"Search or select category…",options:q.filter(s=>!d||s.class_code===d.class_code).map(s=>({id:s.id,label:`${s.cat_code} • ${s.cat_name}`})),valueLabel:he,onInputChange:I,onSelect:s=>{I(s.label);const a=q.find(l=>l.id===Number(s.id));g(l=>({...l,cat_code:a?.cat_code}))},required:!0})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Type Code"}),e.jsx("input",{value:b.type_code||"",onChange:s=>g(a=>({...a,type_code:s.target.value.toUpperCase().slice(0,20)})),className:"w-full border rounded px-3 py-2",required:!0,maxLength:20})]}),e.jsxs("div",{className:"col-span-5",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Type Name"}),e.jsx("input",{value:b.type_name||"",onChange:s=>g(a=>({...a,type_name:s.target.value})),className:"w-full border rounded px-3 py-2",required:!0,maxLength:150})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Life Override (mo)"}),e.jsx("input",{type:"number",min:1,value:b.life_months_override??"",onChange:s=>g(a=>({...a,life_months_override:s.target.value?+s.target.value:void 0})),className:"w-full border rounded px-3 py-2",placeholder:"inherit"})]}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Method Override"}),e.jsxs("select",{value:b.depr_method_override??"",onChange:s=>g(a=>({...a,depr_method_override:s.target.value||void 0})),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"",children:"inherit"}),Z.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Residual % Override"}),e.jsx("input",{type:"number",min:0,max:100,step:.01,value:b.residual_rate_override??"",onChange:s=>g(a=>({...a,residual_rate_override:s.target.value?+s.target.value:void 0})),className:"w-full border rounded px-3 py-2",placeholder:"inherit"})]}),e.jsx("div",{className:"col-span-2 flex items-end gap-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!b.is_active,onChange:s=>g(a=>({...a,is_active:s.target.checked}))}),e.jsx("span",{className:"text-sm",children:"Active"})]})}),E==="edit"&&b.cat_code&&e.jsx("div",{className:"col-span-12 text-sm text-gray-600",children:e.jsx("button",{type:"button",className:"underline",onClick:async()=>{const s=C,a=await m.get(`/assets/types/${s}/next-code`);alert(`Next code: ${a.data.code}`)},children:"Preview next asset code"})})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:E==="edit"?"Update":"Submit"})]})]})]})]}),e.jsx("style",{children:`
/* ======= Scoped UI just for this component (yellow scheme) ======= */

/* Tabs (yellow/amber) */
.faims-ui .faims-tabs .tab {
  background:#ffffff;
  color:#374151;            /* gray-700 */
  padding:0.625rem 1.25rem; /* px-5 py-2.5 */
  border:1px solid #e5e7eb; /* gray-200 */
  border-bottom:none;
  border-top-left-radius:0.5rem;
  border-top-right-radius:0.5rem;
  position:relative;
  font-weight:700;          /* more contrast on tabs */
  transition:background-color .15s, color .15s, box-shadow .15s;
}
.faims-ui .faims-tabs .tab:hover {
  background:#fef3c7;       /* amber-100 */
  color:#111827;            /* gray-900 */
  box-shadow: inset 0 -3px 0 #f59e0b; /* amber-500 underline on hover */
}
.faims-ui .faims-tabs .tab.active {
  background:#ca8a04;       /* amber-600 */
  color:#ffffff;
}
.faims-ui .faims-tabs .tab.active::after {
  content:"";
  position:absolute;
  left:0; right:0; bottom:-1px;
  height:4px;
  background:#ca8a04;       /* amber-600 */
  border-top-left-radius:4px;
  border-top-right-radius:4px;
}

/* Table striping + strong hover (cell-level so themes can't override) */
.faims-ui .faims-table table { border-collapse: separate; border-spacing: 0; }
.faims-ui .faims-table thead th {
  background:#fffbeb;       /* amber-50 */
  color:#1f2937;            /* gray-800 */
}

.faims-ui .faims-table tbody tr td {
  background:#ffffff; 
  transition: background-color .12s, font-weight .12s, color .12s;
}

/* Zebra (clearly visible): white / amber-50 alternation */
.faims-ui .faims-table tbody tr:nth-child(even) td { 
  background:#fffbeb;       /* amber-50 */
}

/* Hover: bold text + amber-100 background + darker text */
.faims-ui .faims-table tbody tr:hover td { 
  background:#fef3c7;       /* amber-100 */
  font-weight:600;          /* bold on hover */
  color:#111827;            /* gray-900 */
}

/* Combobox emphasis */
.faims-ui .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1); }
.faims-ui .bg-amber-100 { background:#fef3c7; }
.faims-ui .hover:bg-amber-50:hover { background:#fffbeb; }


`})]})}export{$e as default};
