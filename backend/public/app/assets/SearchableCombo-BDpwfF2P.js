import{n as y,j as a}from"./index-DUek7_Ci.js";import{r as s}from"./handsontable-B9UYrM3w.js";import"./react-DJG_os-6.js";function N({placeholder:f,fetchUrl:v,selectedLabel:h,onChange:g}){const[o,n]=s.useState(!1),[l,c]=s.useState(""),[i,d]=s.useState([]),[u,m]=s.useState(!1),r=s.useRef(null);s.useEffect(()=>(r.current&&clearTimeout(r.current),r.current=setTimeout(p,250),()=>{r.current&&clearTimeout(r.current)}),[l]);async function p(){if(o){m(!0);try{const t=await y.get(v,{params:{q:l}}),b=(t.data?.data||t.data||[]).map(e=>({id:e.id,value:e.type_code||e.vendor_code||e.id||e.value,label:e.type_name||e.vendor_name||e.label||e.name||e.value}));d(b)}catch{d([])}finally{m(!1)}}}return a.jsxs("div",{className:"relative",children:[a.jsx("input",{onFocus:()=>{n(!0),p()},value:o?l:h||"",onChange:t=>c(t.target.value),onBlur:()=>setTimeout(()=>n(!1),150),placeholder:f||"Search…",className:"w-full border rounded px-3 py-2"}),o&&a.jsxs("div",{className:"absolute z-10 mt-1 w-full max-h-60 overflow-auto bg-white border rounded shadow",children:[u&&a.jsx("div",{className:"p-2 text-sm text-gray-600",children:"Loading…"}),!u&&i.length===0&&a.jsx("div",{className:"p-2 text-sm text-gray-600",children:"No results"}),!u&&i.map(t=>a.jsx("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer",onMouseDown:()=>{g(t),c(""),n(!1)},children:t.label},`${t.value}`))]})]})}export{N as default};
