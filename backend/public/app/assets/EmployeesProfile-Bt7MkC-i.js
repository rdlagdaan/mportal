import{n as m,j as e,b as Ge,F as te,a as D}from"./index-BEr7U9VI.js";import{r as l}from"./handsontable-B9UYrM3w.js";import{F as ne,a as re,b as ce,c as L}from"./csrf-dk376W2S.js";import"./react-DJG_os-6.js";function U({label:O,placeholder:V="Search…",options:H,valueLabel:E,onInputChange:q,onSelect:B,required:u}){const[M,p]=l.useState(!1),[K,_]=l.useState(0),y=l.useRef(null),A=l.useRef(null),F=H.filter(t=>t.label.toLowerCase().includes((E||"").toLowerCase()));return l.useEffect(()=>{y.current?.focus()},[M,E]),l.useEffect(()=>{const t=x=>{A.current?.contains(x.target)||p(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),l.useEffect(()=>{const t=()=>p(!1);return window.addEventListener("faims-close-combos",t),()=>window.removeEventListener("faims-close-combos",t)},[]),e.jsxs("div",{className:"relative",ref:A,children:[e.jsx("label",{className:"block text-sm mb-1",children:O}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:y,className:"w-full border rounded px-3 py-2 pr-9",placeholder:V,value:E,onFocus:()=>p(!0),onChange:t=>{q(t.target.value),p(!0),_(0)},onKeyDown:t=>{if(M||p(!0),t.key==="ArrowDown")t.preventDefault(),_(x=>Math.min(x+1,Math.max(F.length-1,0)));else if(t.key==="ArrowUp")t.preventDefault(),_(x=>Math.max(x-1,0));else if(t.key==="Enter"){t.preventDefault();const x=F[K];x&&(B(x),p(!1),requestAnimationFrame(()=>y.current?.focus()))}else t.key==="Escape"&&(p(!1),requestAnimationFrame(()=>y.current?.focus()))},required:u}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onMouseDown:t=>{t.preventDefault(),p(x=>!x),requestAnimationFrame(()=>y.current?.focus())},"aria-label":"Toggle options",children:"▼"})]}),M&&e.jsx("ul",{className:"absolute z-50 mt-1 max-h-56 w-full overflow-auto rounded-md border bg-white shadow-lg",children:F.length?F.map((t,x)=>e.jsx("li",{className:`px-3 py-2 cursor-pointer ${x===K?"bg-amber-100 font-semibold":"hover:bg-amber-50"}`,onMouseDown:C=>{C.preventDefault(),B(t),p(!1),requestAnimationFrame(()=>y.current?.focus())},children:t.label},`${t.id}`)):e.jsx("li",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type to search; pick an item to bind."})]})}function Je(){const[O,V]=l.useState([]),[H,E]=l.useState(!1),[q,B]=l.useState(10),[u,M]=l.useState(1),[p,K]=l.useState(1),[_,y]=l.useState(""),[A,F]=l.useState(""),[t,x]=l.useState("empno"),C=l.useRef(null),[je,Y]=l.useState(!1),[W,Q]=l.useState("add"),[o,Z]=l.useState(null),[b,J]=l.useState("personal"),[Ne,fe]=l.useState([]),[Ue,ge]=l.useState([]),[Ve,ve]=l.useState([]),[ye,we]=l.useState([]),[_e,Ce]=l.useState([]),[ie,ke]=l.useState([]),[oe,Se]=l.useState([]),[r,c]=l.useState({employee_number:"",status:"ACTIVE",last_name:"",first_name:"",middle_name:"",sex:"MALE",blood_type:null}),[d,i]=l.useState({}),[R,k]=l.useState({}),[h,j]=l.useState({}),[de,P]=l.useState([]),[me,$]=l.useState([]);l.useEffect(()=>{(async()=>{try{const a=await m.get("/settings/paginaterecs");B(Number(a.data?.value)||10)}catch{}await Promise.all([w(1,A),Ee()])})()},[]),l.useEffect(()=>(C.current&&clearTimeout(C.current),C.current=setTimeout(()=>F(_),300),()=>{C.current&&clearTimeout(C.current)}),[_]),l.useEffect(()=>{w(1,A)},[A,t]);async function Ee(){try{const s=await m.get("/hrsi/lookups");fe(s.data.org_units||[]),ge(s.data.employee_rolles||[]),ve(s.data.ranks||[]),we(s.data.job_statuses||[]),Ce(s.data.job_positions||[]),ke(s.data.religions||[]),Se(s.data.civil_statuses||[])}catch{}}async function w(s=1,a=""){E(!0);try{const n=await m.get("/hrsi/employees",{params:{per_page:q,page:s,q:a,order:t}});V(n.data.data),M(n.data.current_page),K(n.data.last_page)}finally{E(!1)}}function Ae(){window.dispatchEvent(new Event("faims-close-combos")),Q("add"),Z(null),J("personal"),c({employee_number:"",status:"ACTIVE",last_name:"",first_name:"",middle_name:"",sex:"MALE",blood_type:null}),i({}),k({}),j({}),P([]),$([]),Y(!0)}async function Fe(s){window.dispatchEvent(new Event("faims-close-combos")),Q("edit"),Z(s.id),J("personal"),Y(!0);try{const a=await m.get(`/hrsi/employees/${s.id}`);c(a.data.personal),i(a.data.contact),k(a.data.govt),j(a.data.family),P(a.data.education||[]),$(a.data.appointments||[])}catch{}}function ue(){Y(!1)}async function Re(s){s.preventDefault(),await L("lrwsis");const a={"X-XSRF-TOKEN":D.get("XSRF-TOKEN")||""};try{const n=o;if(b==="personal")if(W==="add"){const v=await m.post("/hrsi/employees",r,{headers:a,withCredentials:!0});Z(v.data.id),Q("edit")}else n&&await m.patch(`/hrsi/employees/${n}`,r,{headers:a,withCredentials:!0});else b==="contact"&&o?await m.patch(`/hrsi/employees/${o}/contact`,d,{headers:a,withCredentials:!0}):b==="govt"&&o?await m.patch(`/hrsi/employees/${o}/govt`,R,{headers:a,withCredentials:!0}):b==="family"&&o&&await m.patch(`/hrsi/employees/${o}/family`,h,{headers:a,withCredentials:!0});b==="personal"&&await w(u),alert("Saved")}catch(n){alert(n?.response?.data?.message||"Save failed")}}async function Te(s){if(!confirm("Delete this employee?"))return;await L("lrwsis"),await m.delete(`/hrsi/employees/${s}`,{headers:{"X-XSRF-TOKEN":D.get("XSRF-TOKEN")||""},withCredentials:!0});const a=O.length===1&&u>1?u-1:u;await w(a)}const[Ie,T]=l.useState(!1),[N,f]=l.useState({completed:!0}),[ee,pe]=l.useState("add"),[se,xe]=l.useState(null);function De(){pe("add"),xe(null),f({completed:!0}),T(!0)}function Le(s){pe("edit"),xe(s.id),f(s),T(!0)}async function Oe(s){if(s.preventDefault(),!o)return;await L("lrwsis");const a={"X-XSRF-TOKEN":D.get("XSRF-TOKEN")||""};if(ee==="add"){const n=await m.post(`/hrsi/employees/${o}/education`,N,{headers:a,withCredentials:!0});P(v=>[n.data,...v])}else if(se){const n=await m.patch(`/hrsi/employees/${o}/education/${se}`,N,{headers:a,withCredentials:!0});P(v=>v.map(X=>X.id===se?n.data:X))}T(!1)}async function Me(s){o&&confirm("Delete this education record?")&&(await L("lrwsis"),await m.delete(`/hrsi/employees/${o}/education/${s}`,{headers:{"X-XSRF-TOKEN":D.get("XSRF-TOKEN")||""},withCredentials:!0}),P(a=>a.filter(n=>n.id!==s)))}const[Pe,I]=l.useState(!1),[S,g]=l.useState({}),[ae,he]=l.useState("add"),[le,be]=l.useState(null),[$e,z]=l.useState(""),[Xe,G]=l.useState("");function He(){he("add"),be(null),g({}),z(""),G(""),I(!0)}function qe(s){he("edit"),be(s.id),g(s),z(s.org_unit_name||""),G(s.position_name||""),I(!0)}async function Be(s){if(s.preventDefault(),!o)return;await L("lrwsis");const a={"X-XSRF-TOKEN":D.get("XSRF-TOKEN")||""};if(ae==="add"){const n=await m.post(`/hrsi/employees/${o}/appointments`,S,{headers:a,withCredentials:!0});$(v=>[n.data,...v])}else if(le){const n=await m.patch(`/hrsi/employees/${o}/appointments/${le}`,S,{headers:a,withCredentials:!0});$(v=>v.map(X=>X.id===le?n.data:X))}I(!1)}async function Ke(s){o&&confirm("Delete this appointment?")&&(await L("lrwsis"),await m.delete(`/hrsi/employees/${o}/appointments/${s}`,{headers:{"X-XSRF-TOKEN":D.get("XSRF-TOKEN")||""},withCredentials:!0}),$(a=>a.filter(n=>n.id!==s)))}const ze=[{key:"personal",label:"Personal Info"},{key:"contact",label:"Contact Info"},{key:"govt",label:"Government Info"},{key:"family",label:"Family Info"},{key:"education",label:"Education Info"},{key:"dept",label:"Department Info"}];return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-full faims-ui",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:Ae,className:"inline-flex items-center gap-2 bg-green-700 text-white px-4 py-2 rounded hover:bg-green-600",children:[e.jsx(ne,{className:"h-5 w-5"})," Add New"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ge,{className:"h-5 w-5 absolute left-2 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{className:"w-96 border rounded pl-8 pr-3 py-2",placeholder:"Search by name or employee no.",value:_,onChange:s=>y(s.target.value)})]}),e.jsxs("select",{className:"border rounded px-2 py-2",value:t,onChange:s=>x(s.target.value),children:[e.jsx("option",{value:"empno",children:"Sort: Employee #"}),e.jsx("option",{value:"last",children:"Sort: Last name"}),e.jsx("option",{value:"recent",children:"Sort: Recent"})]})]}),H&&e.jsx("div",{className:"flex justify-center my-6",children:e.jsx("div",{className:"w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),!H&&e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Employee Number"}),e.jsx("th",{className:"p-2",children:"Last Name"}),e.jsx("th",{className:"p-2",children:"First Name"}),e.jsx("th",{className:"p-2",children:"Middle Name"}),e.jsx("th",{className:"p-2",children:"Current Department"}),e.jsx("th",{className:"p-2",children:"Role"}),e.jsx("th",{className:"p-2",children:"Current Position"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]})}),e.jsxs("tbody",{children:[O.map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:(u-1)*q+a+1}),e.jsx("td",{className:"p-2 font-mono text-sm",children:s.employee_number||"—"}),e.jsx("td",{className:"p-2",children:s.last_name||""}),e.jsx("td",{className:"p-2",children:s.first_name||""}),e.jsx("td",{className:"p-2",children:s.middle_name||""}),e.jsx("td",{className:"p-2",children:s.current_department||""}),e.jsx("td",{className:"p-2",children:s.current_role||""}),e.jsx("td",{className:"p-2",children:s.current_position||""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>Fe(s),title:"Edit",children:e.jsx(re,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>Te(s.id),title:"Delete",children:e.jsx(ce,{className:"h-5 w-5"})})]})})]},s.id)),O.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:9,children:"No records found"})})]})]})}),e.jsxs("div",{className:"flex justify-between mt-4 text-sm text-gray-700",children:[e.jsx("button",{onClick:()=>w(1),disabled:u===1,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"First"}),e.jsx("button",{onClick:()=>w(u-1),disabled:u===1,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"self-center",children:["Page ",u," of ",p]}),e.jsx("button",{onClick:()=>w(u+1),disabled:u===p,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Next"}),e.jsx("button",{onClick:()=>w(p),disabled:u===p,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Last"})]}),je&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:ue}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-6xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:W==="edit"?"Update Employee":"Add Employee"}),e.jsx("button",{onClick:ue,className:"p-1 rounded hover:bg-gray-100",children:e.jsx(te,{className:"h-6 w-6 text-gray-600"})})]}),e.jsx("nav",{className:"px-4 pt-2 faims-tabs border-b border-gray-200",children:e.jsx("ul",{className:"flex gap-2 flex-wrap",children:ze.map(s=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>J(s.key),className:`tab ${b===s.key?"active":""}`,children:s.label})},s.key))})}),e.jsxs("form",{onSubmit:Re,className:"p-6 grid grid-cols-12 gap-4 max-h-[70vh] overflow-auto",children:[b==="personal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Employee Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2 font-mono",value:r.employee_number,onChange:s=>c(a=>({...a,employee_number:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:r.status,onChange:s=>c(a=>({...a,status:s.target.value})),children:[e.jsx("option",{children:"ACTIVE"}),e.jsx("option",{children:"INACTIVE"}),e.jsx("option",{children:"RETIRED"}),e.jsx("option",{children:"RESIGNED"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date Hired"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:r.date_hired||"",onChange:s=>c(a=>({...a,date_hired:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Last Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:r.last_name,onChange:s=>c(a=>({...a,last_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"First Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:r.first_name,onChange:s=>c(a=>({...a,first_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Middle Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:r.middle_name||"",onChange:s=>c(a=>({...a,middle_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Nick Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:r.nick_name||"",onChange:s=>c(a=>({...a,nick_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Birth Date"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:r.date_of_birth||"",onChange:s=>c(a=>({...a,date_of_birth:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Birth Place"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:r.birth_place||"",onChange:s=>c(a=>({...a,birth_place:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Gender"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:r.sex,onChange:s=>c(a=>({...a,sex:s.target.value})),children:[e.jsx("option",{value:"MALE",children:"MALE"}),e.jsx("option",{value:"FEMALE",children:"FEMALE"}),e.jsx("option",{value:"OTHER",children:"OTHER"}),e.jsx("option",{value:"PREFER_NOT_TO_SAY",children:"PREFER NOT TO SAY"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Citizenship"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:r.citizenship||"",onChange:s=>c(a=>({...a,citizenship:s.target.value}))})]}),e.jsx("div",{className:"col-span-3",children:e.jsx(U,{label:"Religion",options:ie.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:ie.find(s=>s.id===r.religion_id)?.name||"",onInputChange:()=>{},onSelect:s=>c(a=>({...a,religion_id:Number(s.id)}))})}),e.jsx("div",{className:"col-span-3",children:e.jsx(U,{label:"Civil Status",options:oe.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:oe.find(s=>s.id===r.civil_status_id)?.name||"",onInputChange:()=>{},onSelect:s=>c(a=>({...a,civil_status_id:Number(s.id)}))})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Blood Type"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:r.blood_type||"",onChange:s=>c(a=>({...a,blood_type:s.target.value||null})),children:[e.jsx("option",{value:"",children:"—"}),["O+","O-","A+","A-","B+","B-","AB+","AB-"].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:r.height_cm??"",onChange:s=>c(a=>({...a,height_cm:s.target.value?+s.target.value:null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Weight (kg)"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:r.weight_kg??"",onChange:s=>c(a=>({...a,weight_kg:s.target.value?+s.target.value:null}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:W==="edit"?"Update":"Submit"})})]}),b==="contact"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mobile Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.mobile_number||"",onChange:s=>i(a=>({...a,mobile_number:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Landline"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.landline||"",onChange:s=>i(a=>({...a,landline:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Personal Email"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.personal_email||"",onChange:s=>i(a=>({...a,personal_email:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Company Email"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.company_email||"",onChange:s=>i(a=>({...a,company_email:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"CITY ADDRESS"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Street / Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_address_line||"",onChange:s=>i(a=>({...a,city_address_line:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Barangay"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_barangay||"",onChange:s=>i(a=>({...a,city_barangay:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Town"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_town||"",onChange:s=>i(a=>({...a,city_town:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"City"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_city||"",onChange:s=>i(a=>({...a,city_city:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Zip Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_zip||"",onChange:s=>i(a=>({...a,city_zip:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Country"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_country||"PHILIPPINES",onChange:s=>i(a=>({...a,city_country:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"PROVINCIAL ADDRESS"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Street / Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_address_line||"",onChange:s=>i(a=>({...a,prov_address_line:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Barangay"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_barangay||"",onChange:s=>i(a=>({...a,prov_barangay:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Town"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_town||"",onChange:s=>i(a=>({...a,prov_town:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"City"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_city||"",onChange:s=>i(a=>({...a,prov_city:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Zip Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_zip||"",onChange:s=>i(a=>({...a,prov_zip:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Country"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_country||"PHILIPPINES",onChange:s=>i(a=>({...a,prov_country:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save Contact"})})]}),b==="govt"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"SSS Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.sss||"",onChange:s=>k(a=>({...a,sss:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"TIN Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.tin||"",onChange:s=>k(a=>({...a,tin:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PAG-IBIG"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.pagibig||"",onChange:s=>k(a=>({...a,pagibig:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PHILHEALTH"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.philhealth||"",onChange:s=>k(a=>({...a,philhealth:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PRC License"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.prc||"",onChange:s=>k(a=>({...a,prc:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save IDs"})})]}),b==="family"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"Father Information"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.father_name||"",onChange:s=>j(a=>({...a,father_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Birthday"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:h.father_birthday||"",onChange:s=>j(a=>({...a,father_birthday:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Age (auto)"}),e.jsx("input",{disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100",value:h.father_birthday?Math.floor((Date.now()-Date.parse(h.father_birthday))/(365.25*24*3600*1e3)):"—"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Occupation"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.father_occupation||"",onChange:s=>j(a=>({...a,father_occupation:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father's Employer"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.father_employer||"",onChange:s=>j(a=>({...a,father_employer:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"Mother Information"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.mother_name||"",onChange:s=>j(a=>({...a,mother_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Birthday"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:h.mother_birthday||"",onChange:s=>j(a=>({...a,mother_birthday:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Age (auto)"}),e.jsx("input",{disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100",value:h.mother_birthday?Math.floor((Date.now()-Date.parse(h.mother_birthday))/(365.25*24*3600*1e3)):"—"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Occupation"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.mother_occupation||"",onChange:s=>j(a=>({...a,mother_occupation:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Employer"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.mother_employer||"",onChange:s=>j(a=>({...a,mother_employer:s.target.value}))})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Parent Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.parent_address||"",onChange:s=>j(a=>({...a,parent_address:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save Family Info"})})]}),b==="education"&&e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:"Education Information"}),e.jsxs("button",{type:"button",onClick:De,className:"inline-flex items-center gap-2 bg-green-700 text-white px-3 py-1.5 rounded hover:bg-green-600",children:[e.jsx(ne,{className:"h-5 w-5"})," Add New"]})]}),e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"School Level"}),e.jsx("th",{className:"p-2",children:"School Name"}),e.jsx("th",{className:"p-2",children:"Location"}),e.jsx("th",{className:"p-2",children:"Date From"}),e.jsx("th",{className:"p-2",children:"Date To"}),e.jsx("th",{className:"p-2",children:"Completed"}),e.jsx("th",{className:"p-2",children:"Course"}),e.jsx("th",{className:"p-2",children:"Honors/Awards"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[de.map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:a+1}),e.jsx("td",{className:"p-2",children:s.school_level}),e.jsx("td",{className:"p-2",children:s.school_name}),e.jsx("td",{className:"p-2",children:s.school_location||""}),e.jsx("td",{className:"p-2",children:s.date_from||""}),e.jsx("td",{className:"p-2",children:s.date_to||""}),e.jsx("td",{className:"p-2",children:s.completed?"YES":"NO"}),e.jsx("td",{className:"p-2",children:s.course||""}),e.jsx("td",{className:"p-2",children:s.honors||""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",type:"button",onClick:()=>Le(s),title:"Edit",children:e.jsx(re,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",type:"button",onClick:()=>Me(s.id),title:"Delete",children:e.jsx(ce,{className:"h-5 w-5"})})]})})]},s.id)),de.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:10,children:"No records"})})]})]})})]}),b==="dept"&&e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:"Department Information (Appointments)"}),e.jsxs("button",{type:"button",onClick:He,className:"inline-flex items-center gap-2 bg-green-700 text-white px-3 py-1.5 rounded hover:bg-green-600",children:[e.jsx(ne,{className:"h-5 w-5"})," Add New"]})]}),e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Position"}),e.jsx("th",{className:"p-2",children:"Workplace"}),e.jsx("th",{className:"p-2",children:"Effective From"}),e.jsx("th",{className:"p-2",children:"Effective To"}),e.jsx("th",{className:"p-2",children:"Classification"}),e.jsx("th",{className:"p-2",children:"Status"}),e.jsx("th",{className:"p-2",children:"Salary"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[me.map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:a+1}),e.jsx("td",{className:"p-2",children:s.position_name||""}),e.jsx("td",{className:"p-2",children:s.org_unit_name||""}),e.jsx("td",{className:"p-2",children:s.effective_from||""}),e.jsx("td",{className:"p-2",children:s.effective_to||""}),e.jsx("td",{className:"p-2",children:s.classification||""}),e.jsx("td",{className:"p-2",children:s.status||""}),e.jsx("td",{className:"p-2",children:typeof s.salary=="number"?s.salary.toFixed(2):""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",type:"button",onClick:()=>qe(s),title:"Edit",children:e.jsx(re,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",type:"button",onClick:()=>Ke(s.id),title:"Delete",children:e.jsx(ce,{className:"h-5 w-5"})})]})})]},s.id)),me.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:9,children:"No records"})})]})]})})]})]})]})]}),Ie&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>T(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:ee==="edit"?"Edit Education":"Add Education"}),e.jsx("button",{onClick:()=>T(!1),className:"p-1 rounded hover:bg-gray-100",children:e.jsx(te,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:Oe,className:"p-6 grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Level"}),e.jsx("select",{className:"w-full border rounded px-2 py-2",value:N.school_level||"",onChange:s=>f(a=>({...a,school_level:s.target.value})),required:!0,children:["ELEMENTARY","HIGH SCHOOL","VOCATIONAL","COLLEGE","GRADUATE"].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.school_name||"",onChange:s=>f(a=>({...a,school_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Location"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.school_location||"",onChange:s=>f(a=>({...a,school_location:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date From"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:N.date_from||"",onChange:s=>f(a=>({...a,date_from:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date To"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:N.date_to||"",onChange:s=>f(a=>({...a,date_to:s.target.value||null}))})]}),e.jsx("div",{className:"col-span-3 flex items-end gap-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!N.completed,onChange:s=>f(a=>({...a,completed:s.target.checked}))}),e.jsx("span",{className:"text-sm",children:"Completed"})]})}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Course"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.course||"",onChange:s=>f(a=>({...a,course:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Honors/Awards"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:N.honors||"",onChange:s=>f(a=>({...a,honors:s.target.value}))})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:ee==="edit"?"Update":"Submit"})]})]})]})]}),Pe&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:ae==="edit"?"Edit Appointment":"Add Appointment"}),e.jsx("button",{onClick:()=>I(!1),className:"p-1 rounded hover:bg-gray-100",children:e.jsx(te,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:Be,className:"p-6 grid grid-cols-12 gap-4",children:[e.jsx("div",{className:"col-span-6",children:e.jsx(U,{label:"Workplace",options:Ne.map(s=>({id:s.id,label:`${s.code} • ${s.name}`})),valueLabel:$e,onInputChange:z,onSelect:s=>{z(s.label),g(a=>({...a,org_unit_id:Number(s.id)}))},required:!0})}),e.jsx("div",{className:"col-span-6",children:e.jsx(U,{label:"Position",options:_e.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:Xe,onInputChange:G,onSelect:s=>{G(s.label),g(a=>({...a,position_id:Number(s.id)}))},required:!0})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Effective From"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:S.effective_from||"",onChange:s=>g(a=>({...a,effective_from:s.target.value||null})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Effective To"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:S.effective_to||"",onChange:s=>g(a=>({...a,effective_to:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Classification"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:S.classification||"",onChange:s=>g(a=>({...a,classification:s.target.value})),children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{children:"FACULTY"}),e.jsx("option",{children:"STAFF"}),e.jsx("option",{children:"ADMIN"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:S.status||"",onChange:s=>g(a=>({...a,status:s.target.value})),children:[e.jsx("option",{value:"",children:"—"}),ye.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Salary"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:S.salary??"",onChange:s=>g(a=>({...a,salary:s.target.value?+s.target.value:null}))})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:ae==="edit"?"Update":"Submit"})]})]})]})]}),e.jsx("style",{children:`
      .faims-ui .faims-tabs .tab{background:#fff;color:#374151;padding:.625rem 1.25rem;border:1px solid #e5e7eb;border-bottom:none;border-top-left-radius:.5rem;border-top-right-radius:.5rem;position:relative;font-weight:700;transition:background-color .15s,color .15s,box-shadow .15s}
      .faims-ui .faims-tabs .tab:hover{background:#fef3c7;color:#111827;box-shadow:inset 0 -3px 0 #f59e0b}
      .faims-ui .faims-tabs .tab.active{background:#ca8a04;color:#fff}
      .faims-ui .faims-tabs .tab.active::after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:4px;background:#ca8a04;border-top-left-radius:4px;border-top-right-radius:4px}
      .faims-ui .faims-table table{border-collapse:separate;border-spacing:0}
      .faims-ui .faims-table thead th{background:#fffbeb;color:#1f2937}
      .faims-ui .faims-table tbody tr td{background:#fff;transition:background-color .12s,font-weight .12s,color .12s}
      .faims-ui .faims-table tbody tr:nth-child(even) td{background:#fffbeb}
      .faims-ui .faims-table tbody tr:hover td{background:#fef3c7;font-weight:600;color:#111827}
      `})]})}export{Je as default};
