import{j as e,n as d}from"./index-D4SjUwMR.js";import{r as l}from"./handsontable-B9UYrM3w.js";import"./react-DJG_os-6.js";function v(){const[o,p]=l.useState([]),[i,h]=l.useState(20),[c,u]=l.useState(1),[a,n]=l.useState({type:"DISPOSAL",date_txn:new Date().toISOString().slice(0,10)});async function r(){const s=await d.get("/inv/disposal-retirement",{params:{per:i,page:c}});p(s.data.data??s.data)}l.useEffect(()=>{r()},[i,c]);async function x(){if(!a.asset_id||!a.type||!a.date_txn)return alert("Asset, Type, Date required.");await d.post("/inv/disposal-retirement",a),n({type:"DISPOSAL",date_txn:new Date().toISOString().slice(0,10)}),r()}async function m(s){await d.post(`/inv/disposal-retirement/${s}/finalize`),r()}return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"bg-yellow-300 rounded border p-2 font-bold",children:"Sales / Disposal / Retirement"}),e.jsxs("div",{className:"bg-yellow-50 border rounded p-3",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[e.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"Asset ID",value:a.asset_id||"",onChange:s=>n(t=>({...t,asset_id:+s.target.value}))}),e.jsxs("select",{className:"border px-2 py-1 rounded",value:a.type,onChange:s=>n(t=>({...t,type:s.target.value})),children:[e.jsx("option",{value:"SALE",children:"SALE"}),e.jsx("option",{value:"DISPOSAL",children:"DISPOSAL"}),e.jsx("option",{value:"RETIREMENT",children:"RETIREMENT"})]}),e.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"Doc No",value:a.doc_no||"",onChange:s=>n(t=>({...t,doc_no:s.target.value}))}),e.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"Date (YYYY-MM-DD)",value:a.date_txn,onChange:s=>n(t=>({...t,date_txn:s.target.value}))}),e.jsx("input",{className:"border px-2 py-1 rounded col-span-5",placeholder:"Remarks",value:a.remarks||"",onChange:s=>n(t=>({...t,remarks:s.target.value}))})]}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{className:"px-4 py-1 rounded bg-green-700 text-white",onClick:x,children:"Save"})})]}),e.jsx("div",{className:"border rounded overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-green-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"Finalize"}),e.jsx("th",{className:"p-2",children:"Type"}),e.jsx("th",{className:"p-2",children:"Doc No"}),e.jsx("th",{className:"p-2",children:"Date"}),e.jsx("th",{className:"p-2",children:"Asset #"}),e.jsx("th",{className:"p-2",children:"Desc"}),e.jsx("th",{className:"p-2",children:"Asset Status"})]})}),e.jsx("tbody",{children:o.map(s=>e.jsxs("tr",{className:"odd:bg-white even:bg-green-50",children:[e.jsx("td",{className:"p-2",children:e.jsx("button",{className:"px-3 py-1 rounded bg-yellow-300",onClick:()=>m(s.id),children:"Finalize"})}),e.jsx("td",{className:"p-2",children:s.type}),e.jsx("td",{className:"p-2",children:s.doc_no||""}),e.jsx("td",{className:"p-2",children:s.date_txn}),e.jsx("td",{className:"p-2",children:s.asset_number}),e.jsx("td",{className:"p-2",children:s.description}),e.jsx("td",{className:"p-2",children:s.status})]},s.id))})]})})]})}export{v as default};
