import{n as p,j as e,b as We,F as re,a as L}from"./index-DIQ6tFzD.js";import{r as l}from"./handsontable-B9UYrM3w.js";import{F as ce,a as ie,b as oe,c as D}from"./csrf-D7jq97tF.js";import"./react-DJG_os-6.js";const Qe=9;function Ze(c){return c?.data&&Array.isArray(c.data.data)?{data:c.data.data,current_page:Number(c.data.current_page??1),last_page:Number(c.data.last_page??1)}:Array.isArray(c?.data)?{data:c.data,current_page:Number(c.current_page??1),last_page:Number(c.last_page??1)}:{data:[],current_page:1,last_page:1}}const Je=c=>Array.isArray(c)?c:[];function Y({label:c,placeholder:K="Search…",options:W,valueLabel:O,onInputChange:M,onSelect:_,required:E}){const[P,r]=l.useState(!1),[C,y]=l.useState(0),f=l.useRef(null),A=l.useRef(null),F=W.filter(t=>t.label.toLowerCase().includes((O||"").toLowerCase()));return l.useEffect(()=>{f.current?.focus()},[P,O]),l.useEffect(()=>{const t=h=>{A.current?.contains(h.target)||r(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),l.useEffect(()=>{const t=()=>r(!1);return window.addEventListener("faims-close-combos",t),()=>window.removeEventListener("faims-close-combos",t)},[]),e.jsxs("div",{className:"relative",ref:A,children:[e.jsx("label",{className:"block text-sm mb-1",children:c}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:f,className:"w-full border rounded px-3 py-2 pr-9",placeholder:K,value:O,onFocus:()=>r(!0),onChange:t=>{M(t.target.value),r(!0),y(0)},onKeyDown:t=>{if(P||r(!0),t.key==="ArrowDown")t.preventDefault(),y(h=>Math.min(h+1,Math.max(F.length-1,0)));else if(t.key==="ArrowUp")t.preventDefault(),y(h=>Math.max(h-1,0));else if(t.key==="Enter"){t.preventDefault();const h=F[C];h&&(_(h),r(!1),requestAnimationFrame(()=>f.current?.focus()))}else t.key==="Escape"&&(r(!1),requestAnimationFrame(()=>f.current?.focus()))},required:E}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onMouseDown:t=>{t.preventDefault(),r(h=>!h),requestAnimationFrame(()=>f.current?.focus())},"aria-label":"Toggle options",children:"▼"})]}),P&&e.jsx("ul",{className:"absolute z-50 mt-1 max-h-56 w-full overflow-auto rounded-md border bg-white shadow-lg",children:F.length?F.map((t,h)=>e.jsx("li",{className:`px-3 py-2 cursor-pointer ${h===C?"bg-amber-100 font-semibold":"hover:bg-amber-50"}`,onMouseDown:$=>{$.preventDefault(),_(t),r(!1),requestAnimationFrame(()=>f.current?.focus())},children:t.label},`${t.id}`)):e.jsx("li",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type to search; pick an item to bind."})]})}function rs(){const[c,K]=l.useState([]),[W,O]=l.useState([]),[M,_]=l.useState(!1),[E,P]=l.useState(10),[r,C]=l.useState(1),[y,f]=l.useState(1),[A,F]=l.useState(""),[t,h]=l.useState(""),[$,ge]=l.useState("empno"),X=l.useRef(null),[ve,Q]=l.useState(!1),[Z,J]=l.useState("add"),[m,ee]=l.useState(null),[j,se]=l.useState("personal"),[ye,we]=l.useState([]),[es,_e]=l.useState([]),[ss,Ce]=l.useState([]),[ke,Se]=l.useState([]),[Ee,Ae]=l.useState([]),[de,Fe]=l.useState([]),[me,Re]=l.useState([]),[i,o]=l.useState({employee_number:"",status:"ACTIVE",last_name:"",first_name:"",middle_name:"",sex:"MALE",blood_type:null}),[u,d]=l.useState({}),[R,k]=l.useState({}),[x,N]=l.useState({}),[ue,q]=l.useState([]),[pe,H]=l.useState([]);l.useEffect(()=>{(async()=>{try{const a=await p.get("/settings/paginaterecs");P(Number(a.data?.value)||10)}catch{}await Promise.all([G(1,t),Te()])})()},[]),l.useEffect(()=>(X.current&&clearTimeout(X.current),X.current=setTimeout(()=>h(A),300),()=>{X.current&&clearTimeout(X.current)}),[A]),l.useEffect(()=>{G(1,t)},[t,$]);async function Te(){try{const s=await p.get("/hrsi/lookups");we(s.data.org_units||[]),_e(s.data.employee_rolles||[]),Ce(s.data.ranks||[]),Se(s.data.job_statuses||[]),Ae(s.data.job_positions||[]),Fe(s.data.religions||[]),Re(s.data.civil_statuses||[])}catch{}}async function he(s=1,a=""){_(!0);try{const n=await p.get("/hrsi/employees",{params:{per_page:E,page:s,q:a,order:"name"},withCredentials:!0}),b=Ze(n.data);K(Je(b.data)),C(b.current_page||1),f(b.last_page||1)}catch(n){console.error("employees fetch failed",n),K([]),C(1),f(1)}finally{_(!1)}}l.useEffect(()=>{he(1,t)},[t,E]);const z=s=>{const a=Math.max(1,Math.min(s,y||1));C(a),he(a,t)};async function G(s=1,a=""){_(!0);try{const n=await p.get("/hrsi/employees",{params:{per_page:E,page:s,q:a,order:$}});O(n.data.data),C(n.data.current_page),f(n.data.last_page)}finally{_(!1)}}function Ie(){window.dispatchEvent(new Event("faims-close-combos")),J("add"),ee(null),se("personal"),o({employee_number:"",status:"ACTIVE",last_name:"",first_name:"",middle_name:"",sex:"MALE",blood_type:null}),d({}),k({}),N({}),q([]),H([]),Q(!0)}async function Le(s){window.dispatchEvent(new Event("faims-close-combos")),J("edit"),ee(s.id),se("personal"),Q(!0);try{const a=await p.get(`/hrsi/employees/${s.id}`);o(a.data.personal),d(a.data.contact),k(a.data.govt),N(a.data.family),q(a.data.education||[]),H(a.data.appointments||[])}catch{}}function xe(){Q(!1)}async function De(s){s.preventDefault(),await D("lrwsis");const a={"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""};try{const n=m;if(j==="personal")if(Z==="add"){const b=await p.post("/hrsi/employees",i,{headers:a,withCredentials:!0});ee(b.data.id),J("edit")}else n&&await p.patch(`/hrsi/employees/${n}`,i,{headers:a,withCredentials:!0});else j==="contact"&&m?await p.patch(`/hrsi/employees/${m}/contact`,u,{headers:a,withCredentials:!0}):j==="govt"&&m?await p.patch(`/hrsi/employees/${m}/govt`,R,{headers:a,withCredentials:!0}):j==="family"&&m&&await p.patch(`/hrsi/employees/${m}/family`,x,{headers:a,withCredentials:!0});j==="personal"&&await G(r),alert("Saved")}catch(n){alert(n?.response?.data?.message||"Save failed")}}async function Oe(s){if(!confirm("Delete this employee?"))return;await D("lrwsis"),await p.delete(`/hrsi/employees/${s}`,{headers:{"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""},withCredentials:!0});const a=W.length===1&&r>1?r-1:r;await G(a)}const[Me,T]=l.useState(!1),[g,v]=l.useState({completed:!0}),[ae,be]=l.useState("add"),[le,je]=l.useState(null);function Pe(){be("add"),je(null),v({completed:!0}),T(!0)}function $e(s){be("edit"),je(s.id),v(s),T(!0)}async function Xe(s){if(s.preventDefault(),!m)return;await D("lrwsis");const a={"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""};if(ae==="add"){const n=await p.post(`/hrsi/employees/${m}/education`,g,{headers:a,withCredentials:!0});q(b=>[n.data,...b])}else if(le){const n=await p.patch(`/hrsi/employees/${m}/education/${le}`,g,{headers:a,withCredentials:!0});q(b=>b.map(B=>B.id===le?n.data:B))}T(!1)}async function qe(s){m&&confirm("Delete this education record?")&&(await D("lrwsis"),await p.delete(`/hrsi/employees/${m}/education/${s}`,{headers:{"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""},withCredentials:!0}),q(a=>a.filter(n=>n.id!==s)))}const[He,I]=l.useState(!1),[S,w]=l.useState({}),[te,Ne]=l.useState("add"),[ne,fe]=l.useState(null),[Be,U]=l.useState(""),[Ke,V]=l.useState("");function ze(){Ne("add"),fe(null),w({}),U(""),V(""),I(!0)}function Ge(s){Ne("edit"),fe(s.id),w(s),U(s.org_unit_name||""),V(s.position_name||""),I(!0)}async function Ue(s){if(s.preventDefault(),!m)return;await D("lrwsis");const a={"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""};if(te==="add"){const n=await p.post(`/hrsi/employees/${m}/appointments`,S,{headers:a,withCredentials:!0});H(b=>[n.data,...b])}else if(ne){const n=await p.patch(`/hrsi/employees/${m}/appointments/${ne}`,S,{headers:a,withCredentials:!0});H(b=>b.map(B=>B.id===ne?n.data:B))}I(!1)}async function Ve(s){m&&confirm("Delete this appointment?")&&(await D("lrwsis"),await p.delete(`/hrsi/employees/${m}/appointments/${s}`,{headers:{"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""},withCredentials:!0}),H(a=>a.filter(n=>n.id!==s)))}const Ye=[{key:"personal",label:"Personal Info"},{key:"contact",label:"Contact Info"},{key:"govt",label:"Government Info"},{key:"family",label:"Family Info"},{key:"education",label:"Education Info"},{key:"dept",label:"Department Info"}];return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-full faims-ui",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:Ie,className:"inline-flex items-center gap-2 bg-green-700 text-white px-4 py-2 rounded hover:bg-green-600",children:[e.jsx(ce,{className:"h-5 w-5"})," Add New"]}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"h-5 w-5 absolute left-2 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{className:"w-96 border rounded pl-8 pr-3 py-2",placeholder:"Search by name or employee no.",value:A,onChange:s=>F(s.target.value)})]}),e.jsxs("select",{className:"border rounded px-2 py-2",value:$,onChange:s=>ge(s.target.value),children:[e.jsx("option",{value:"empno",children:"Sort: Employee #"}),e.jsx("option",{value:"last",children:"Sort: Last name"}),e.jsx("option",{value:"recent",children:"Sort: Recent"})]})]}),M&&e.jsx("div",{className:"flex justify-center my-6",children:e.jsx("div",{className:"w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),!M&&e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Employee Number"}),e.jsx("th",{className:"p-2",children:"Last Name"}),e.jsx("th",{className:"p-2",children:"First Name"}),e.jsx("th",{className:"p-2",children:"Middle Name"}),e.jsx("th",{className:"p-2",children:"Current Department"}),e.jsx("th",{className:"p-2",children:"Role"}),e.jsx("th",{className:"p-2",children:"Current Position"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]})}),e.jsxs("tbody",{children:[(Array.isArray(c)?c:[]).map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50",children:[e.jsx("td",{className:"p-2",children:(r-1)*E+a+1}),e.jsx("td",{className:"p-2",children:s.employee_number}),e.jsx("td",{className:"p-2",children:s.last_name}),e.jsx("td",{className:"p-2",children:s.first_name}),e.jsx("td",{className:"p-2",children:s.middle_name||"—"}),e.jsx("td",{className:"p-2",children:s.current_department||"—"}),e.jsx("td",{className:"p-2",children:s.current_role||"—"}),e.jsx("td",{className:"p-2",children:s.current_position||"—"}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>Le(s),title:"Edit",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>Oe(s.id),title:"Delete",children:e.jsx(oe,{className:"h-5 w-5"})})]})})]},s.id)),(Array.isArray(c)?c:[]).length===0&&!M&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:Qe,children:"No records found"})})]})]})}),e.jsxs("div",{className:"flex justify-between mt-4 text-sm text-gray-700",children:[e.jsx("button",{onClick:()=>z(1),disabled:r===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"First"}),e.jsx("button",{onClick:()=>z(r-1),disabled:r===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"self-center",children:["Page ",r," of ",y]}),e.jsx("button",{onClick:()=>z(r+1),disabled:r===y,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"}),e.jsx("button",{onClick:()=>z(y),disabled:r===y,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Last"})]}),ve&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:xe}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-6xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:Z==="edit"?"Update Employee":"Add Employee"}),e.jsx("button",{onClick:xe,className:"p-1 rounded hover:bg-gray-100",children:e.jsx(re,{className:"h-6 w-6 text-gray-600"})})]}),e.jsx("nav",{className:"px-4 pt-2 faims-tabs border-b border-gray-200",children:e.jsx("ul",{className:"flex gap-2 flex-wrap",children:Ye.map(s=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>se(s.key),className:`tab ${j===s.key?"active":""}`,children:s.label})},s.key))})}),e.jsxs("form",{onSubmit:De,className:"p-6 grid grid-cols-12 gap-4 max-h-[70vh] overflow-auto",children:[j==="personal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Employee Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2 font-mono",value:i.employee_number,onChange:s=>o(a=>({...a,employee_number:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:i.status,onChange:s=>o(a=>({...a,status:s.target.value})),children:[e.jsx("option",{children:"ACTIVE"}),e.jsx("option",{children:"INACTIVE"}),e.jsx("option",{children:"RETIRED"}),e.jsx("option",{children:"RESIGNED"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date Hired"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:i.date_hired||"",onChange:s=>o(a=>({...a,date_hired:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Last Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.last_name,onChange:s=>o(a=>({...a,last_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"First Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.first_name,onChange:s=>o(a=>({...a,first_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Middle Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.middle_name||"",onChange:s=>o(a=>({...a,middle_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Nick Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.nick_name||"",onChange:s=>o(a=>({...a,nick_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Birth Date"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:i.date_of_birth||"",onChange:s=>o(a=>({...a,date_of_birth:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Birth Place"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.birth_place||"",onChange:s=>o(a=>({...a,birth_place:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Gender"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:i.sex,onChange:s=>o(a=>({...a,sex:s.target.value})),children:[e.jsx("option",{value:"MALE",children:"MALE"}),e.jsx("option",{value:"FEMALE",children:"FEMALE"}),e.jsx("option",{value:"OTHER",children:"OTHER"}),e.jsx("option",{value:"PREFER_NOT_TO_SAY",children:"PREFER NOT TO SAY"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Citizenship"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.citizenship||"",onChange:s=>o(a=>({...a,citizenship:s.target.value}))})]}),e.jsx("div",{className:"col-span-3",children:e.jsx(Y,{label:"Religion",options:de.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:de.find(s=>s.id===i.religion_id)?.name||"",onInputChange:()=>{},onSelect:s=>o(a=>({...a,religion_id:Number(s.id)}))})}),e.jsx("div",{className:"col-span-3",children:e.jsx(Y,{label:"Civil Status",options:me.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:me.find(s=>s.id===i.civil_status_id)?.name||"",onInputChange:()=>{},onSelect:s=>o(a=>({...a,civil_status_id:Number(s.id)}))})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Blood Type"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:i.blood_type||"",onChange:s=>o(a=>({...a,blood_type:s.target.value||null})),children:[e.jsx("option",{value:"",children:"—"}),["O+","O-","A+","A-","B+","B-","AB+","AB-"].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:i.height_cm??"",onChange:s=>o(a=>({...a,height_cm:s.target.value?+s.target.value:null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Weight (kg)"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:i.weight_kg??"",onChange:s=>o(a=>({...a,weight_kg:s.target.value?+s.target.value:null}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:Z==="edit"?"Update":"Submit"})})]}),j==="contact"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mobile Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.mobile_number||"",onChange:s=>d(a=>({...a,mobile_number:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Landline"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.landline||"",onChange:s=>d(a=>({...a,landline:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Personal Email"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.personal_email||"",onChange:s=>d(a=>({...a,personal_email:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Company Email"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.company_email||"",onChange:s=>d(a=>({...a,company_email:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"CITY ADDRESS"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Street / Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_address_line||"",onChange:s=>d(a=>({...a,city_address_line:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Barangay"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_barangay||"",onChange:s=>d(a=>({...a,city_barangay:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Town"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_town||"",onChange:s=>d(a=>({...a,city_town:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"City"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_city||"",onChange:s=>d(a=>({...a,city_city:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Zip Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_zip||"",onChange:s=>d(a=>({...a,city_zip:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Country"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_country||"PHILIPPINES",onChange:s=>d(a=>({...a,city_country:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"PROVINCIAL ADDRESS"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Street / Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_address_line||"",onChange:s=>d(a=>({...a,prov_address_line:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Barangay"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_barangay||"",onChange:s=>d(a=>({...a,prov_barangay:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Town"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_town||"",onChange:s=>d(a=>({...a,prov_town:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"City"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_city||"",onChange:s=>d(a=>({...a,prov_city:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Zip Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_zip||"",onChange:s=>d(a=>({...a,prov_zip:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Country"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_country||"PHILIPPINES",onChange:s=>d(a=>({...a,prov_country:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save Contact"})})]}),j==="govt"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"SSS Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.sss||"",onChange:s=>k(a=>({...a,sss:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"TIN Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.tin||"",onChange:s=>k(a=>({...a,tin:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PAG-IBIG"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.pagibig||"",onChange:s=>k(a=>({...a,pagibig:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PHILHEALTH"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.philhealth||"",onChange:s=>k(a=>({...a,philhealth:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PRC License"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.prc||"",onChange:s=>k(a=>({...a,prc:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save IDs"})})]}),j==="family"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"Father Information"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.father_name||"",onChange:s=>N(a=>({...a,father_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Birthday"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:x.father_birthday||"",onChange:s=>N(a=>({...a,father_birthday:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Age (auto)"}),e.jsx("input",{disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100",value:x.father_birthday?Math.floor((Date.now()-Date.parse(x.father_birthday))/(365.25*24*3600*1e3)):"—"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Occupation"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.father_occupation||"",onChange:s=>N(a=>({...a,father_occupation:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father's Employer"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.father_employer||"",onChange:s=>N(a=>({...a,father_employer:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"Mother Information"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.mother_name||"",onChange:s=>N(a=>({...a,mother_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Birthday"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:x.mother_birthday||"",onChange:s=>N(a=>({...a,mother_birthday:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Age (auto)"}),e.jsx("input",{disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100",value:x.mother_birthday?Math.floor((Date.now()-Date.parse(x.mother_birthday))/(365.25*24*3600*1e3)):"—"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Occupation"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.mother_occupation||"",onChange:s=>N(a=>({...a,mother_occupation:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Employer"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.mother_employer||"",onChange:s=>N(a=>({...a,mother_employer:s.target.value}))})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Parent Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.parent_address||"",onChange:s=>N(a=>({...a,parent_address:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save Family Info"})})]}),j==="education"&&e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:"Education Information"}),e.jsxs("button",{type:"button",onClick:Pe,className:"inline-flex items-center gap-2 bg-green-700 text-white px-3 py-1.5 rounded hover:bg-green-600",children:[e.jsx(ce,{className:"h-5 w-5"})," Add New"]})]}),e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"School Level"}),e.jsx("th",{className:"p-2",children:"School Name"}),e.jsx("th",{className:"p-2",children:"Location"}),e.jsx("th",{className:"p-2",children:"Date From"}),e.jsx("th",{className:"p-2",children:"Date To"}),e.jsx("th",{className:"p-2",children:"Completed"}),e.jsx("th",{className:"p-2",children:"Course"}),e.jsx("th",{className:"p-2",children:"Honors/Awards"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[ue.map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:a+1}),e.jsx("td",{className:"p-2",children:s.school_level}),e.jsx("td",{className:"p-2",children:s.school_name}),e.jsx("td",{className:"p-2",children:s.school_location||""}),e.jsx("td",{className:"p-2",children:s.date_from||""}),e.jsx("td",{className:"p-2",children:s.date_to||""}),e.jsx("td",{className:"p-2",children:s.completed?"YES":"NO"}),e.jsx("td",{className:"p-2",children:s.course||""}),e.jsx("td",{className:"p-2",children:s.honors||""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",type:"button",onClick:()=>$e(s),title:"Edit",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",type:"button",onClick:()=>qe(s.id),title:"Delete",children:e.jsx(oe,{className:"h-5 w-5"})})]})})]},s.id)),ue.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:10,children:"No records"})})]})]})})]}),j==="dept"&&e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:"Department Information (Appointments)"}),e.jsxs("button",{type:"button",onClick:ze,className:"inline-flex items-center gap-2 bg-green-700 text-white px-3 py-1.5 rounded hover:bg-green-600",children:[e.jsx(ce,{className:"h-5 w-5"})," Add New"]})]}),e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Position"}),e.jsx("th",{className:"p-2",children:"Workplace"}),e.jsx("th",{className:"p-2",children:"Effective From"}),e.jsx("th",{className:"p-2",children:"Effective To"}),e.jsx("th",{className:"p-2",children:"Classification"}),e.jsx("th",{className:"p-2",children:"Status"}),e.jsx("th",{className:"p-2",children:"Salary"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[pe.map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:a+1}),e.jsx("td",{className:"p-2",children:s.position_name||""}),e.jsx("td",{className:"p-2",children:s.org_unit_name||""}),e.jsx("td",{className:"p-2",children:s.effective_from||""}),e.jsx("td",{className:"p-2",children:s.effective_to||""}),e.jsx("td",{className:"p-2",children:s.classification||""}),e.jsx("td",{className:"p-2",children:s.status||""}),e.jsx("td",{className:"p-2",children:typeof s.salary=="number"?s.salary.toFixed(2):""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",type:"button",onClick:()=>Ge(s),title:"Edit",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",type:"button",onClick:()=>Ve(s.id),title:"Delete",children:e.jsx(oe,{className:"h-5 w-5"})})]})})]},s.id)),pe.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:9,children:"No records"})})]})]})})]})]})]})]}),Me&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>T(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:ae==="edit"?"Edit Education":"Add Education"}),e.jsx("button",{onClick:()=>T(!1),className:"p-1 rounded hover:bg-gray-100",children:e.jsx(re,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:Xe,className:"p-6 grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Level"}),e.jsx("select",{className:"w-full border rounded px-2 py-2",value:g.school_level||"",onChange:s=>v(a=>({...a,school_level:s.target.value})),required:!0,children:["ELEMENTARY","HIGH SCHOOL","VOCATIONAL","COLLEGE","GRADUATE"].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.school_name||"",onChange:s=>v(a=>({...a,school_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Location"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.school_location||"",onChange:s=>v(a=>({...a,school_location:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date From"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:g.date_from||"",onChange:s=>v(a=>({...a,date_from:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date To"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:g.date_to||"",onChange:s=>v(a=>({...a,date_to:s.target.value||null}))})]}),e.jsx("div",{className:"col-span-3 flex items-end gap-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!g.completed,onChange:s=>v(a=>({...a,completed:s.target.checked}))}),e.jsx("span",{className:"text-sm",children:"Completed"})]})}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Course"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.course||"",onChange:s=>v(a=>({...a,course:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Honors/Awards"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.honors||"",onChange:s=>v(a=>({...a,honors:s.target.value}))})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:ae==="edit"?"Update":"Submit"})]})]})]})]}),He&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:te==="edit"?"Edit Appointment":"Add Appointment"}),e.jsx("button",{onClick:()=>I(!1),className:"p-1 rounded hover:bg-gray-100",children:e.jsx(re,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:Ue,className:"p-6 grid grid-cols-12 gap-4",children:[e.jsx("div",{className:"col-span-6",children:e.jsx(Y,{label:"Workplace",options:ye.map(s=>({id:s.id,label:`${s.code} • ${s.name}`})),valueLabel:Be,onInputChange:U,onSelect:s=>{U(s.label),w(a=>({...a,org_unit_id:Number(s.id)}))},required:!0})}),e.jsx("div",{className:"col-span-6",children:e.jsx(Y,{label:"Position",options:Ee.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:Ke,onInputChange:V,onSelect:s=>{V(s.label),w(a=>({...a,position_id:Number(s.id)}))},required:!0})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Effective From"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:S.effective_from||"",onChange:s=>w(a=>({...a,effective_from:s.target.value||null})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Effective To"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:S.effective_to||"",onChange:s=>w(a=>({...a,effective_to:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Classification"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:S.classification||"",onChange:s=>w(a=>({...a,classification:s.target.value})),children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{children:"FACULTY"}),e.jsx("option",{children:"STAFF"}),e.jsx("option",{children:"ADMIN"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:S.status||"",onChange:s=>w(a=>({...a,status:s.target.value})),children:[e.jsx("option",{value:"",children:"—"}),ke.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Salary"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:S.salary??"",onChange:s=>w(a=>({...a,salary:s.target.value?+s.target.value:null}))})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:te==="edit"?"Update":"Submit"})]})]})]})]}),e.jsx("style",{children:`
      .faims-ui .faims-tabs .tab{background:#fff;color:#374151;padding:.625rem 1.25rem;border:1px solid #e5e7eb;border-bottom:none;border-top-left-radius:.5rem;border-top-right-radius:.5rem;position:relative;font-weight:700;transition:background-color .15s,color .15s,box-shadow .15s}
      .faims-ui .faims-tabs .tab:hover{background:#fef3c7;color:#111827;box-shadow:inset 0 -3px 0 #f59e0b}
      .faims-ui .faims-tabs .tab.active{background:#ca8a04;color:#fff}
      .faims-ui .faims-tabs .tab.active::after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:4px;background:#ca8a04;border-top-left-radius:4px;border-top-right-radius:4px}
      .faims-ui .faims-table table{border-collapse:separate;border-spacing:0}
      .faims-ui .faims-table thead th{background:#fffbeb;color:#1f2937}
      .faims-ui .faims-table tbody tr td{background:#fff;transition:background-color .12s,font-weight .12s,color .12s}
      .faims-ui .faims-table tbody tr:nth-child(even) td{background:#fffbeb}
      .faims-ui .faims-table tbody tr:hover td{background:#fef3c7;font-weight:600;color:#111827}
      `})]})}export{rs as default};
