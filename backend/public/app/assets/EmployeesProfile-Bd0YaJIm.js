import{n as p,j as e,b as Ve,F as ae,a as X}from"./index-BrjV1--S.js";import{r as l}from"./handsontable-B9UYrM3w.js";import{F as le,a as Ne,b as fe,c as q}from"./csrf-C5RVvLTD.js";import"./react-DJG_os-6.js";function Ye(u){return u?.data&&Array.isArray(u.data.data)?{data:u.data.data,current_page:Number(u.data.current_page??1),last_page:Number(u.data.last_page??1)}:Array.isArray(u?.data)?{data:u.data,current_page:Number(u.current_page??1),last_page:Number(u.last_page??1)}:{data:[],current_page:1,last_page:1}}const We=u=>Array.isArray(u)?u:[];function Y({label:u,placeholder:H="Search…",options:B,valueLabel:L,onInputChange:D,onSelect:_,required:S}){const[M,r]=l.useState(!1),[C,y]=l.useState(0),N=l.useRef(null),E=l.useRef(null),A=B.filter(t=>t.label.toLowerCase().includes((L||"").toLowerCase()));return l.useEffect(()=>{N.current?.focus()},[M,L]),l.useEffect(()=>{const t=x=>{E.current?.contains(x.target)||r(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),l.useEffect(()=>{const t=()=>r(!1);return window.addEventListener("faims-close-combos",t),()=>window.removeEventListener("faims-close-combos",t)},[]),e.jsxs("div",{className:"relative",ref:E,children:[e.jsx("label",{className:"block text-sm mb-1",children:u}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:N,className:"w-full border rounded px-3 py-2 pr-9",placeholder:H,value:L,onFocus:()=>r(!0),onChange:t=>{D(t.target.value),r(!0),y(0)},onKeyDown:t=>{if(M||r(!0),t.key==="ArrowDown")t.preventDefault(),y(x=>Math.min(x+1,Math.max(A.length-1,0)));else if(t.key==="ArrowUp")t.preventDefault(),y(x=>Math.max(x-1,0));else if(t.key==="Enter"){t.preventDefault();const x=A[C];x&&(_(x),r(!1),requestAnimationFrame(()=>N.current?.focus()))}else t.key==="Escape"&&(r(!1),requestAnimationFrame(()=>N.current?.focus()))},required:S}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onMouseDown:t=>{t.preventDefault(),r(x=>!x),requestAnimationFrame(()=>N.current?.focus())},"aria-label":"Toggle options",children:"▼"})]}),M&&e.jsx("ul",{className:"absolute z-50 mt-1 max-h-56 w-full overflow-auto rounded-md border bg-white shadow-lg",children:A.length?A.map((t,x)=>e.jsx("li",{className:`px-3 py-2 cursor-pointer ${x===C?"bg-amber-100 font-semibold":"hover:bg-amber-50"}`,onMouseDown:O=>{O.preventDefault(),_(t),r(!1),requestAnimationFrame(()=>N.current?.focus())},children:t.label},`${t.id}`)):e.jsx("li",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type to search; pick an item to bind."})]})}function ls(){const[u,H]=l.useState([]),[B,L]=l.useState([]),[D,_]=l.useState(!1),[S,M]=l.useState(10),[r,C]=l.useState(1),[y,N]=l.useState(1),[E,A]=l.useState(""),[t,x]=l.useState(""),[O,ge]=l.useState("empno"),P=l.useRef(null),[ve,te]=l.useState(!1),[W,ne]=l.useState("add"),[o,re]=l.useState(null),[j,ce]=l.useState("personal"),[ye,we]=l.useState([]),[Qe,_e]=l.useState([]),[Ze,Ce]=l.useState([]),[ke,Se]=l.useState([]),[Ee,Ae]=l.useState([]),[oe,Fe]=l.useState([]),[ie,Ie]=l.useState([]),[c,i]=l.useState({employee_number:"",status:"ACTIVE",last_name:"",first_name:"",middle_name:"",sex:"MALE",blood_type:null}),[d,m]=l.useState({}),[F,I]=l.useState({}),[h,f]=l.useState({}),[de,z]=l.useState([]),[me,K]=l.useState([]);l.useEffect(()=>{(async()=>{try{const a=await p.get("/settings/paginaterecs");M(Number(a.data?.value)||10)}catch{}await Promise.all([Q(1,t),Re()])})()},[]),l.useEffect(()=>(P.current&&clearTimeout(P.current),P.current=setTimeout(()=>x(E),300),()=>{P.current&&clearTimeout(P.current)}),[E]),l.useEffect(()=>{Q(1,t)},[t,O]);async function Re(){try{const s=await p.get("/hrsi/lookups");we(s.data.org_units||[]),_e(s.data.employee_rolles||[]),Ce(s.data.ranks||[]),Se(s.data.job_statuses||[]),Ae(s.data.job_positions||[]),Fe(s.data.religions||[]),Ie(s.data.civil_statuses||[])}catch{}}async function ue(s=1,a=""){_(!0);try{const n=await p.get("/app/api/hrsi/employees",{params:{per_page:S,page:s,q:a,order:"name"},withCredentials:!0}),b=Ye(n.data);H(We(b.data)),C(b.current_page||1),N(b.last_page||1)}catch(n){console.error("employees fetch failed",n),H([]),C(1),N(1)}finally{_(!1)}}l.useEffect(()=>{ue(1,t)},[t,S]);const G=s=>{const a=Math.max(1,Math.min(s,y||1));C(a),ue(a,t)};async function Q(s=1,a=""){_(!0);try{const n=await p.get("/hrsi/employees",{params:{per_page:S,page:s,q:a,order:O}});L(n.data.data),C(n.data.current_page),N(n.data.last_page)}finally{_(!1)}}function Te(){window.dispatchEvent(new Event("faims-close-combos")),ne("add"),re(null),ce("personal"),i({employee_number:"",status:"ACTIVE",last_name:"",first_name:"",middle_name:"",sex:"MALE",blood_type:null}),m({}),I({}),f({}),z([]),K([]),te(!0)}function pe(){te(!1)}async function Le(s){s.preventDefault(),await q("lrwsis");const a={"X-XSRF-TOKEN":X.get("XSRF-TOKEN")||""};try{const n=o;if(j==="personal")if(W==="add"){const b=await p.post("/hrsi/employees",c,{headers:a,withCredentials:!0});re(b.data.id),ne("edit")}else n&&await p.patch(`/hrsi/employees/${n}`,c,{headers:a,withCredentials:!0});else j==="contact"&&o?await p.patch(`/hrsi/employees/${o}/contact`,d,{headers:a,withCredentials:!0}):j==="govt"&&o?await p.patch(`/hrsi/employees/${o}/govt`,F,{headers:a,withCredentials:!0}):j==="family"&&o&&await p.patch(`/hrsi/employees/${o}/family`,h,{headers:a,withCredentials:!0});j==="personal"&&await Q(r),alert("Saved")}catch(n){alert(n?.response?.data?.message||"Save failed")}}const[De,R]=l.useState(!1),[g,v]=l.useState({completed:!0}),[Z,xe]=l.useState("add"),[J,he]=l.useState(null);function Me(){xe("add"),he(null),v({completed:!0}),R(!0)}function Oe(s){xe("edit"),he(s.id),v(s),R(!0)}async function Pe(s){if(s.preventDefault(),!o)return;await q("lrwsis");const a={"X-XSRF-TOKEN":X.get("XSRF-TOKEN")||""};if(Z==="add"){const n=await p.post(`/hrsi/employees/${o}/education`,g,{headers:a,withCredentials:!0});z(b=>[n.data,...b])}else if(J){const n=await p.patch(`/hrsi/employees/${o}/education/${J}`,g,{headers:a,withCredentials:!0});z(b=>b.map($=>$.id===J?n.data:$))}R(!1)}async function $e(s){o&&confirm("Delete this education record?")&&(await q("lrwsis"),await p.delete(`/hrsi/employees/${o}/education/${s}`,{headers:{"X-XSRF-TOKEN":X.get("XSRF-TOKEN")||""},withCredentials:!0}),z(a=>a.filter(n=>n.id!==s)))}const[Xe,T]=l.useState(!1),[k,w]=l.useState({}),[ee,be]=l.useState("add"),[se,je]=l.useState(null),[qe,U]=l.useState(""),[He,V]=l.useState("");function Be(){be("add"),je(null),w({}),U(""),V(""),T(!0)}function ze(s){be("edit"),je(s.id),w(s),U(s.org_unit_name||""),V(s.position_name||""),T(!0)}async function Ke(s){if(s.preventDefault(),!o)return;await q("lrwsis");const a={"X-XSRF-TOKEN":X.get("XSRF-TOKEN")||""};if(ee==="add"){const n=await p.post(`/hrsi/employees/${o}/appointments`,k,{headers:a,withCredentials:!0});K(b=>[n.data,...b])}else if(se){const n=await p.patch(`/hrsi/employees/${o}/appointments/${se}`,k,{headers:a,withCredentials:!0});K(b=>b.map($=>$.id===se?n.data:$))}T(!1)}async function Ge(s){o&&confirm("Delete this appointment?")&&(await q("lrwsis"),await p.delete(`/hrsi/employees/${o}/appointments/${s}`,{headers:{"X-XSRF-TOKEN":X.get("XSRF-TOKEN")||""},withCredentials:!0}),K(a=>a.filter(n=>n.id!==s)))}const Ue=[{key:"personal",label:"Personal Info"},{key:"contact",label:"Contact Info"},{key:"govt",label:"Government Info"},{key:"family",label:"Family Info"},{key:"education",label:"Education Info"},{key:"dept",label:"Department Info"}];return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-full faims-ui",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:Te,className:"inline-flex items-center gap-2 bg-green-700 text-white px-4 py-2 rounded hover:bg-green-600",children:[e.jsx(le,{className:"h-5 w-5"})," Add New"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ve,{className:"h-5 w-5 absolute left-2 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{className:"w-96 border rounded pl-8 pr-3 py-2",placeholder:"Search by name or employee no.",value:E,onChange:s=>A(s.target.value)})]}),e.jsxs("select",{className:"border rounded px-2 py-2",value:O,onChange:s=>ge(s.target.value),children:[e.jsx("option",{value:"empno",children:"Sort: Employee #"}),e.jsx("option",{value:"last",children:"Sort: Last name"}),e.jsx("option",{value:"recent",children:"Sort: Recent"})]})]}),D&&e.jsx("div",{className:"flex justify-center my-6",children:e.jsx("div",{className:"w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),!D&&e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Employee Number"}),e.jsx("th",{className:"p-2",children:"Last Name"}),e.jsx("th",{className:"p-2",children:"First Name"}),e.jsx("th",{className:"p-2",children:"Middle Name"}),e.jsx("th",{className:"p-2",children:"Current Department"}),e.jsx("th",{className:"p-2",children:"Role"}),e.jsx("th",{className:"p-2",children:"Current Position"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]})}),e.jsxs("tbody",{children:[B.map((s,a)=>e.jsxs("tr",{className:"border-t even:bg-gray-50 hover:bg-emerald-50",children:[e.jsx("td",{className:"p-2",children:(r-1)*S+a+1}),e.jsx("td",{className:"p-2",children:s.employee_number}),e.jsx("td",{className:"p-2",children:s.last_name}),e.jsx("td",{className:"p-2",children:s.first_name}),e.jsx("td",{className:"p-2",children:s.middle_name||"—"}),e.jsx("td",{className:"p-2",children:s.current_department||"—"}),e.jsx("td",{className:"p-2",children:s.current_role||"—"}),e.jsx("td",{className:"p-2",children:s.current_position||"—"})]},s.id)),B.length===0&&!D&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:8,children:"No records found"})})]})]})}),e.jsxs("div",{className:"flex justify-between mt-4 text-sm text-gray-700",children:[e.jsx("button",{onClick:()=>G(1),disabled:r===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"First"}),e.jsx("button",{onClick:()=>G(r-1),disabled:r===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"self-center",children:["Page ",r," of ",y]}),e.jsx("button",{onClick:()=>G(r+1),disabled:r===y,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"}),e.jsx("button",{onClick:()=>G(y),disabled:r===y,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Last"})]}),ve&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:pe}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-6xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:W==="edit"?"Update Employee":"Add Employee"}),e.jsx("button",{onClick:pe,className:"p-1 rounded hover:bg-gray-100",children:e.jsx(ae,{className:"h-6 w-6 text-gray-600"})})]}),e.jsx("nav",{className:"px-4 pt-2 faims-tabs border-b border-gray-200",children:e.jsx("ul",{className:"flex gap-2 flex-wrap",children:Ue.map(s=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>ce(s.key),className:`tab ${j===s.key?"active":""}`,children:s.label})},s.key))})}),e.jsxs("form",{onSubmit:Le,className:"p-6 grid grid-cols-12 gap-4 max-h-[70vh] overflow-auto",children:[j==="personal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Employee Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2 font-mono",value:c.employee_number,onChange:s=>i(a=>({...a,employee_number:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:c.status,onChange:s=>i(a=>({...a,status:s.target.value})),children:[e.jsx("option",{children:"ACTIVE"}),e.jsx("option",{children:"INACTIVE"}),e.jsx("option",{children:"RETIRED"}),e.jsx("option",{children:"RESIGNED"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date Hired"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:c.date_hired||"",onChange:s=>i(a=>({...a,date_hired:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Last Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:c.last_name,onChange:s=>i(a=>({...a,last_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"First Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:c.first_name,onChange:s=>i(a=>({...a,first_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Middle Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:c.middle_name||"",onChange:s=>i(a=>({...a,middle_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Nick Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:c.nick_name||"",onChange:s=>i(a=>({...a,nick_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Birth Date"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:c.date_of_birth||"",onChange:s=>i(a=>({...a,date_of_birth:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Birth Place"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:c.birth_place||"",onChange:s=>i(a=>({...a,birth_place:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Gender"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:c.sex,onChange:s=>i(a=>({...a,sex:s.target.value})),children:[e.jsx("option",{value:"MALE",children:"MALE"}),e.jsx("option",{value:"FEMALE",children:"FEMALE"}),e.jsx("option",{value:"OTHER",children:"OTHER"}),e.jsx("option",{value:"PREFER_NOT_TO_SAY",children:"PREFER NOT TO SAY"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Citizenship"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:c.citizenship||"",onChange:s=>i(a=>({...a,citizenship:s.target.value}))})]}),e.jsx("div",{className:"col-span-3",children:e.jsx(Y,{label:"Religion",options:oe.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:oe.find(s=>s.id===c.religion_id)?.name||"",onInputChange:()=>{},onSelect:s=>i(a=>({...a,religion_id:Number(s.id)}))})}),e.jsx("div",{className:"col-span-3",children:e.jsx(Y,{label:"Civil Status",options:ie.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:ie.find(s=>s.id===c.civil_status_id)?.name||"",onInputChange:()=>{},onSelect:s=>i(a=>({...a,civil_status_id:Number(s.id)}))})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Blood Type"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:c.blood_type||"",onChange:s=>i(a=>({...a,blood_type:s.target.value||null})),children:[e.jsx("option",{value:"",children:"—"}),["O+","O-","A+","A-","B+","B-","AB+","AB-"].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:c.height_cm??"",onChange:s=>i(a=>({...a,height_cm:s.target.value?+s.target.value:null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Weight (kg)"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:c.weight_kg??"",onChange:s=>i(a=>({...a,weight_kg:s.target.value?+s.target.value:null}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:W==="edit"?"Update":"Submit"})})]}),j==="contact"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mobile Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.mobile_number||"",onChange:s=>m(a=>({...a,mobile_number:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Landline"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.landline||"",onChange:s=>m(a=>({...a,landline:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Personal Email"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.personal_email||"",onChange:s=>m(a=>({...a,personal_email:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Company Email"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.company_email||"",onChange:s=>m(a=>({...a,company_email:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"CITY ADDRESS"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Street / Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_address_line||"",onChange:s=>m(a=>({...a,city_address_line:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Barangay"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_barangay||"",onChange:s=>m(a=>({...a,city_barangay:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Town"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_town||"",onChange:s=>m(a=>({...a,city_town:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"City"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_city||"",onChange:s=>m(a=>({...a,city_city:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Zip Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_zip||"",onChange:s=>m(a=>({...a,city_zip:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Country"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.city_country||"PHILIPPINES",onChange:s=>m(a=>({...a,city_country:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"PROVINCIAL ADDRESS"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Street / Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_address_line||"",onChange:s=>m(a=>({...a,prov_address_line:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Barangay"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_barangay||"",onChange:s=>m(a=>({...a,prov_barangay:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Town"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_town||"",onChange:s=>m(a=>({...a,prov_town:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"City"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_city||"",onChange:s=>m(a=>({...a,prov_city:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Zip Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_zip||"",onChange:s=>m(a=>({...a,prov_zip:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Country"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:d.prov_country||"PHILIPPINES",onChange:s=>m(a=>({...a,prov_country:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save Contact"})})]}),j==="govt"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"SSS Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:F.sss||"",onChange:s=>I(a=>({...a,sss:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"TIN Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:F.tin||"",onChange:s=>I(a=>({...a,tin:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PAG-IBIG"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:F.pagibig||"",onChange:s=>I(a=>({...a,pagibig:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PHILHEALTH"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:F.philhealth||"",onChange:s=>I(a=>({...a,philhealth:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PRC License"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:F.prc||"",onChange:s=>I(a=>({...a,prc:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save IDs"})})]}),j==="family"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"Father Information"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.father_name||"",onChange:s=>f(a=>({...a,father_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Birthday"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:h.father_birthday||"",onChange:s=>f(a=>({...a,father_birthday:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Age (auto)"}),e.jsx("input",{disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100",value:h.father_birthday?Math.floor((Date.now()-Date.parse(h.father_birthday))/(365.25*24*3600*1e3)):"—"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Occupation"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.father_occupation||"",onChange:s=>f(a=>({...a,father_occupation:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father's Employer"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.father_employer||"",onChange:s=>f(a=>({...a,father_employer:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"Mother Information"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.mother_name||"",onChange:s=>f(a=>({...a,mother_name:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Birthday"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:h.mother_birthday||"",onChange:s=>f(a=>({...a,mother_birthday:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Age (auto)"}),e.jsx("input",{disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100",value:h.mother_birthday?Math.floor((Date.now()-Date.parse(h.mother_birthday))/(365.25*24*3600*1e3)):"—"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Occupation"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.mother_occupation||"",onChange:s=>f(a=>({...a,mother_occupation:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Employer"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.mother_employer||"",onChange:s=>f(a=>({...a,mother_employer:s.target.value}))})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Parent Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:h.parent_address||"",onChange:s=>f(a=>({...a,parent_address:s.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save Family Info"})})]}),j==="education"&&e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:"Education Information"}),e.jsxs("button",{type:"button",onClick:Me,className:"inline-flex items-center gap-2 bg-green-700 text-white px-3 py-1.5 rounded hover:bg-green-600",children:[e.jsx(le,{className:"h-5 w-5"})," Add New"]})]}),e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"School Level"}),e.jsx("th",{className:"p-2",children:"School Name"}),e.jsx("th",{className:"p-2",children:"Location"}),e.jsx("th",{className:"p-2",children:"Date From"}),e.jsx("th",{className:"p-2",children:"Date To"}),e.jsx("th",{className:"p-2",children:"Completed"}),e.jsx("th",{className:"p-2",children:"Course"}),e.jsx("th",{className:"p-2",children:"Honors/Awards"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[de.map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:a+1}),e.jsx("td",{className:"p-2",children:s.school_level}),e.jsx("td",{className:"p-2",children:s.school_name}),e.jsx("td",{className:"p-2",children:s.school_location||""}),e.jsx("td",{className:"p-2",children:s.date_from||""}),e.jsx("td",{className:"p-2",children:s.date_to||""}),e.jsx("td",{className:"p-2",children:s.completed?"YES":"NO"}),e.jsx("td",{className:"p-2",children:s.course||""}),e.jsx("td",{className:"p-2",children:s.honors||""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",type:"button",onClick:()=>Oe(s),title:"Edit",children:e.jsx(Ne,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",type:"button",onClick:()=>$e(s.id),title:"Delete",children:e.jsx(fe,{className:"h-5 w-5"})})]})})]},s.id)),de.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:10,children:"No records"})})]})]})})]}),j==="dept"&&e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:"Department Information (Appointments)"}),e.jsxs("button",{type:"button",onClick:Be,className:"inline-flex items-center gap-2 bg-green-700 text-white px-3 py-1.5 rounded hover:bg-green-600",children:[e.jsx(le,{className:"h-5 w-5"})," Add New"]})]}),e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Position"}),e.jsx("th",{className:"p-2",children:"Workplace"}),e.jsx("th",{className:"p-2",children:"Effective From"}),e.jsx("th",{className:"p-2",children:"Effective To"}),e.jsx("th",{className:"p-2",children:"Classification"}),e.jsx("th",{className:"p-2",children:"Status"}),e.jsx("th",{className:"p-2",children:"Salary"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[me.map((s,a)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:a+1}),e.jsx("td",{className:"p-2",children:s.position_name||""}),e.jsx("td",{className:"p-2",children:s.org_unit_name||""}),e.jsx("td",{className:"p-2",children:s.effective_from||""}),e.jsx("td",{className:"p-2",children:s.effective_to||""}),e.jsx("td",{className:"p-2",children:s.classification||""}),e.jsx("td",{className:"p-2",children:s.status||""}),e.jsx("td",{className:"p-2",children:typeof s.salary=="number"?s.salary.toFixed(2):""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",type:"button",onClick:()=>ze(s),title:"Edit",children:e.jsx(Ne,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",type:"button",onClick:()=>Ge(s.id),title:"Delete",children:e.jsx(fe,{className:"h-5 w-5"})})]})})]},s.id)),me.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:9,children:"No records"})})]})]})})]})]})]})]}),De&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>R(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:Z==="edit"?"Edit Education":"Add Education"}),e.jsx("button",{onClick:()=>R(!1),className:"p-1 rounded hover:bg-gray-100",children:e.jsx(ae,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:Pe,className:"p-6 grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Level"}),e.jsx("select",{className:"w-full border rounded px-2 py-2",value:g.school_level||"",onChange:s=>v(a=>({...a,school_level:s.target.value})),required:!0,children:["ELEMENTARY","HIGH SCHOOL","VOCATIONAL","COLLEGE","GRADUATE"].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.school_name||"",onChange:s=>v(a=>({...a,school_name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Location"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.school_location||"",onChange:s=>v(a=>({...a,school_location:s.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date From"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:g.date_from||"",onChange:s=>v(a=>({...a,date_from:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date To"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:g.date_to||"",onChange:s=>v(a=>({...a,date_to:s.target.value||null}))})]}),e.jsx("div",{className:"col-span-3 flex items-end gap-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!g.completed,onChange:s=>v(a=>({...a,completed:s.target.checked}))}),e.jsx("span",{className:"text-sm",children:"Completed"})]})}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Course"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.course||"",onChange:s=>v(a=>({...a,course:s.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Honors/Awards"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.honors||"",onChange:s=>v(a=>({...a,honors:s.target.value}))})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>R(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:Z==="edit"?"Update":"Submit"})]})]})]})]}),Xe&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>T(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:ee==="edit"?"Edit Appointment":"Add Appointment"}),e.jsx("button",{onClick:()=>T(!1),className:"p-1 rounded hover:bg-gray-100",children:e.jsx(ae,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:Ke,className:"p-6 grid grid-cols-12 gap-4",children:[e.jsx("div",{className:"col-span-6",children:e.jsx(Y,{label:"Workplace",options:ye.map(s=>({id:s.id,label:`${s.code} • ${s.name}`})),valueLabel:qe,onInputChange:U,onSelect:s=>{U(s.label),w(a=>({...a,org_unit_id:Number(s.id)}))},required:!0})}),e.jsx("div",{className:"col-span-6",children:e.jsx(Y,{label:"Position",options:Ee.map(s=>({id:s.id,label:`${s.name}`})),valueLabel:He,onInputChange:V,onSelect:s=>{V(s.label),w(a=>({...a,position_id:Number(s.id)}))},required:!0})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Effective From"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:k.effective_from||"",onChange:s=>w(a=>({...a,effective_from:s.target.value||null})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Effective To"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:k.effective_to||"",onChange:s=>w(a=>({...a,effective_to:s.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Classification"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:k.classification||"",onChange:s=>w(a=>({...a,classification:s.target.value})),children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{children:"FACULTY"}),e.jsx("option",{children:"STAFF"}),e.jsx("option",{children:"ADMIN"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:k.status||"",onChange:s=>w(a=>({...a,status:s.target.value})),children:[e.jsx("option",{value:"",children:"—"}),ke.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Salary"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:k.salary??"",onChange:s=>w(a=>({...a,salary:s.target.value?+s.target.value:null}))})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:ee==="edit"?"Update":"Submit"})]})]})]})]}),e.jsx("style",{children:`
      .faims-ui .faims-tabs .tab{background:#fff;color:#374151;padding:.625rem 1.25rem;border:1px solid #e5e7eb;border-bottom:none;border-top-left-radius:.5rem;border-top-right-radius:.5rem;position:relative;font-weight:700;transition:background-color .15s,color .15s,box-shadow .15s}
      .faims-ui .faims-tabs .tab:hover{background:#fef3c7;color:#111827;box-shadow:inset 0 -3px 0 #f59e0b}
      .faims-ui .faims-tabs .tab.active{background:#ca8a04;color:#fff}
      .faims-ui .faims-tabs .tab.active::after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:4px;background:#ca8a04;border-top-left-radius:4px;border-top-right-radius:4px}
      .faims-ui .faims-table table{border-collapse:separate;border-spacing:0}
      .faims-ui .faims-table thead th{background:#fffbeb;color:#1f2937}
      .faims-ui .faims-table tbody tr td{background:#fff;transition:background-color .12s,font-weight .12s,color .12s}
      .faims-ui .faims-table tbody tr:nth-child(even) td{background:#fffbeb}
      .faims-ui .faims-table tbody tr:hover td{background:#fef3c7;font-weight:600;color:#111827}
      `})]})}export{ls as default};
