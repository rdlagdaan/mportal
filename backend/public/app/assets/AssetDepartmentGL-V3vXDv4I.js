import{j as e,n as o}from"./index-Dq4xTsPt.js";import{r as t}from"./handsontable-DB04mlRq.js";import"./react-DJG_os-6.js";function D(){const[i,h]=t.useState(""),[m,g]=t.useState(""),[d,b]=t.useState(20),[r,x]=t.useState(1),[u,j]=t.useState([]),[N,f]=t.useState(0),[a,l]=t.useState({}),p=!!a.id;async function c(){const s=await o.get("/assets/department-gl",{params:{gl:i,name:m,per:d,page:r}});j(s.data.data??s.data),f(s.data.total??s.data.length??0)}t.useEffect(()=>{c()},[i,m,d,r]);async function v(){if(!a.gl_account||!a.department){alert("Department GL Code and Department Name are required.");return}const s={gl_account:a.gl_account,department:a.department,trans_flag:a.trans_flag??"Y"};if(p)await o.patch(`/assets/department-gl/${a.id}`,s);else{const n=await o.post("/assets/department-gl",s);s.id=n.data.id}l({}),await c()}async function w(s){confirm("Delete this Department GL row?")&&(await o.delete(`/assets/department-gl/${s}`),await c())}return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("div",{className:"bg-yellow-300 border rounded p-2 inline-flex items-center gap-2",children:e.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400 border shadow-sm",onClick:()=>l({gl_account:"",department:"",trans_flag:"Y"}),children:"ðŸ§­ New Asset Department GL"})}),e.jsx("div",{className:"rounded border bg-green-800 p-3 text-white",children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 items-end",children:[e.jsxs("label",{className:"col-span-2 text-sm",children:[e.jsx("div",{className:"mb-1 font-semibold",children:"Department GL:"}),e.jsx("input",{className:"w-full rounded px-2 py-1 text-black bg-yellow-100",value:i,onChange:s=>h(s.target.value)})]}),e.jsxs("label",{className:"col-span-3 text-sm",children:[e.jsx("div",{className:"mb-1 font-semibold",children:"Department Name:"}),e.jsx("input",{className:"w-full rounded px-2 py-1 text-black bg-yellow-100",value:m,onChange:s=>g(s.target.value)})]}),e.jsxs("div",{className:"col-span-1 flex gap-2 items-end justify-end",children:[e.jsx("button",{className:"px-3 py-2 rounded bg-white text-green-800",onClick:()=>{x(1),c()},children:"Search"}),e.jsxs("select",{className:"rounded text-black px-2 py-1",value:d,onChange:s=>b(+s.target.value),children:[e.jsx("option",{children:"20"}),e.jsx("option",{children:"50"}),e.jsx("option",{children:"100"})]})]})]})}),a.gl_account!==void 0&&e.jsxs("div",{className:"rounded border bg-yellow-50 p-4",children:[e.jsx("div",{className:"mb-3 font-bold",children:p?"Update":"Save"}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("label",{className:"text-sm col-span-1",children:[e.jsx("div",{className:"text-green-800 font-semibold mb-1",children:"Department GL Code:"}),e.jsx("input",{className:"w-full border rounded px-2 py-1 bg-yellow-100",value:a.gl_account??"",onChange:s=>l(n=>({...n,gl_account:s.target.value}))})]}),e.jsxs("label",{className:"text-sm col-span-2",children:[e.jsx("div",{className:"text-green-800 font-semibold mb-1",children:"Department Name:"}),e.jsx("input",{className:"w-full border rounded px-2 py-1 bg-yellow-100",value:a.department??"",onChange:s=>l(n=>({...n,department:s.target.value}))})]}),e.jsxs("label",{className:"text-sm col-span-1",children:[e.jsx("div",{className:"text-green-800 font-semibold mb-1",children:"Transaction Flag:"}),e.jsxs("select",{className:"w-full border rounded px-2 py-1 bg-yellow-100",value:a.trans_flag??"Y",onChange:s=>l(n=>({...n,trans_flag:s.target.value})),children:[e.jsx("option",{value:"Y",children:"Y"}),e.jsx("option",{value:"N",children:"N"})]})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{className:"px-4 py-2 rounded bg-green-700 text-white",onClick:v,children:p?"Update":"Save"}),e.jsx("button",{className:"px-3 py-2 rounded bg-white border",onClick:()=>l({}),children:"Close this Form"})]})]}),e.jsx("div",{className:"overflow-auto border rounded",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-green-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"Actions"}),e.jsx("th",{className:"p-2 text-left",children:"Department GL Code"}),e.jsx("th",{className:"p-2 text-left",children:"Department Name"}),e.jsx("th",{className:"p-2 text-left",children:"Transaction Flag"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{className:"odd:bg-white even:bg-green-50",children:[e.jsxs("td",{className:"p-2",children:[e.jsx("button",{className:"text-blue-700 mr-3",onClick:()=>l(s),children:"Edit"}),e.jsx("button",{className:"text-red-700",onClick:()=>w(s.id),children:"âœ–"})]}),e.jsx("td",{className:"p-2",children:s.gl_account}),e.jsx("td",{className:"p-2",children:s.department}),e.jsx("td",{className:"p-2",children:s.trans_flag})]},s.id))})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{className:"px-2 py-1 border rounded",disabled:r<=1,onClick:()=>x(s=>s-1),children:"Prev"}),e.jsxs("span",{children:["Page ",r]}),e.jsx("button",{className:"px-2 py-1 border rounded",disabled:u.length<d,onClick:()=>x(s=>s+1),children:"Next"}),e.jsxs("span",{className:"text-gray-500",children:["Total ~",N]})]})]})}export{D as default};
