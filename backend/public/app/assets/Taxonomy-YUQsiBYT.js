import{n as L,j as s,F as Lr,a as he}from"./index-Cq3dN4UP.js";import{r as l,U as w,t as Ft,a as Dr}from"./handsontable-DB04mlRq.js";import{a as Tt}from"./csrf-BG2eLYNG.js";import{F as Mr,a as Ir,b as qr}from"./TrashIcon-Tllugt5b.js";import{r as Ur}from"./react-DJG_os-6.js";var Hr=Object.defineProperty,Wr=(e,t,r)=>t in e?Hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ot=(e,t,r)=>(Wr(e,typeof t!="symbol"?t+"":t,r),r);let Xr=class{constructor(){ot(this,"current",this.detect()),ot(this,"handoffState","pending"),ot(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},xe=new Xr;function ze(e){var t,r;return xe.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?(r=(t=e.current)==null?void 0:t.ownerDocument)!=null?r:document:null:document}function Ge(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function se(){let e=[],t={addEventListener(r,n,a,i){return r.addEventListener(n,a,i),t.add(()=>r.removeEventListener(n,a,i))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Ge(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,a){let i=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:a}),this.add(()=>{Object.assign(r.style,{[n]:i})})},group(r){let n=se();return r(n),this.add(()=>n.dispose())},add(r){return e.includes(r)||e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let a of e.splice(n,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function yt(){let[e]=l.useState(se);return l.useEffect(()=>()=>e.dispose(),[e]),e}let A=(e,t)=>{xe.isServer?l.useEffect(e,t):l.useLayoutEffect(e,t)};function Ne(e){let t=l.useRef(e);return A(()=>{t.current=e},[e]),t}let F=function(e){let t=Ne(e);return w.useCallback((...r)=>t.current(...r),[t])},Kr=l.createContext(void 0);function Br(){return l.useContext(Kr)}function pt(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function ae(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ae),n}var Be=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Be||{}),de=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(de||{});function H(){let e=Yr();return l.useCallback(t=>Vr({mergeRefs:e,...t}),[e])}function Vr({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:a,visible:i=!0,name:d,mergeRefs:c}){c=c??zr;let o=Bt(t,e);if(i)return We(o,r,n,d,c);let f=a??0;if(f&2){let{static:p=!1,...b}=o;if(p)return We(b,r,n,d,c)}if(f&1){let{unmount:p=!0,...b}=o;return ae(p?0:1,{0(){return null},1(){return We({...b,hidden:!0,style:{display:"none"}},r,n,d,c)}})}return We(o,r,n,d,c)}function We(e,t={},r,n,a){let{as:i=r,children:d,refName:c="ref",...o}=it(e,["unmount","static"]),f=e.ref!==void 0?{[c]:e.ref}:{},p=typeof d=="function"?d(t):d;"className"in o&&o.className&&typeof o.className=="function"&&(o.className=o.className(t)),o["aria-labelledby"]&&o["aria-labelledby"]===o.id&&(o["aria-labelledby"]=void 0);let b={};if(t){let x=!1,h=[];for(let[v,g]of Object.entries(t))typeof g=="boolean"&&(x=!0),g===!0&&h.push(v.replace(/([A-Z])/g,y=>`-${y.toLowerCase()}`));if(x){b["data-headlessui-state"]=h.join(" ");for(let v of h)b[`data-${v}`]=""}}if(i===l.Fragment&&(Object.keys(ge(o)).length>0||Object.keys(ge(b)).length>0))if(!l.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(ge(o)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ge(o)).concat(Object.keys(ge(b))).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`))}else{let x=p.props,h=x?.className,v=typeof h=="function"?(...E)=>pt(h(...E),o.className):pt(h,o.className),g=v?{className:v}:{},y=Bt(p.props,ge(it(o,["ref"])));for(let E in b)E in y&&delete b[E];return l.cloneElement(p,Object.assign({},y,b,f,{ref:a(Gr(p),f.ref)},g))}return l.createElement(i,Object.assign({},it(o,["ref"]),i!==l.Fragment&&f,i!==l.Fragment&&b),p)}function Yr(){let e=l.useRef([]),t=l.useCallback(r=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return e.current=r,t}}function zr(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function Bt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(n[a])):t[a]=n[a];if(t.disabled||t["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[a=>{var i;return(i=a?.preventDefault)==null?void 0:i.call(a)}]);for(let n in r)Object.assign(t,{[n](a,...i){let d=r[n];for(let c of d){if((a instanceof Event||a?.nativeEvent instanceof Event)&&a.defaultPrevented)return;c(a,...i)}}});return t}function D(e){var t;return Object.assign(l.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ge(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function it(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}function Gr(e){return w.version.split(".")[0]>="19"?e.props.ref:e.ref}let Zr="span";var Ve=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ve||{});function Qr(e,t){var r;let{features:n=1,...a}=e,i={ref:t,"aria-hidden":(n&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return H()({ourProps:i,theirProps:a,slot:{},defaultTag:Zr,name:"Hidden"})}let ht=D(Qr);function Vt(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function me(e){return Vt(e)&&"tagName"in e}function we(e){return me(e)&&"accessKey"in e}function fe(e){return me(e)&&"tabIndex"in e}function Jr(e){return me(e)&&"style"in e}function en(e){return we(e)&&e.nodeName==="IFRAME"}function tn(e){return we(e)&&e.nodeName==="INPUT"}let Yt=Symbol();function rn(e,t=!0){return Object.assign(e,{[Yt]:t})}function Z(...e){let t=l.useRef(e);l.useEffect(()=>{t.current=e},[e]);let r=F(n=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return e.every(n=>n==null||n?.[Yt])?void 0:r}let wt=l.createContext(null);wt.displayName="DescriptionContext";function zt(){let e=l.useContext(wt);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,zt),t}return e}function nn(){let[e,t]=l.useState([]);return[e.length>0?e.join(" "):void 0,l.useMemo(()=>function(r){let n=F(i=>(t(d=>[...d,i]),()=>t(d=>{let c=d.slice(),o=c.indexOf(i);return o!==-1&&c.splice(o,1),c}))),a=l.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return w.createElement(wt.Provider,{value:a},r.children)},[t])]}let an="p";function sn(e,t){let r=l.useId(),n=Br(),{id:a=`headlessui-description-${r}`,...i}=e,d=zt(),c=Z(t);A(()=>d.register(a),[a,d.register]);let o=n||!1,f=l.useMemo(()=>({...d.slot,disabled:o}),[d.slot,o]),p={ref:c,...d.props,id:a};return H()({ourProps:p,theirProps:i,slot:f,defaultTag:an,name:d.name||"Description"})}let ln=D(sn),on=Object.assign(ln,{});var Gt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Gt||{});let cn=l.createContext(()=>{});function un({value:e,children:t}){return w.createElement(cn.Provider,{value:e},t)}let Zt=class extends Map{constructor(t){super(),this.factory=t}get(t){let r=super.get(t);return r===void 0&&(r=this.factory(t),this.set(t,r)),r}};var dn=Object.defineProperty,fn=(e,t,r)=>t in e?dn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mn=(e,t,r)=>(fn(e,t+"",r),r),Qt=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},U=(e,t,r)=>(Qt(e,t,"read from private field"),r?r.call(e):t.get(e)),ct=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Ot=(e,t,r,n)=>(Qt(e,t,"write to private field"),t.set(e,r),r),G,Pe,Re;let pn=class{constructor(t){ct(this,G,{}),ct(this,Pe,new Zt(()=>new Set)),ct(this,Re,new Set),mn(this,"disposables",se()),Ot(this,G,t)}dispose(){this.disposables.dispose()}get state(){return U(this,G)}subscribe(t,r){let n={selector:t,callback:r,current:t(U(this,G))};return U(this,Re).add(n),this.disposables.add(()=>{U(this,Re).delete(n)})}on(t,r){return U(this,Pe).get(t).add(r),this.disposables.add(()=>{U(this,Pe).get(t).delete(r)})}send(t){let r=this.reduce(U(this,G),t);if(r!==U(this,G)){Ot(this,G,r);for(let n of U(this,Re)){let a=n.selector(U(this,G));Jt(n.current,a)||(n.current=a,n.callback(a))}for(let n of U(this,Pe).get(t.type))n(U(this,G),t)}}};G=new WeakMap,Pe=new WeakMap,Re=new WeakMap;function Jt(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:ut(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:ut(e.entries(),t.entries()):Pt(e)&&Pt(t)?ut(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function ut(e,t){do{let r=e.next(),n=t.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function Pt(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var hn=Object.defineProperty,gn=(e,t,r)=>t in e?hn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Rt=(e,t,r)=>(gn(e,typeof t!="symbol"?t+"":t,r),r),vn=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(vn||{});let bn={0(e,t){let r=t.id,n=e.stack,a=e.stack.indexOf(r);if(a!==-1){let i=e.stack.slice();return i.splice(a,1),i.push(r),n=i,{...e,stack:n}}return{...e,stack:[...e.stack,r]}},1(e,t){let r=t.id,n=e.stack.indexOf(r);if(n===-1)return e;let a=e.stack.slice();return a.splice(n,1),{...e,stack:a}}},xn=class er extends pn{constructor(){super(...arguments),Rt(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Rt(this,"selectors",{isTop:(t,r)=>t.stack[t.stack.length-1]===r,inStack:(t,r)=>t.stack.includes(r)})}static new(){return new er({stack:[]})}reduce(t,r){return ae(r.type,bn,t,r)}};const tr=new Zt(()=>xn.new());var dt={exports:{}},ft={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At;function yn(){if(At)return ft;At=1;var e=Ur();function t(o,f){return o===f&&(o!==0||1/o===1/f)||o!==o&&f!==f}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,d=e.useMemo,c=e.useDebugValue;return ft.useSyncExternalStoreWithSelector=function(o,f,p,b,x){var h=a(null);if(h.current===null){var v={hasValue:!1,value:null};h.current=v}else v=h.current;h=d(function(){function y(k){if(!E){if(E=!0,j=k,k=b(k),x!==void 0&&v.hasValue){var P=v.value;if(x(P,k))return S=P}return S=k}if(P=S,r(j,k))return P;var T=b(k);return x!==void 0&&x(P,T)?(j=k,P):(j=k,S=T)}var E=!1,j,S,$=p===void 0?null:p;return[function(){return y(f())},$===null?void 0:function(){return y($())}]},[f,p,b,x]);var g=n(o,h[0],h[1]);return i(function(){v.hasValue=!0,v.value=g},[g]),c(g),g},ft}var Lt;function wn(){return Lt||(Lt=1,dt.exports=yn()),dt.exports}var Nn=wn();function rr(e,t,r=Jt){return Nn.useSyncExternalStoreWithSelector(F(n=>e.subscribe(jn,n)),F(()=>e.state),F(()=>e.state),F(t),r)}function jn(e){return e}function Me(e,t){let r=l.useId(),n=tr.get(t),[a,i]=rr(n,l.useCallback(d=>[n.selectors.isTop(d,r),n.selectors.inStack(d,r)],[n,r]));return A(()=>{if(e)return n.actions.push(r),()=>n.actions.pop(r)},[n,e,r]),e?i?a:!0:!1}let gt=new Map,Le=new Map;function Dt(e){var t;let r=(t=Le.get(e))!=null?t:0;return Le.set(e,r+1),r!==0?()=>Mt(e):(gt.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Mt(e))}function Mt(e){var t;let r=(t=Le.get(e))!=null?t:1;if(r===1?Le.delete(e):Le.set(e,r-1),r!==1)return;let n=gt.get(e);n&&(n["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,gt.delete(e))}function En(e,{allowed:t,disallowed:r}={}){let n=Me(e,"inert-others");A(()=>{var a,i;if(!n)return;let d=se();for(let o of(a=r?.())!=null?a:[])o&&d.add(Dt(o));let c=(i=t?.())!=null?i:[];for(let o of c){if(!o)continue;let f=ze(o);if(!f)continue;let p=o.parentElement;for(;p&&p!==f.body;){for(let b of p.children)c.some(x=>b.contains(x))||d.add(Dt(b));p=p.parentElement}}return d.dispose},[n,t,r])}function Cn(e,t,r){let n=Ne(a=>{let i=a.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&r()});l.useEffect(()=>{if(!e)return;let a=t===null?null:we(t)?t:t.current;if(!a)return;let i=se();if(typeof ResizeObserver<"u"){let d=new ResizeObserver(()=>n.current(a));d.observe(a),i.add(()=>d.disconnect())}if(typeof IntersectionObserver<"u"){let d=new IntersectionObserver(()=>n.current(a));d.observe(a),i.add(()=>d.disconnect())}return()=>i.dispose()},[t,n,e])}let Ye=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),_n=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var re=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(re||{}),vt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(vt||{}),Sn=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Sn||{});function $n(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ye)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function kn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(_n)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var nr=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(nr||{});function Fn(e,t=0){var r;return e===((r=ze(e))==null?void 0:r.body)?!1:ae(t,{0(){return e.matches(Ye)},1(){let n=e;for(;n!==null;){if(n.matches(Ye))return!0;n=n.parentElement}return!1}})}var Tn=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Tn||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ne(e){e?.focus({preventScroll:!0})}let On=["textarea","input"].join(",");function Pn(e){var t,r;return(r=(t=e?.matches)==null?void 0:t.call(e,On))!=null?r:!1}function Rn(e,t=r=>r){return e.slice().sort((r,n)=>{let a=t(r),i=t(n);if(a===null||i===null)return 0;let d=a.compareDocumentPosition(i);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function De(e,t,{sorted:r=!0,relativeTo:n=null,skipElements:a=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,d=Array.isArray(e)?r?Rn(e):e:t&64?kn(e):$n(e);a.length>0&&d.length>1&&(d=d.filter(h=>!a.some(v=>v!=null&&"current"in v?v?.current===h:v===h))),n=n??i.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),o=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,d.indexOf(n))-1;if(t&4)return Math.max(0,d.indexOf(n))+1;if(t&8)return d.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},p=0,b=d.length,x;do{if(p>=b||p+b<=0)return 0;let h=o+p;if(t&16)h=(h+b)%b;else{if(h<0)return 3;if(h>=b)return 1}x=d[h],x?.focus(f),p+=c}while(x!==i.activeElement);return t&6&&Pn(x)&&x.select(),2}function ar(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function An(){return/Android/gi.test(window.navigator.userAgent)}function It(){return ar()||An()}function Xe(e,t,r,n){let a=Ne(r);l.useEffect(()=>{if(!e)return;function i(d){a.current(d)}return document.addEventListener(t,i,n),()=>document.removeEventListener(t,i,n)},[e,t,n])}function sr(e,t,r,n){let a=Ne(r);l.useEffect(()=>{if(!e)return;function i(d){a.current(d)}return window.addEventListener(t,i,n),()=>window.removeEventListener(t,i,n)},[e,t,n])}const qt=30;function Ln(e,t,r){let n=Ne(r),a=l.useCallback(function(c,o){if(c.defaultPrevented)return;let f=o(c);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let p=function b(x){return typeof x=="function"?b(x()):Array.isArray(x)||x instanceof Set?x:[x]}(t);for(let b of p)if(b!==null&&(b.contains(f)||c.composed&&c.composedPath().includes(b)))return;return!Fn(f,nr.Loose)&&f.tabIndex!==-1&&c.preventDefault(),n.current(c,f)},[n,t]),i=l.useRef(null);Xe(e,"pointerdown",c=>{var o,f;It()||(i.current=((f=(o=c.composedPath)==null?void 0:o.call(c))==null?void 0:f[0])||c.target)},!0),Xe(e,"pointerup",c=>{if(It()||!i.current)return;let o=i.current;return i.current=null,a(c,()=>o)},!0);let d=l.useRef({x:0,y:0});Xe(e,"touchstart",c=>{d.current.x=c.touches[0].clientX,d.current.y=c.touches[0].clientY},!0),Xe(e,"touchend",c=>{let o={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(o.x-d.current.x)>=qt||Math.abs(o.y-d.current.y)>=qt))return a(c,()=>fe(c.target)?c.target:null)},!0),sr(e,"blur",c=>a(c,()=>en(window.document.activeElement)?window.document.activeElement:null),!0)}function Ze(...e){return l.useMemo(()=>ze(...e),[...e])}function lr(e,t,r,n){let a=Ne(r);l.useEffect(()=>{e=e??window;function i(d){a.current(d)}return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)},[e,t,n])}function Dn(e){return l.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Mn(e,t){let r=e(),n=new Set;return{getSnapshot(){return r},subscribe(a){return n.add(a),()=>n.delete(a)},dispatch(a,...i){let d=t[a].call(r,...i);d&&(r=d,n.forEach(c=>c()))}}}function In(){let e;return{before({doc:t}){var r;let n=t.documentElement,a=(r=t.defaultView)!=null?r:window;e=Math.max(0,a.innerWidth-n.clientWidth)},after({doc:t,d:r}){let n=t.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),i=Math.max(0,e-a);r.style(n,"paddingRight",`${i}px`)}}}function qn(){return ar()?{before({doc:e,d:t,meta:r}){function n(a){return r.containers.flatMap(i=>i()).some(i=>i.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=se();c.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let i=(a=window.scrollY)!=null?a:window.pageYOffset,d=null;t.addEventListener(e,"click",c=>{if(fe(c.target))try{let o=c.target.closest("a");if(!o)return;let{hash:f}=new URL(o.href),p=e.querySelector(f);fe(p)&&!n(p)&&(d=p)}catch{}},!0),t.addEventListener(e,"touchstart",c=>{if(fe(c.target)&&Jr(c.target))if(n(c.target)){let o=c.target;for(;o.parentElement&&n(o.parentElement);)o=o.parentElement;t.style(o,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(e,"touchmove",c=>{if(fe(c.target)){if(tn(c.target))return;if(n(c.target)){let o=c.target;for(;o.parentElement&&o.dataset.headlessuiPortal!==""&&!(o.scrollHeight>o.clientHeight||o.scrollWidth>o.clientWidth);)o=o.parentElement;o.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),t.add(()=>{var c;let o=(c=window.scrollY)!=null?c:window.pageYOffset;i!==o&&window.scrollTo(0,i),d&&d.isConnected&&(d.scrollIntoView({block:"nearest"}),d=null)})})}}:{}}function Un(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Hn(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let be=Mn(()=>new Map,{PUSH(e,t){var r;let n=(r=this.get(e))!=null?r:{doc:e,count:0,d:se(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let n={doc:e,d:t,meta:Hn(r)},a=[qn(),In(),Un()];a.forEach(({before:i})=>i?.(n)),a.forEach(({after:i})=>i?.(n))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});be.subscribe(()=>{let e=be.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let n=t.get(r.doc)==="hidden",a=r.count!==0;(a&&!n||!a&&n)&&be.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&be.dispatch("TEARDOWN",r)}});function Wn(e,t,r=()=>({containers:[]})){let n=Dn(be),a=t?n.get(t):void 0,i=a?a.count>0:!1;return A(()=>{if(!(!t||!e))return be.dispatch("PUSH",t,r),()=>be.dispatch("POP",t,r)},[e,t]),i}function Xn(e,t,r=()=>[document.body]){let n=Me(e,"scroll-lock");Wn(n,t,a=>{var i;return{containers:[...(i=a.containers)!=null?i:[],r]}})}function Kn(e=0){let[t,r]=l.useState(e),n=l.useCallback(o=>r(o),[t]),a=l.useCallback(o=>r(f=>f|o),[t]),i=l.useCallback(o=>(t&o)===o,[t]),d=l.useCallback(o=>r(f=>f&~o),[r]),c=l.useCallback(o=>r(f=>f^o),[r]);return{flags:t,setFlag:n,addFlag:a,hasFlag:i,removeFlag:d,toggleFlag:c}}var Bn={},Ut,Ht;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Ut=process==null?void 0:Bn)==null?void 0:Ut.NODE_ENV)==="test"&&typeof((Ht=Element?.prototype)==null?void 0:Ht.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Vn=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Vn||{});function Yn(e){let t={};for(let r in e)e[r]===!0&&(t[`data-${r}`]="");return t}function zn(e,t,r,n){let[a,i]=l.useState(r),{hasFlag:d,addFlag:c,removeFlag:o}=Kn(e&&a?3:0),f=l.useRef(!1),p=l.useRef(!1),b=yt();return A(()=>{var x;if(e){if(r&&i(!0),!t){r&&c(3);return}return(x=n?.start)==null||x.call(n,r),Gn(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,!p.current&&(r?(c(3),o(4)):(c(4),o(2)))},run(){p.current?r?(o(3),c(4)):(o(4),c(3)):r?o(1):c(1)},done(){var h;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,o(7),r||i(!1),(h=n?.end)==null||h.call(n,r))}})}},[e,r,t,b]),e?[a,{closed:d(1),enter:d(2),leave:d(4),transition:d(2)||d(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Gn(e,{prepare:t,run:r,done:n,inFlight:a}){let i=se();return Qn(e,{prepare:t,inFlight:a}),i.nextFrame(()=>{r(),i.requestAnimationFrame(()=>{i.add(Zn(e,n))})}),i.dispose}function Zn(e,t){var r,n;let a=se();if(!e)return a.dispose;let i=!1;a.add(()=>{i=!0});let d=(n=(r=e.getAnimations)==null?void 0:r.call(e).filter(c=>c instanceof CSSTransition))!=null?n:[];return d.length===0?(t(),a.dispose):(Promise.allSettled(d.map(c=>c.finished)).then(()=>{i||t()}),a.dispose)}function Qn(e,{inFlight:t,prepare:r}){if(t!=null&&t.current){r();return}let n=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=n}function Nt(e,t){let r=l.useRef([]),n=F(e);l.useEffect(()=>{let a=[...r.current];for(let[i,d]of t.entries())if(r.current[i]!==d){let c=n(t,a);return r.current=t,c}},[n,...t])}let Qe=l.createContext(null);Qe.displayName="OpenClosedContext";var K=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(K||{});function Je(){return l.useContext(Qe)}function Jn({value:e,children:t}){return w.createElement(Qe.Provider,{value:e},t)}function ea({children:e}){return w.createElement(Qe.Provider,{value:null},e)}function ta(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let ue=[];ta(()=>{function e(t){if(!fe(t.target)||t.target===document.body||ue[0]===t.target)return;let r=t.target;r=r.closest(Ye),ue.unshift(r??t.target),ue=ue.filter(n=>n!=null&&n.isConnected),ue.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function or(e){let t=F(e),r=l.useRef(!1);l.useEffect(()=>(r.current=!1,()=>{r.current=!0,Ge(()=>{r.current&&t()})}),[t])}function ra(){let e=typeof document>"u";return"useSyncExternalStore"in Ft?(t=>t.useSyncExternalStore)(Ft)(()=>()=>{},()=>!1,()=>!e):!1}function Ie(){let e=ra(),[t,r]=l.useState(xe.isHandoffComplete);return t&&xe.isHandoffComplete===!1&&r(!1),l.useEffect(()=>{t!==!0&&r(!0)},[t]),l.useEffect(()=>xe.handoff(),[]),e?!1:t}let ir=l.createContext(!1);function na(){return l.useContext(ir)}function Wt(e){return w.createElement(ir.Provider,{value:e.force},e.children)}function aa(e){let t=na(),r=l.useContext(ur),[n,a]=l.useState(()=>{var i;if(!t&&r!==null)return(i=r.current)!=null?i:null;if(xe.isServer)return null;let d=e?.getElementById("headlessui-portal-root");if(d)return d;if(e===null)return null;let c=e.createElement("div");return c.setAttribute("id","headlessui-portal-root"),e.body.appendChild(c)});return l.useEffect(()=>{n!==null&&(e!=null&&e.body.contains(n)||e==null||e.body.appendChild(n))},[n,e]),l.useEffect(()=>{t||r!==null&&a(r.current)},[r,a,t]),n}let cr=l.Fragment,sa=D(function(e,t){let{ownerDocument:r=null,...n}=e,a=l.useRef(null),i=Z(rn(h=>{a.current=h}),t),d=Ze(a),c=r??d,o=aa(c),[f]=l.useState(()=>{var h;return xe.isServer?null:(h=c?.createElement("div"))!=null?h:null}),p=l.useContext(bt),b=Ie();A(()=>{!o||!f||o.contains(f)||(f.setAttribute("data-headlessui-portal",""),o.appendChild(f))},[o,f]),A(()=>{if(f&&p)return p.register(f)},[p,f]),or(()=>{var h;!o||!f||(Vt(f)&&o.contains(f)&&o.removeChild(f),o.childNodes.length<=0&&((h=o.parentElement)==null||h.removeChild(o)))});let x=H();return b?!o||!f?null:Dr.createPortal(x({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:cr,name:"Portal"}),f):null});function la(e,t){let r=Z(t),{enabled:n=!0,ownerDocument:a,...i}=e,d=H();return n?w.createElement(sa,{...i,ownerDocument:a,ref:r}):d({ourProps:{ref:r},theirProps:i,slot:{},defaultTag:cr,name:"Portal"})}let oa=l.Fragment,ur=l.createContext(null);function ia(e,t){let{target:r,...n}=e,a={ref:Z(t)},i=H();return w.createElement(ur.Provider,{value:r},i({ourProps:a,theirProps:n,defaultTag:oa,name:"Popover.Group"}))}let bt=l.createContext(null);function ca(){let e=l.useContext(bt),t=l.useRef([]),r=F(i=>(t.current.push(i),e&&e.register(i),()=>n(i))),n=F(i=>{let d=t.current.indexOf(i);d!==-1&&t.current.splice(d,1),e&&e.unregister(i)}),a=l.useMemo(()=>({register:r,unregister:n,portals:t}),[r,n,t]);return[t,l.useMemo(()=>function({children:i}){return w.createElement(bt.Provider,{value:a},i)},[a])]}let ua=D(la),dr=D(ia),da=Object.assign(ua,{Group:dr});function fa(e,t=typeof document<"u"?document.defaultView:null,r){let n=Me(e,"escape");lr(t,"keydown",a=>{n&&(a.defaultPrevented||a.key===Gt.Escape&&r(a))})}function ma(){var e;let[t]=l.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,n]=l.useState((e=t?.matches)!=null?e:!1);return A(()=>{if(!t)return;function a(i){n(i.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),r}function pa({defaultContainers:e=[],portals:t,mainTreeNode:r}={}){let n=Ze(r),a=F(()=>{var i,d;let c=[];for(let o of e)o!==null&&(me(o)?c.push(o):"current"in o&&me(o.current)&&c.push(o.current));if(t!=null&&t.current)for(let o of t.current)c.push(o);for(let o of(i=n?.querySelectorAll("html > *, body > *"))!=null?i:[])o!==document.body&&o!==document.head&&me(o)&&o.id!=="headlessui-portal-root"&&(r&&(o.contains(r)||o.contains((d=r?.getRootNode())==null?void 0:d.host))||c.some(f=>o.contains(f))||c.push(o));return c});return{resolveContainers:a,contains:F(i=>a().some(d=>d.contains(i)))}}let fr=l.createContext(null);function Xt({children:e,node:t}){let[r,n]=l.useState(null),a=mr(t??r);return w.createElement(fr.Provider,{value:a},e,a===null&&w.createElement(ht,{features:Ve.Hidden,ref:i=>{var d,c;if(i){for(let o of(c=(d=ze(i))==null?void 0:d.querySelectorAll("html > *, body > *"))!=null?c:[])if(o!==document.body&&o!==document.head&&me(o)&&o!=null&&o.contains(i)){n(o);break}}}}))}function mr(e=null){var t;return(t=l.useContext(fr))!=null?t:e}function jt(){let e=l.useRef(!1);return A(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ae=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ae||{});function ha(){let e=l.useRef(0);return sr(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function pr(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)me(r.current)&&t.add(r.current);return t}let ga="div";var ve=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ve||{});function va(e,t){let r=l.useRef(null),n=Z(r,t),{initialFocus:a,initialFocusFallback:i,containers:d,features:c=15,...o}=e;Ie()||(c=0);let f=Ze(r);wa(c,{ownerDocument:f});let p=Na(c,{ownerDocument:f,container:r,initialFocus:a,initialFocusFallback:i});ja(c,{ownerDocument:f,container:r,containers:d,previousActiveElement:p});let b=ha(),x=F(j=>{if(!we(r.current))return;let S=r.current;($=>$())(()=>{ae(b.current,{[Ae.Forwards]:()=>{De(S,re.First,{skipElements:[j.relatedTarget,i]})},[Ae.Backwards]:()=>{De(S,re.Last,{skipElements:[j.relatedTarget,i]})}})})}),h=Me(!!(c&2),"focus-trap#tab-lock"),v=yt(),g=l.useRef(!1),y={ref:n,onKeyDown(j){j.key=="Tab"&&(g.current=!0,v.requestAnimationFrame(()=>{g.current=!1}))},onBlur(j){if(!(c&4))return;let S=pr(d);we(r.current)&&S.add(r.current);let $=j.relatedTarget;fe($)&&$.dataset.headlessuiFocusGuard!=="true"&&(hr(S,$)||(g.current?De(r.current,ae(b.current,{[Ae.Forwards]:()=>re.Next,[Ae.Backwards]:()=>re.Previous})|re.WrapAround,{relativeTo:j.target}):fe(j.target)&&ne(j.target)))}},E=H();return w.createElement(w.Fragment,null,h&&w.createElement(ht,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Ve.Focusable}),E({ourProps:y,theirProps:o,defaultTag:ga,name:"FocusTrap"}),h&&w.createElement(ht,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:x,features:Ve.Focusable}))}let ba=D(va),xa=Object.assign(ba,{features:ve});function ya(e=!0){let t=l.useRef(ue.slice());return Nt(([r],[n])=>{n===!0&&r===!1&&Ge(()=>{t.current.splice(0)}),n===!1&&r===!0&&(t.current=ue.slice())},[e,ue,t]),F(()=>{var r;return(r=t.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function wa(e,{ownerDocument:t}){let r=!!(e&8),n=ya(r);Nt(()=>{r||t?.activeElement===t?.body&&ne(n())},[r]),or(()=>{r&&ne(n())})}function Na(e,{ownerDocument:t,container:r,initialFocus:n,initialFocusFallback:a}){let i=l.useRef(null),d=Me(!!(e&1),"focus-trap#initial-focus"),c=jt();return Nt(()=>{if(e===0)return;if(!d){a!=null&&a.current&&ne(a.current);return}let o=r.current;o&&Ge(()=>{if(!c.current)return;let f=t?.activeElement;if(n!=null&&n.current){if(n?.current===f){i.current=f;return}}else if(o.contains(f)){i.current=f;return}if(n!=null&&n.current)ne(n.current);else{if(e&16){if(De(o,re.First|re.AutoFocus)!==vt.Error)return}else if(De(o,re.First)!==vt.Error)return;if(a!=null&&a.current&&(ne(a.current),t?.activeElement===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t?.activeElement})},[a,d,e]),i}function ja(e,{ownerDocument:t,container:r,containers:n,previousActiveElement:a}){let i=jt(),d=!!(e&4);lr(t?.defaultView,"focus",c=>{if(!d||!i.current)return;let o=pr(n);we(r.current)&&o.add(r.current);let f=a.current;if(!f)return;let p=c.target;we(p)?hr(o,p)?(a.current=p,ne(p)):(c.preventDefault(),c.stopPropagation(),ne(f)):ne(a.current)},!0)}function hr(e,t){for(let r of e)if(r.contains(t))return!0;return!1}function gr(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:br)!==l.Fragment||w.Children.count(e.children)===1}let et=l.createContext(null);et.displayName="TransitionContext";var Ea=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Ea||{});function Ca(){let e=l.useContext(et);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function _a(){let e=l.useContext(tt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let tt=l.createContext(null);tt.displayName="NestingContext";function rt(e){return"children"in e?rt(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function vr(e,t){let r=Ne(e),n=l.useRef([]),a=jt(),i=yt(),d=F((h,v=de.Hidden)=>{let g=n.current.findIndex(({el:y})=>y===h);g!==-1&&(ae(v,{[de.Unmount](){n.current.splice(g,1)},[de.Hidden](){n.current[g].state="hidden"}}),i.microTask(()=>{var y;!rt(n)&&a.current&&((y=r.current)==null||y.call(r))}))}),c=F(h=>{let v=n.current.find(({el:g})=>g===h);return v?v.state!=="visible"&&(v.state="visible"):n.current.push({el:h,state:"visible"}),()=>d(h,de.Unmount)}),o=l.useRef([]),f=l.useRef(Promise.resolve()),p=l.useRef({enter:[],leave:[]}),b=F((h,v,g)=>{o.current.splice(0),t&&(t.chains.current[v]=t.chains.current[v].filter(([y])=>y!==h)),t?.chains.current[v].push([h,new Promise(y=>{o.current.push(y)})]),t?.chains.current[v].push([h,new Promise(y=>{Promise.all(p.current[v].map(([E,j])=>j)).then(()=>y())})]),v==="enter"?f.current=f.current.then(()=>t?.wait.current).then(()=>g(v)):g(v)}),x=F((h,v,g)=>{Promise.all(p.current[v].splice(0).map(([y,E])=>E)).then(()=>{var y;(y=o.current.shift())==null||y()}).then(()=>g(v))});return l.useMemo(()=>({children:n,register:c,unregister:d,onStart:b,onStop:x,wait:f,chains:p}),[c,d,n,b,x,p,f])}let br=l.Fragment,xr=Be.RenderStrategy;function Sa(e,t){var r,n;let{transition:a=!0,beforeEnter:i,afterEnter:d,beforeLeave:c,afterLeave:o,enter:f,enterFrom:p,enterTo:b,entered:x,leave:h,leaveFrom:v,leaveTo:g,...y}=e,[E,j]=l.useState(null),S=l.useRef(null),$=gr(e),k=Z(...$?[S,t,j]:t===null?[]:[t]),P=(r=y.unmount)==null||r?de.Unmount:de.Hidden,{show:T,appear:je,initial:le}=Ca(),[R,Q]=l.useState(T?"visible":"hidden"),J=_a(),{register:O,unregister:B}=J;A(()=>O(S),[O,S]),A(()=>{if(P===de.Hidden&&S.current){if(T&&R!=="visible"){Q("visible");return}return ae(R,{hidden:()=>B(S),visible:()=>O(S)})}},[R,S,O,B,T,P]);let M=Ie();A(()=>{if($&&M&&R==="visible"&&S.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[S,R,M,$]);let Ee=le&&!je,Ce=je&&T&&le,I=l.useRef(!1),q=vr(()=>{I.current||(Q("hidden"),B(S))},J),_e=F(Se=>{I.current=!0;let $e=Se?"enter":"leave";q.onStart(S,$e,Y=>{Y==="enter"?i?.():Y==="leave"&&c?.()})}),W=F(Se=>{let $e=Se?"enter":"leave";I.current=!1,q.onStop(S,$e,Y=>{Y==="enter"?d?.():Y==="leave"&&o?.()}),$e==="leave"&&!rt(q)&&(Q("hidden"),B(S))});l.useEffect(()=>{$&&a||(_e(T),W(T))},[T,$,a]);let qe=!(!a||!$||!M||Ee),[,_]=zn(qe,E,T,{start:_e,end:W}),V=ge({ref:k,className:((n=pt(y.className,Ce&&f,Ce&&p,_.enter&&f,_.enter&&_.closed&&p,_.enter&&!_.closed&&b,_.leave&&h,_.leave&&!_.closed&&v,_.leave&&_.closed&&g,!_.transition&&T&&x))==null?void 0:n.trim())||void 0,...Yn(_)}),pe=0;R==="visible"&&(pe|=K.Open),R==="hidden"&&(pe|=K.Closed),T&&R==="hidden"&&(pe|=K.Opening),!T&&R==="visible"&&(pe|=K.Closing);let at=H();return w.createElement(tt.Provider,{value:q},w.createElement(Jn,{value:pe},at({ourProps:V,theirProps:y,defaultTag:br,features:xr,visible:R==="visible",name:"Transition.Child"})))}function $a(e,t){let{show:r,appear:n=!1,unmount:a=!0,...i}=e,d=l.useRef(null),c=gr(e),o=Z(...c?[d,t]:t===null?[]:[t]);Ie();let f=Je();if(r===void 0&&f!==null&&(r=(f&K.Open)===K.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,b]=l.useState(r?"visible":"hidden"),x=vr(()=>{r||b("hidden")}),[h,v]=l.useState(!0),g=l.useRef([r]);A(()=>{h!==!1&&g.current[g.current.length-1]!==r&&(g.current.push(r),v(!1))},[g,r]);let y=l.useMemo(()=>({show:r,appear:n,initial:h}),[r,n,h]);A(()=>{r?b("visible"):!rt(x)&&d.current!==null&&b("hidden")},[r,x]);let E={unmount:a},j=F(()=>{var k;h&&v(!1),(k=e.beforeEnter)==null||k.call(e)}),S=F(()=>{var k;h&&v(!1),(k=e.beforeLeave)==null||k.call(e)}),$=H();return w.createElement(tt.Provider,{value:x},w.createElement(et.Provider,{value:y},$({ourProps:{...E,as:l.Fragment,children:w.createElement(yr,{ref:o,...E,...i,beforeEnter:j,beforeLeave:S})},theirProps:{},defaultTag:l.Fragment,features:xr,visible:p==="visible",name:"Transition"})))}function ka(e,t){let r=l.useContext(et)!==null,n=Je()!==null;return w.createElement(w.Fragment,null,!r&&n?w.createElement(xt,{ref:t,...e}):w.createElement(yr,{ref:t,...e}))}let xt=D($a),yr=D(Sa),Et=D(ka),ye=Object.assign(xt,{Child:Et,Root:xt});var Fa=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Fa||{}),Ta=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Ta||{});let Oa={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Ct=l.createContext(null);Ct.displayName="DialogContext";function nt(e){let t=l.useContext(Ct);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,nt),r}return t}function Pa(e,t){return ae(t.type,Oa,e,t)}let Kt=D(function(e,t){let r=l.useId(),{id:n=`headlessui-dialog-${r}`,open:a,onClose:i,initialFocus:d,role:c="dialog",autoFocus:o=!0,__demoMode:f=!1,unmount:p=!1,...b}=e,x=l.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(x.current||(x.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let h=Je();a===void 0&&h!==null&&(a=(h&K.Open)===K.Open);let v=l.useRef(null),g=Z(v,t),y=Ze(v),E=a?0:1,[j,S]=l.useReducer(Pa,{titleId:null,descriptionId:null,panelRef:l.createRef()}),$=F(()=>i(!1)),k=F(_=>S({type:0,id:_})),P=Ie()?E===0:!1,[T,je]=ca(),le={get current(){var _;return(_=j.panelRef.current)!=null?_:v.current}},R=mr(),{resolveContainers:Q}=pa({mainTreeNode:R,portals:T,defaultContainers:[le]}),J=h!==null?(h&K.Closing)===K.Closing:!1;En(f||J?!1:P,{allowed:F(()=>{var _,V;return[(V=(_=v.current)==null?void 0:_.closest("[data-headlessui-portal]"))!=null?V:null]}),disallowed:F(()=>{var _;return[(_=R?.closest("body > *:not(#headlessui-portal-root)"))!=null?_:null]})});let O=tr.get(null);A(()=>{if(P)return O.actions.push(n),()=>O.actions.pop(n)},[O,n,P]);let B=rr(O,l.useCallback(_=>O.selectors.isTop(_,n),[O,n]));Ln(B,Q,_=>{_.preventDefault(),$()}),fa(B,y?.defaultView,_=>{_.preventDefault(),_.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),$()}),Xn(f||J?!1:P,y,Q),Cn(P,v,$);let[M,Ee]=nn(),Ce=l.useMemo(()=>[{dialogState:E,close:$,setTitleId:k,unmount:p},j],[E,j,$,k,p]),I=l.useMemo(()=>({open:E===0}),[E]),q={ref:g,id:n,role:c,tabIndex:-1,"aria-modal":f?void 0:E===0?!0:void 0,"aria-labelledby":j.titleId,"aria-describedby":M,unmount:p},_e=!ma(),W=ve.None;P&&!f&&(W|=ve.RestoreFocus,W|=ve.TabLock,o&&(W|=ve.AutoFocus),_e&&(W|=ve.InitialFocus));let qe=H();return w.createElement(ea,null,w.createElement(Wt,{force:!0},w.createElement(da,null,w.createElement(Ct.Provider,{value:Ce},w.createElement(dr,{target:v},w.createElement(Wt,{force:!1},w.createElement(Ee,{slot:I},w.createElement(je,null,w.createElement(xa,{initialFocus:d,initialFocusFallback:v,containers:Q,features:W},w.createElement(un,{value:$},qe({ourProps:q,theirProps:b,slot:I,defaultTag:Ra,features:Aa,visible:E===0,name:"Dialog"})))))))))))}),Ra="div",Aa=Be.RenderStrategy|Be.Static;function La(e,t){let{transition:r=!1,open:n,...a}=e,i=Je(),d=e.hasOwnProperty("open")||i!==null,c=e.hasOwnProperty("onClose");if(!d&&!c)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!d)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!c)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(n!==void 0||r)&&!a.static?w.createElement(Xt,null,w.createElement(ye,{show:n,transition:r,unmount:a.unmount},w.createElement(Kt,{ref:t,...a}))):w.createElement(Xt,null,w.createElement(Kt,{ref:t,open:n,...a}))}let Da="div";function Ma(e,t){let r=l.useId(),{id:n=`headlessui-dialog-panel-${r}`,transition:a=!1,...i}=e,[{dialogState:d,unmount:c},o]=nt("Dialog.Panel"),f=Z(t,o.panelRef),p=l.useMemo(()=>({open:d===0}),[d]),b=F(y=>{y.stopPropagation()}),x={ref:f,id:n,onClick:b},h=a?Et:l.Fragment,v=a?{unmount:c}:{},g=H();return w.createElement(h,{...v},g({ourProps:x,theirProps:i,slot:p,defaultTag:Da,name:"Dialog.Panel"}))}let Ia="div";function qa(e,t){let{transition:r=!1,...n}=e,[{dialogState:a,unmount:i}]=nt("Dialog.Backdrop"),d=l.useMemo(()=>({open:a===0}),[a]),c={ref:t,"aria-hidden":!0},o=r?Et:l.Fragment,f=r?{unmount:i}:{},p=H();return w.createElement(o,{...f},p({ourProps:c,theirProps:n,slot:d,defaultTag:Ia,name:"Dialog.Backdrop"}))}let Ua="h2";function Ha(e,t){let r=l.useId(),{id:n=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:i,setTitleId:d}]=nt("Dialog.Title"),c=Z(t);l.useEffect(()=>(d(n),()=>d(null)),[n,d]);let o=l.useMemo(()=>({open:i===0}),[i]),f={ref:c,id:n};return H()({ourProps:f,theirProps:a,slot:o,defaultTag:Ua,name:"Dialog.Title"})}let Wa=D(La),Xa=D(Ma);D(qa);let Ka=D(Ha),Te=Object.assign(Wa,{Panel:Xa,Title:Ka,Description:on});const Ke=[{value:"straight_line",label:"Straight Line"},{value:"declining_balance",label:"Declining Balance"},{value:"units_of_production",label:"Units of Production"},{value:"none",label:"None"}];function mt({label:e,placeholder:t="Search…",options:r,valueLabel:n,onInputChange:a,onSelect:i,required:d}){const[c,o]=l.useState(!1),[f,p]=l.useState(0),b=l.useRef(null),x=l.useRef(null),v=l.useMemo(()=>{const g=new Set,y=[];for(const E of r||[]){const j=`${String(E.id)}::${E.label}`;g.has(j)||(g.add(j),y.push(E))}return y},[r]).filter(g=>g.label.toLowerCase().includes((n||"").toLowerCase()));return l.useEffect(()=>{b.current?.focus()},[c,n]),l.useEffect(()=>{const g=y=>{x.current?.contains(y.target)||o(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),l.useEffect(()=>{const g=()=>o(!1);return window.addEventListener("faims-close-combos",g),()=>window.removeEventListener("faims-close-combos",g)},[]),s.jsxs("div",{className:"relative",ref:x,children:[s.jsx("label",{className:"block text-sm mb-1",children:e}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:b,className:"faims-field pr-9",placeholder:t,value:n,onFocus:()=>o(!0),onChange:g=>{a(g.target.value),o(!0),p(0)},onKeyDown:g=>{if(c||o(!0),g.key==="ArrowDown")g.preventDefault(),p(y=>Math.min(y+1,Math.max(v.length-1,0)));else if(g.key==="ArrowUp")g.preventDefault(),p(y=>Math.max(y-1,0));else if(g.key==="Enter"){g.preventDefault();const y=v[f];y&&(i(y),o(!1),requestAnimationFrame(()=>b.current?.focus()))}else g.key==="Escape"&&(o(!1),requestAnimationFrame(()=>b.current?.focus()))},required:d}),s.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onMouseDown:g=>{g.preventDefault(),o(y=>!y),requestAnimationFrame(()=>b.current?.focus())},"aria-label":"Toggle options",children:"▼"})]}),c&&s.jsx("ul",{className:"absolute z-50 mt-1 max-h-56 w-full overflow-auto rounded-md border bg-white shadow-lg",children:v.length?v.map((g,y)=>s.jsx("li",{className:`px-3 py-2 cursor-pointer ${y===f?"bg-amber-100 font-semibold":"hover:bg-amber-50"}`,onMouseDown:E=>{E.preventDefault(),i(g),o(!1),requestAnimationFrame(()=>b.current?.focus())},children:g.label},`${g.id}-${g.label}`)):s.jsx("li",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches"})}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type to search; pick an item to bind."})]})}function Ba({open:e,title:t,message:r,confirmText:n="Delete",cancelText:a="Cancel",onClose:i,onConfirm:d}){return s.jsx(ye,{appear:!0,show:e,as:l.Fragment,children:s.jsxs(Te,{as:"div",className:"relative z-[100]",onClose:i,children:[s.jsx(ye.Child,{as:l.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black/40"})}),s.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsx(ye.Child,{as:l.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsxs(Te.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl",children:[s.jsx(Te.Title,{className:"text-lg font-semibold text-gray-900",children:t}),s.jsx("div",{className:"mt-2 text-sm text-gray-700",children:r}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:i,children:a}),s.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-500",onClick:d,children:n})]})]})})})})]})})}function Va({open:e,title:t="Notice",message:r,onClose:n}){return s.jsx(ye,{appear:!0,show:e,as:l.Fragment,children:s.jsxs(Te,{as:"div",className:"relative z-[100]",onClose:n,children:[s.jsx(ye.Child,{as:l.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black/40"})}),s.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsx(ye.Child,{as:l.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsxs(Te.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl",children:[s.jsx(Te.Title,{className:"text-lg font-semibold text-gray-900",children:t}),s.jsx("div",{className:"mt-2 text-sm text-gray-700",children:r}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-500",onClick:n,children:"OK"})})]})})})})]})})}function rs(){const[e,t]=l.useState("class"),[r,n]=l.useState(null),[a,i]=l.useState(null),[d,c]=l.useState(!1),[o,f]=l.useState(10),[p,b]=l.useState(1),[x,h]=l.useState(1),[v,g]=l.useState(""),[y,E]=l.useState(""),[j,S]=l.useState("code"),$=l.useRef(null),[k,P]=l.useState([]),[T,je]=l.useState([]),[le,R]=l.useState([]),[Q,J]=l.useState(!1),[O,B]=l.useState("add"),[M,Ee]=l.useState(null),[Ce,I]=l.useState(""),[q,_e]=l.useState([]),W=l.useMemo(()=>{const u=new Set;return q.filter(m=>{const N=m.class_code?.trim();return!N||u.has(N)?!1:(u.add(N),!0)})},[q]);l.useEffect(()=>{const u=q.map(m=>m.class_code);console.log("[Taxonomy] classOptions total:",q.length,"unique:",new Set(u).size)},[q]);const[qe,_]=l.useState(""),[V,pe]=l.useState([]),[at,Se]=l.useState(""),[$e,Y]=l.useState(""),wr=u=>u.toUpperCase().replace(/[^A-Z0-9-]/g,""),[oe,ie]=l.useState({class_code:"",class_name:"",default_life_months:60,default_depr_method:"straight_line",residual_rate:0,is_active:!0,sort_order:0}),[Oe,ke]=l.useState({class_code:void 0,cat_code:"",cat_name:"",is_active:!0,sort_order:0}),[ee,te]=l.useState({cat_code:void 0,type_code:"",type_name:"",life_months_override:void 0,depr_method_override:void 0,residual_rate_override:void 0,is_active:!0,sort_order:0}),[Nr,_t]=l.useState(!1),[jr,Er]=l.useState("Notice"),[Cr,_r]=l.useState(""),[Sr,st]=l.useState(!1),[$r,kr]=l.useState("Are you sure?"),[Fr,Tr]=l.useState(""),St=l.useRef(null);function Ue(u,m="Notice"){Er(m),_r(u),_t(!0)}l.useEffect(()=>{(async()=>{try{const m=await L.get("/settings/paginaterecs");f(Number(m.data?.value)||10)}catch{}await Promise.all([ce(1,e,y),lt(),$t()])})()},[]),l.useEffect(()=>($.current&&clearTimeout($.current),$.current=setTimeout(()=>E(v),300),()=>{$.current&&clearTimeout($.current)}),[v]),l.useEffect(()=>{ce(1,e,y)},[y,e,j,r?.id,a?.id]);async function ce(u=1,m=e,N=""){c(!0);try{if(m==="class"){const C=await L.get("/assets/classes",{params:{per_page:o,page:u,q:N,order:j==="recent"?"recent":"class_code"}});P(C.data.data),b(C.data.current_page),h(C.data.last_page)}else if(m==="category"){const C=await L.get("/assets/categories",{params:{per_page:o,page:u,q:N,order:j==="recent"?"recent":"cat_code",class_code:r?.class_code||void 0}});je(C.data.data),b(C.data.current_page),h(C.data.last_page)}else{const C=await L.get("/assets/types",{params:{per_page:o,page:u,q:N,order:j==="recent"?"recent":"type_code",cat_code:a?.cat_code||void 0}});R(C.data.data),b(C.data.current_page),h(C.data.last_page)}}finally{c(!1)}}async function lt(){let m=1,N=1;const C=[];for(;;){const z=await L.get("/assets/classes",{params:{per_page:200,page:m,order:"class_code"}});if(C.push(...z.data.data??[]),N=z.data.last_page??1,m>=N)break;m++}const X=new Map;for(const z of C)X.has(z.class_code)||X.set(z.class_code,z);const Fe=Array.from(X.values());return _e(Fe),Fe}async function $t(){const u=await L.get("/assets/categories",{params:{per_page:1e3,page:1,order:"cat_code"}});let m=u.data.data??[];const N=u.data.last_page??1;for(let C=2;C<=N;C++){const X=await L.get("/assets/categories",{params:{per_page:100,page:C,order:"cat_code"}});m=m.concat(X.data.data??[])}return pe(m),m}async function Or(){if(window.dispatchEvent(new Event("faims-close-combos")),B("add"),Ee(null),e==="class"&&ie({class_code:"",class_name:"",default_life_months:60,default_depr_method:"straight_line",residual_rate:0,is_active:!0,sort_order:0}),e==="category"&&(await lt(),ke({class_code:r?.class_code,cat_code:"",cat_name:"",is_active:!0,sort_order:0}),I(r?`${r.class_code} • ${r.class_name}`:"")),e==="type"){te({cat_code:a?.cat_code,type_code:"",type_name:"",is_active:!0,sort_order:0});const u=a?`${a.cat_code} • ${a.cat_name}`:"";Y(u)}J(!0)}function Pr(u){if(window.dispatchEvent(new Event("faims-close-combos")),B("edit"),Ee(u.id),e==="class"&&ie({...u}),e==="category"){ke({...u});const m=k.find(N=>N.class_code===u.class_code);I(m?`${m.class_code} • ${m.class_name}`:"")}if(e==="type"){te({...u});const m=V.find(N=>N.cat_code===u.cat_code);Y(m?`${m.cat_code} • ${m.cat_name}`:"")}J(!0)}function He(){J(!1)}async function Rr(u){u.preventDefault(),await Tt("lrwsis");try{if(e==="class"){const m=oe;O==="edit"&&M?await L.patch(`/assets/classes/${M}`,m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0}):await L.post("/assets/classes",m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0});const N=await lt();I("");const C=N.find(X=>X.class_code===(oe.class_code||""));C&&(n(C),I(`${C.class_code} • ${C.class_name}`))}else if(e==="category"){const m={...Oe,class_code:Oe.class_code??r?.class_code};if(!m.class_code){alert("Select a Class first.");return}O==="edit"&&M?await L.patch(`/assets/categories/${M}`,m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0}):await L.post("/assets/categories",m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0}),await $t()}else{const m={...ee,cat_code:ee.cat_code??a?.cat_code};if(!m.cat_code){alert("Select a Category first.");return}O==="edit"&&M?await L.patch(`/assets/types/${M}`,m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0}):await L.post("/assets/types",m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0})}He(),await ce(p)}catch(m){const N=m?.response?.data?.message||"Save failed";Ue(N,"Validation Error")}}async function Ar(u){const m=e==="class"?k.find(C=>C.id===u):e==="category"?T.find(C=>C.id===u):le.find(C=>C.id===u),N=e==="class"?`${m?.class_code} • ${m?.class_name}`:e==="category"?`${m?.cat_code} • ${m?.cat_name}`:`${m?.type_code} • ${m?.type_name}`;kr("Confirm Deletion"),Tr(`You are about to delete “${N}”. This action cannot be undone.`),st(!0),St.current=async()=>{st(!1),await Tt("lrwsis");const C={class:"/assets/classes",category:"/assets/categories",type:"/assets/types"};try{await L.delete(`${C[e]}/${u}`,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0});const Fe=(e==="class"?k.length:e==="category"?T.length:le.length)===1&&p>1?p-1:p;await ce(Fe),Ue(`“${N}” has been deleted.`,"Deleted")}catch(X){const Fe=X?.response?.status,z=X?.response?.data?.message;Fe===409&&z?Ue(z,"Blocked"):Ue(z||"Delete failed","Error")}}}const kt=e==="class"?k:e==="category"?T:le;return s.jsxs("div",{className:"p-6 bg-gray-50 min-h-full faims-ui",children:[s.jsx("nav",{className:"mb-4 faims-tabs border-b border-gray-200",children:s.jsx("ul",{className:"flex gap-2",children:["class","category","type"].map(u=>{const m=u==="class"?"Class (Group)":u==="category"?"Category (Sub-Group)":"Type",N=e===u;return s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>t(u),className:`tab ${N?"active":""}`,children:m})},u)})})}),s.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[s.jsxs("button",{onClick:Or,className:"inline-flex items-center gap-2 bg-green-700 text-white px-4 py-2 rounded hover:bg-green-600",children:[s.jsx(Mr,{className:"h-5 w-5"})," Add New"]}),s.jsx("input",{className:"w-96 border rounded px-3 py-2",placeholder:"Search…",value:v,onChange:u=>g(u.target.value)}),s.jsxs("select",{className:"border rounded px-2 py-2",value:j,onChange:u=>S(u.target.value),children:[s.jsx("option",{value:"code",children:"Sort: Code"}),s.jsx("option",{value:"name",children:"Sort: Name"}),s.jsx("option",{value:"recent",children:"Sort: Recent"}),s.jsx("option",{value:"sort",children:"Sort: Manual"})]}),e!=="class"&&s.jsxs("select",{className:"border rounded px-2 py-2",value:r?.id??"",onChange:async u=>{const m=Number(u.target.value||0),N=k.find(C=>C.id===m)||null;n(N),i(null)},children:[s.jsx("option",{value:"",children:"Select Class…"}),k.map(u=>s.jsxs("option",{value:u.id,children:[u.class_code," • ",u.class_name]},u.id))]}),e==="type"&&s.jsx("div",{className:"col-span-4",children:s.jsx(mt,{label:"Category",placeholder:"Search or select…",options:V.filter(u=>!r||u.class_code===r.class_code).map(u=>({id:u.id,label:`${u.cat_code} • ${u.cat_name}`})),valueLabel:at,onInputChange:Se,onSelect:u=>{Se(u.label);const m=V.find(N=>N.id===Number(u.id))||null;i(m)},required:!1})})]}),d&&s.jsx("div",{className:"flex justify-center my-6",children:s.jsx("div",{className:"w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),!d&&s.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsxs("thead",{className:"bg-amber-50 text-gray-800",children:[e==="class"&&s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"#"}),s.jsx("th",{className:"p-2",children:"Code"}),s.jsx("th",{className:"p-2",children:"Name"}),s.jsx("th",{className:"p-2",children:"Life"}),s.jsx("th",{className:"p-2",children:"Method"}),s.jsx("th",{className:"p-2",children:"Residual%"}),s.jsx("th",{className:"p-2",children:"Active"}),s.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]}),e==="category"&&s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"#"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Code"}),s.jsx("th",{className:"p-2",children:"Name"}),s.jsx("th",{className:"p-2",children:"Active"}),s.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]}),e==="type"&&s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"#"}),s.jsx("th",{className:"p-2",children:"Category"}),s.jsx("th",{className:"p-2",children:"Code"}),s.jsx("th",{className:"p-2",children:"Name"}),s.jsx("th",{className:"p-2",children:"Life⚑"}),s.jsx("th",{className:"p-2",children:"Method⚑"}),s.jsx("th",{className:"p-2",children:"Residual⚑"}),s.jsx("th",{className:"p-2",children:"Active"}),s.jsx("th",{className:"p-2 w-28 text-center",children:"Actions"})]})]}),s.jsxs("tbody",{children:[kt.map((u,m)=>s.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[s.jsx("td",{className:"p-2",children:(p-1)*o+m+1}),e==="class"&&s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"p-2",children:u.class_code}),s.jsx("td",{className:"p-2",children:u.class_name}),s.jsx("td",{className:"p-2",children:u.default_life_months}),s.jsx("td",{className:"p-2",children:Ke.find(N=>N.value===u.default_depr_method)?.label}),s.jsx("td",{className:"p-2",children:u.residual_rate}),s.jsx("td",{className:"p-2",children:u.is_active?"Yes":"No"})]}),e==="category"&&s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"p-2",children:u.class_code}),s.jsx("td",{className:"p-2",children:u.cat_code}),s.jsx("td",{className:"p-2",children:u.cat_name}),s.jsx("td",{className:"p-2",children:u.is_active?"Yes":"No"})]}),e==="type"&&s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"p-2",children:u.cat_code}),s.jsx("td",{className:"p-2",children:u.type_code}),s.jsx("td",{className:"p-2",children:u.type_name}),s.jsx("td",{className:"p-2",children:u.life_months_override??"—"}),s.jsx("td",{className:"p-2",children:u.depr_method_override?Ke.find(N=>N.value===u.depr_method_override)?.label:"—"}),s.jsx("td",{className:"p-2",children:u.residual_rate_override??"—"}),s.jsx("td",{className:"p-2",children:u.is_active?"Yes":"No"})]}),s.jsx("td",{className:"p-2",children:s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>Pr(u),title:"Edit",children:s.jsx(Ir,{className:"h-5 w-5"})}),s.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>Ar(u.id),title:"Delete",children:s.jsx(qr,{className:"h-5 w-5"})})]})})]},u.id)),kt.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:9,children:"No records found"})})]})]})}),s.jsxs("div",{className:"flex justify-between mt-4 text-sm text-gray-700",children:[s.jsx("button",{onClick:()=>ce(1),disabled:p===1,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"First"}),s.jsx("button",{onClick:()=>ce(p-1),disabled:p===1,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"self-center",children:["Page ",p," of ",x]}),s.jsx("button",{onClick:()=>ce(p+1),disabled:p===x,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Next"}),s.jsx("button",{onClick:()=>ce(x),disabled:p===x,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Last"})]}),Q&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:He}),s.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h3",{className:"text-lg font-semibold",children:O==="edit"?e==="class"?"Edit Class":e==="category"?"Edit Category":"Edit Type":e==="class"?"Add Class":e==="category"?"Add Category":"Add Type"}),s.jsx("button",{onClick:He,className:"p-1 rounded hover:bg-gray-100",children:s.jsx(Lr,{className:"h-6 w-6 text-gray-600"})})]}),s.jsxs("form",{onSubmit:Rr,className:"p-6 grid grid-cols-12 gap-4",children:[e==="class"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Class Code"}),s.jsx("input",{value:oe.class_code||"",onChange:u=>ie(m=>({...m,class_code:wr(u.target.value).slice(0,8)})),pattern:"[A-Z0-9\\-]{1,25}",title:'Use letters A–Z, digits 0–9 and "-" only',className:`faims-field ${O==="edit"?"cursor-not-allowed":""}`,required:!0,readOnly:O==="edit",maxLength:8})]}),s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Class Name"}),s.jsx("input",{value:oe.class_name||"",onChange:u=>ie(m=>({...m,class_name:u.target.value})),className:"faims-field",required:!0,maxLength:150})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Life (mo)"}),s.jsx("input",{type:"number",min:1,value:oe.default_life_months??60,onChange:u=>ie(m=>({...m,default_life_months:+u.target.value})),className:"faims-field",required:!0})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Method"}),s.jsx("select",{value:oe.default_depr_method||"straight_line",onChange:u=>ie(m=>({...m,default_depr_method:u.target.value})),className:"faims-field",required:!0,children:Ke.map(u=>s.jsx("option",{value:u.value,children:u.label},u.value))})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Residual %"}),s.jsx("input",{type:"number",min:0,max:100,step:.01,value:oe.residual_rate??0,onChange:u=>ie(m=>({...m,residual_rate:+u.target.value})),className:"faims-field",required:!0})]}),s.jsx("div",{className:"col-span-2 flex items-end gap-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!oe.is_active,onChange:u=>ie(m=>({...m,is_active:u.target.checked}))}),s.jsx("span",{className:"text-sm",children:"Active"})]})})]}),e==="category"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx(mt,{label:"Class",placeholder:"Search or select class…",required:!0,options:W.map(u=>({id:u.id,label:`${u.class_code} • ${u.class_name}`})),valueLabel:Ce,onInputChange:I,onSelect:u=>{I(u.label);const m=W.find(N=>N.id===Number(u.id));ke(N=>({...N,class_code:m?.class_code}))}})}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Category Code"}),s.jsx("input",{value:Oe.cat_code||"",onChange:u=>ke(m=>({...m,cat_code:u.target.value.toUpperCase().slice(0,8)})),className:"faims-field",required:!0,maxLength:8})]}),s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Category Name"}),s.jsx("input",{value:Oe.cat_name||"",onChange:u=>ke(m=>({...m,cat_name:u.target.value})),className:"faims-field",required:!0,maxLength:150})]}),s.jsx("div",{className:"col-span-2 flex items-end gap-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!Oe.is_active,onChange:u=>ke(m=>({...m,is_active:u.target.checked}))}),s.jsx("span",{className:"text-sm",children:"Active"})]})})]}),e==="type"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx(mt,{label:"Category",placeholder:"Search or select category…",options:V.filter(u=>!r||u.class_code===r.class_code).map(u=>({id:u.id,label:`${u.cat_code} • ${u.cat_name}`})),valueLabel:$e,onInputChange:Y,onSelect:u=>{Y(u.label);const m=V.find(N=>N.id===Number(u.id));te(N=>({...N,cat_code:m?.cat_code}))},required:!0})}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Type Code"}),s.jsx("input",{value:ee.type_code||"",onChange:u=>te(m=>({...m,type_code:u.target.value.toUpperCase().slice(0,20)})),className:"faims-field",required:!0,maxLength:20})]}),s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Type Name"}),s.jsx("input",{value:ee.type_name||"",onChange:u=>te(m=>({...m,type_name:u.target.value})),className:"faims-field",required:!0,maxLength:150})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Life Override (mo)"}),s.jsx("input",{type:"number",min:1,value:ee.life_months_override??"",onChange:u=>te(m=>({...m,life_months_override:u.target.value?+u.target.value:void 0})),className:"faims-field",placeholder:"inherit"})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Method Override"}),s.jsxs("select",{value:ee.depr_method_override??"",onChange:u=>te(m=>({...m,depr_method_override:u.target.value||void 0})),className:"faims-field",children:[s.jsx("option",{value:"",children:"inherit"}),Ke.map(u=>s.jsx("option",{value:u.value,children:u.label},u.value))]})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Residual % Override"}),s.jsx("input",{type:"number",min:0,max:100,step:.01,value:ee.residual_rate_override??"",onChange:u=>te(m=>({...m,residual_rate_override:u.target.value?+u.target.value:void 0})),className:"faims-field",placeholder:"inherit"})]}),s.jsx("div",{className:"col-span-2 flex items-end gap-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!ee.is_active,onChange:u=>te(m=>({...m,is_active:u.target.checked}))}),s.jsx("span",{className:"text-sm",children:"Active"})]})}),O==="edit"&&ee.cat_code&&s.jsx("div",{className:"col-span-12 text-sm text-gray-600",children:s.jsx("button",{type:"button",className:"underline",onClick:async()=>{const u=M,m=await L.get(`/assets/types/${u}/next-code`);alert(`Next code: ${m.data.code}`)},children:"Preview next asset code"})})]}),s.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[s.jsx("button",{type:"button",onClick:He,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:O==="edit"?"Update":"Submit"})]})]})]})]}),s.jsx(Ba,{open:Sr,title:$r,message:Fr,confirmText:"Yes, delete",cancelText:"Cancel",onClose:()=>st(!1),onConfirm:()=>St.current?.()}),s.jsx(Va,{open:Nr,title:jr,message:Cr,onClose:()=>_t(!1)}),s.jsx("style",{children:`
/* =========================
   FAIMS – Taxonomy Styles
   Scope: .faims-ui (safe to co-exist)
   Theme: Amber (nav/table) + Emerald (form)
   ========================= */

/* ---------- Tabs (amber) ---------- */
.faims-ui .faims-tabs .tab {
  background:#ffffff;
  color:#374151;                 /* gray-700 */
  padding:0.625rem 1.25rem;      /* px-5 py-2.5 */
  border:1px solid #e5e7eb;      /* gray-200 */
  border-bottom:none;
  border-top-left-radius:0.5rem;
  border-top-right-radius:0.5rem;
  position:relative;
  font-weight:700;
  transition:background-color .15s, color .15s, box-shadow .15s, border-color .15s;
}
.faims-ui .faims-tabs .tab:hover {
  background:#fef3c7;            /* amber-100 */
  color:#111827;                  /* gray-900 */
  box-shadow: inset 0 -3px 0 #f59e0b; /* amber-500 underline on hover */
}
.faims-ui .faims-tabs .tab.active {
  background:#ca8a04;            /* amber-600 */
  color:#ffffff;
  border-color:#ca8a04;
}
.faims-ui .faims-tabs .tab.active::after {
  content:"";
  position:absolute; left:0; right:0; bottom:-1px;
  height:4px; background:#ca8a04; /* amber-600 */
  border-top-left-radius:4px; border-top-right-radius:4px;
}

/* ---------- Table (amber) ---------- */
.faims-ui .faims-table table { border-collapse: separate; border-spacing: 0; }
.faims-ui .faims-table thead th {
  background:#fffbeb;            /* amber-50 */
  color:#1f2937;                  /* gray-800 */
}
.faims-ui .faims-table tbody tr td {
  background:#ffffff;
  transition: background-color .12s, font-weight .12s, color .12s;
}
.faims-ui .faims-table tbody tr:nth-child(even) td { 
  background:#fffbeb;            /* amber-50 */
}
.faims-ui .faims-table tbody tr:hover td { 
  background:#fef3c7;            /* amber-100 */
  font-weight:600;
  color:#111827;                  /* gray-900 */
}

/* ---------- Shadows + helpers (amber) ---------- */
.faims-ui .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1); }
.faims-ui .bg-amber-100 { background:#fef3c7; }
.faims-ui .hover:bg-amber-50:hover { background:#fffbeb; }

/* ====================================
   FORM CONTROLS (emerald emphasis)
   Apply className="faims-field" to:
   <input>, <select>, <textarea>
   ==================================== */
.faims-ui .faims-field {
  width: 100%;
  border: 1.5px solid #e5e7eb;   /* gray-200 default */
  border-radius: 0.5rem;         /* rounded-lg */
  padding: 0.5rem 0.75rem;       /* px-3 py-2 */
  background: #ffffff;
  transition: border-color .15s, box-shadow .15s, background-color .15s, color .15s;
}
.faims-ui .faims-field:hover {
  border-color: #6ee7b7;         /* emerald-300 */
}
.faims-ui .faims-field:focus {
  outline: none;
  border-color: #059669;         /* emerald-600 */
  box-shadow: 0 0 0 3px rgba(16,185,129,.25); /* emerald ring */
}

/* Read-only & Disabled visuals */
.faims-ui .faims-field[readonly] {
  background: #f3f4f6;           /* gray-100 */
  color: #6b7280;                 /* gray-500 */
  cursor: not-allowed;
}
.faims-ui .faims-field:disabled {
  background: #f3f4f6;
  color: #9ca3af;
  cursor: not-allowed;
}

/* Selects: space for caret */
.faims-ui select.faims-field { padding-right: 2.25rem; }

/* Checkboxes / radios in emerald */
.faims-ui input[type="checkbox"],
.faims-ui input[type="radio"] {
  accent-color: #059669;         /* emerald-600 */
}

/* ---------- Dialog buttons (Headless UI) ---------- */
.faims-ui .btn-primary {
  background:#047857;            /* emerald-700 */
  color:#fff;
  padding:0.5rem 1rem;           /* px-4 py-2 */
  border-radius:0.5rem;
  transition: background-color .15s;
}
.faims-ui .btn-primary:hover { background:#059669; } /* emerald-600 */

.faims-ui .btn-secondary {
  background:#e5e7eb;            /* gray-200 */
  color:#111827;
  padding:0.5rem 1rem;
  border-radius:0.5rem;
  transition: background-color .15s;
}
.faims-ui .btn-secondary:hover { background:#d1d5db; } /* gray-300 */


`})]})}export{rs as default};
