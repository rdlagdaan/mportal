import{j as e}from"./index-Cq3dN4UP.js";import{r as t}from"./handsontable-DB04mlRq.js";import{u as C,a as b}from"./useLookups-DYHQfc9Q.js";import"./react-DJG_os-6.js";function N({companyId:i,selectedClassCode:m,onClose:o}){const{data:l=[]}=C(i),[a,d]=t.useState(m??""),[n,p]=t.useState(""),[c,x]=t.useState(""),[u,g]=t.useState(!0),r=b(i,a);t.useEffect(()=>{!a&&l.length>0&&d(l[0].value)},[l,a]);function h(s){s.preventDefault(),!(!a||!n||!c)&&r.mutate({class_code:a,cat_code:n.trim(),cat_name:c.trim(),is_active:u,sort_order:0},{onSuccess:()=>o()})}return e.jsxs("form",{onSubmit:h,className:"p-4 space-y-4 min-w-[520px]",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium",children:"Class"}),e.jsx("select",{className:"w-full border rounded px-3 py-2",value:a,onChange:s=>d(s.target.value),children:l.map(s=>e.jsxs("option",{value:s.value,children:[s.value," — ",s.label]},s.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Category Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:n,onChange:s=>p(s.target.value.toUpperCase()),placeholder:"e.g. CCTV",maxLength:25})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Category Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:c,onChange:s=>x(s.target.value),placeholder:"CCTV Cameras & Recording Systems",maxLength:150})]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:s=>g(s.target.checked)}),e.jsx("span",{children:"Active"})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx("button",{type:"button",className:"px-4 py-2 rounded border",onClick:o,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded text-white bg-green-600 disabled:opacity-50",disabled:!a||!n||!c||r.isPending,children:r.isPending?"Saving…":"Submit"})]})]})}export{N as default};
