import{n as A,j as s,F as Ir,a as he}from"./index-Bt_bdq66.js";import{r as l,U as N,t as Ot,a as Hr}from"./handsontable-DB04mlRq.js";import{a as Pt}from"./csrf-RGL2mPX9.js";import{F as qr,a as Ur,b as Wr}from"./TrashIcon-Tllugt5b.js";import{r as Xr}from"./react-DJG_os-6.js";var Kr=Object.defineProperty,Br=(e,t,r)=>t in e?Kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,it=(e,t,r)=>(Br(e,typeof t!="symbol"?t+"":t,r),r);let Vr=class{constructor(){it(this,"current",this.detect()),it(this,"handoffState","pending"),it(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},ye=new Vr;function ze(e){var t,r;return ye.isServer?null:e?"ownerDocument"in e?e.ownerDocument:"current"in e?(r=(t=e.current)==null?void 0:t.ownerDocument)!=null?r:document:null:document}function Ge(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function se(){let e=[],t={addEventListener(r,n,a,o){return r.addEventListener(n,a,o),t.add(()=>r.removeEventListener(n,a,o))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Ge(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,a){let o=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:a}),this.add(()=>{Object.assign(r.style,{[n]:o})})},group(r){let n=se();return r(n),this.add(()=>n.dispose())},add(r){return e.includes(r)||e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let a of e.splice(n,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function wt(){let[e]=l.useState(se);return l.useEffect(()=>()=>e.dispose(),[e]),e}let L=(e,t)=>{ye.isServer?l.useEffect(e,t):l.useLayoutEffect(e,t)};function Ne(e){let t=l.useRef(e);return L(()=>{t.current=e},[e]),t}let F=function(e){let t=Ne(e);return N.useCallback((...r)=>t.current(...r),[t])},Yr=l.createContext(void 0);function zr(){return l.useContext(Yr)}function ht(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function ae(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ae),n}var Be=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Be||{}),de=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(de||{});function W(){let e=Zr();return l.useCallback(t=>Gr({mergeRefs:e,...t}),[e])}function Gr({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:a,visible:o=!0,name:d,mergeRefs:c}){c=c??Qr;let i=Yt(t,e);if(o)return We(i,r,n,d,c);let f=a??0;if(f&2){let{static:p=!1,...y}=i;if(p)return We(y,r,n,d,c)}if(f&1){let{unmount:p=!0,...y}=i;return ae(p?0:1,{0(){return null},1(){return We({...y,hidden:!0,style:{display:"none"}},r,n,d,c)}})}return We(i,r,n,d,c)}function We(e,t={},r,n,a){let{as:o=r,children:d,refName:c="ref",...i}=ct(e,["unmount","static"]),f=e.ref!==void 0?{[c]:e.ref}:{},p=typeof d=="function"?d(t):d;"className"in i&&i.className&&typeof i.className=="function"&&(i.className=i.className(t)),i["aria-labelledby"]&&i["aria-labelledby"]===i.id&&(i["aria-labelledby"]=void 0);let y={};if(t){let v=!1,h=[];for(let[b,j]of Object.entries(t))typeof j=="boolean"&&(v=!0),j===!0&&h.push(b.replace(/([A-Z])/g,g=>`-${g.toLowerCase()}`));if(v){y["data-headlessui-state"]=h.join(" ");for(let b of h)y[`data-${b}`]=""}}if(o===l.Fragment&&(Object.keys(ge(i)).length>0||Object.keys(ge(y)).length>0))if(!l.isValidElement(p)||Array.isArray(p)&&p.length>1){if(Object.keys(ge(i)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(ge(i)).concat(Object.keys(ge(y))).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`))}else{let v=p.props,h=v?.className,b=typeof h=="function"?(...w)=>ht(h(...w),i.className):ht(h,i.className),j=b?{className:b}:{},g=Yt(p.props,ge(ct(i,["ref"])));for(let w in y)w in g&&delete y[w];return l.cloneElement(p,Object.assign({},g,y,f,{ref:a(Jr(p),f.ref)},j))}return l.createElement(o,Object.assign({},ct(i,["ref"]),o!==l.Fragment&&f,o!==l.Fragment&&y),p)}function Zr(){let e=l.useRef([]),t=l.useCallback(r=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return e.current=r,t}}function Qr(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function Yt(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(n[a])):t[a]=n[a];if(t.disabled||t["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[a=>{var o;return(o=a?.preventDefault)==null?void 0:o.call(a)}]);for(let n in r)Object.assign(t,{[n](a,...o){let d=r[n];for(let c of d){if((a instanceof Event||a?.nativeEvent instanceof Event)&&a.defaultPrevented)return;c(a,...o)}}});return t}function D(e){var t;return Object.assign(l.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function ge(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function ct(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}function Jr(e){return N.version.split(".")[0]>="19"?e.props.ref:e.ref}let en="span";var Ve=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Ve||{});function tn(e,t){var r;let{features:n=1,...a}=e,o={ref:t,"aria-hidden":(n&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return W()({ourProps:o,theirProps:a,slot:{},defaultTag:en,name:"Hidden"})}let gt=D(tn);function zt(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function me(e){return zt(e)&&"tagName"in e}function we(e){return me(e)&&"accessKey"in e}function fe(e){return me(e)&&"tabIndex"in e}function rn(e){return me(e)&&"style"in e}function nn(e){return we(e)&&e.nodeName==="IFRAME"}function an(e){return we(e)&&e.nodeName==="INPUT"}let Gt=Symbol();function sn(e,t=!0){return Object.assign(e,{[Gt]:t})}function Q(...e){let t=l.useRef(e);l.useEffect(()=>{t.current=e},[e]);let r=F(n=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return e.every(n=>n==null||n?.[Gt])?void 0:r}let Nt=l.createContext(null);Nt.displayName="DescriptionContext";function Zt(){let e=l.useContext(Nt);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,Zt),t}return e}function ln(){let[e,t]=l.useState([]);return[e.length>0?e.join(" "):void 0,l.useMemo(()=>function(r){let n=F(o=>(t(d=>[...d,o]),()=>t(d=>{let c=d.slice(),i=c.indexOf(o);return i!==-1&&c.splice(i,1),c}))),a=l.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return N.createElement(Nt.Provider,{value:a},r.children)},[t])]}let on="p";function cn(e,t){let r=l.useId(),n=zr(),{id:a=`headlessui-description-${r}`,...o}=e,d=Zt(),c=Q(t);L(()=>d.register(a),[a,d.register]);let i=n||!1,f=l.useMemo(()=>({...d.slot,disabled:i}),[d.slot,i]),p={ref:c,...d.props,id:a};return W()({ourProps:p,theirProps:o,slot:f,defaultTag:on,name:d.name||"Description"})}let un=D(cn),dn=Object.assign(un,{});var Qt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(Qt||{});let fn=l.createContext(()=>{});function mn({value:e,children:t}){return N.createElement(fn.Provider,{value:e},t)}let Jt=class extends Map{constructor(t){super(),this.factory=t}get(t){let r=super.get(t);return r===void 0&&(r=this.factory(t),this.set(t,r)),r}};var pn=Object.defineProperty,hn=(e,t,r)=>t in e?pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,gn=(e,t,r)=>(hn(e,t+"",r),r),er=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},U=(e,t,r)=>(er(e,t,"read from private field"),r?r.call(e):t.get(e)),ut=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Rt=(e,t,r,n)=>(er(e,t,"write to private field"),t.set(e,r),r),Z,Pe,Re;let vn=class{constructor(t){ut(this,Z,{}),ut(this,Pe,new Jt(()=>new Set)),ut(this,Re,new Set),gn(this,"disposables",se()),Rt(this,Z,t)}dispose(){this.disposables.dispose()}get state(){return U(this,Z)}subscribe(t,r){let n={selector:t,callback:r,current:t(U(this,Z))};return U(this,Re).add(n),this.disposables.add(()=>{U(this,Re).delete(n)})}on(t,r){return U(this,Pe).get(t).add(r),this.disposables.add(()=>{U(this,Pe).get(t).delete(r)})}send(t){let r=this.reduce(U(this,Z),t);if(r!==U(this,Z)){Rt(this,Z,r);for(let n of U(this,Re)){let a=n.selector(U(this,Z));tr(n.current,a)||(n.current=a,n.callback(a))}for(let n of U(this,Pe).get(t.type))n(U(this,Z),t)}}};Z=new WeakMap,Pe=new WeakMap,Re=new WeakMap;function tr(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:dt(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:dt(e.entries(),t.entries()):At(e)&&At(t)?dt(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function dt(e,t){do{let r=e.next(),n=t.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function At(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var bn=Object.defineProperty,yn=(e,t,r)=>t in e?bn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Lt=(e,t,r)=>(yn(e,typeof t!="symbol"?t+"":t,r),r),xn=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(xn||{});let wn={0(e,t){let r=t.id,n=e.stack,a=e.stack.indexOf(r);if(a!==-1){let o=e.stack.slice();return o.splice(a,1),o.push(r),n=o,{...e,stack:n}}return{...e,stack:[...e.stack,r]}},1(e,t){let r=t.id,n=e.stack.indexOf(r);if(n===-1)return e;let a=e.stack.slice();return a.splice(n,1),{...e,stack:a}}},Nn=class rr extends vn{constructor(){super(...arguments),Lt(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),Lt(this,"selectors",{isTop:(t,r)=>t.stack[t.stack.length-1]===r,inStack:(t,r)=>t.stack.includes(r)})}static new(){return new rr({stack:[]})}reduce(t,r){return ae(r.type,wn,t,r)}};const nr=new Jt(()=>Nn.new());var ft={exports:{}},mt={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dt;function jn(){if(Dt)return mt;Dt=1;var e=Xr();function t(i,f){return i===f&&(i!==0||1/i===1/f)||i!==i&&f!==f}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,o=e.useEffect,d=e.useMemo,c=e.useDebugValue;return mt.useSyncExternalStoreWithSelector=function(i,f,p,y,v){var h=a(null);if(h.current===null){var b={hasValue:!1,value:null};h.current=b}else b=h.current;h=d(function(){function g(k){if(!w){if(w=!0,E=k,k=y(k),v!==void 0&&b.hasValue){var P=b.value;if(v(P,k))return _=P}return _=k}if(P=_,r(E,k))return P;var O=y(k);return v!==void 0&&v(P,O)?(E=k,P):(E=k,_=O)}var w=!1,E,_,$=p===void 0?null:p;return[function(){return g(f())},$===null?void 0:function(){return g($())}]},[f,p,y,v]);var j=n(i,h[0],h[1]);return o(function(){b.hasValue=!0,b.value=j},[j]),c(j),j},mt}var Mt;function En(){return Mt||(Mt=1,ft.exports=jn()),ft.exports}var Cn=En();function ar(e,t,r=tr){return Cn.useSyncExternalStoreWithSelector(F(n=>e.subscribe(_n,n)),F(()=>e.state),F(()=>e.state),F(t),r)}function _n(e){return e}function Me(e,t){let r=l.useId(),n=nr.get(t),[a,o]=ar(n,l.useCallback(d=>[n.selectors.isTop(d,r),n.selectors.inStack(d,r)],[n,r]));return L(()=>{if(e)return n.actions.push(r),()=>n.actions.pop(r)},[n,e,r]),e?o?a:!0:!1}let vt=new Map,Le=new Map;function It(e){var t;let r=(t=Le.get(e))!=null?t:0;return Le.set(e,r+1),r!==0?()=>Ht(e):(vt.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>Ht(e))}function Ht(e){var t;let r=(t=Le.get(e))!=null?t:1;if(r===1?Le.delete(e):Le.set(e,r-1),r!==1)return;let n=vt.get(e);n&&(n["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,vt.delete(e))}function Sn(e,{allowed:t,disallowed:r}={}){let n=Me(e,"inert-others");L(()=>{var a,o;if(!n)return;let d=se();for(let i of(a=r?.())!=null?a:[])i&&d.add(It(i));let c=(o=t?.())!=null?o:[];for(let i of c){if(!i)continue;let f=ze(i);if(!f)continue;let p=i.parentElement;for(;p&&p!==f.body;){for(let y of p.children)c.some(v=>y.contains(v))||d.add(It(y));p=p.parentElement}}return d.dispose},[n,t,r])}function $n(e,t,r){let n=Ne(a=>{let o=a.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&r()});l.useEffect(()=>{if(!e)return;let a=t===null?null:we(t)?t:t.current;if(!a)return;let o=se();if(typeof ResizeObserver<"u"){let d=new ResizeObserver(()=>n.current(a));d.observe(a),o.add(()=>d.disconnect())}if(typeof IntersectionObserver<"u"){let d=new IntersectionObserver(()=>n.current(a));d.observe(a),o.add(()=>d.disconnect())}return()=>o.dispose()},[t,n,e])}let Ye=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),kn=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var re=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(re||{}),bt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(bt||{}),Fn=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Fn||{});function Tn(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Ye)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function On(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(kn)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var sr=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(sr||{});function Pn(e,t=0){var r;return e===((r=ze(e))==null?void 0:r.body)?!1:ae(t,{0(){return e.matches(Ye)},1(){let n=e;for(;n!==null;){if(n.matches(Ye))return!0;n=n.parentElement}return!1}})}var Rn=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Rn||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ne(e){e?.focus({preventScroll:!0})}let An=["textarea","input"].join(",");function Ln(e){var t,r;return(r=(t=e?.matches)==null?void 0:t.call(e,An))!=null?r:!1}function Dn(e,t=r=>r){return e.slice().sort((r,n)=>{let a=t(r),o=t(n);if(a===null||o===null)return 0;let d=a.compareDocumentPosition(o);return d&Node.DOCUMENT_POSITION_FOLLOWING?-1:d&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function De(e,t,{sorted:r=!0,relativeTo:n=null,skipElements:a=[]}={}){let o=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,d=Array.isArray(e)?r?Dn(e):e:t&64?On(e):Tn(e);a.length>0&&d.length>1&&(d=d.filter(h=>!a.some(b=>b!=null&&"current"in b?b?.current===h:b===h))),n=n??o.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,d.indexOf(n))-1;if(t&4)return Math.max(0,d.indexOf(n))+1;if(t&8)return d.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},p=0,y=d.length,v;do{if(p>=y||p+y<=0)return 0;let h=i+p;if(t&16)h=(h+y)%y;else{if(h<0)return 3;if(h>=y)return 1}v=d[h],v?.focus(f),p+=c}while(v!==o.activeElement);return t&6&&Ln(v)&&v.select(),2}function lr(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Mn(){return/Android/gi.test(window.navigator.userAgent)}function qt(){return lr()||Mn()}function Xe(e,t,r,n){let a=Ne(r);l.useEffect(()=>{if(!e)return;function o(d){a.current(d)}return document.addEventListener(t,o,n),()=>document.removeEventListener(t,o,n)},[e,t,n])}function or(e,t,r,n){let a=Ne(r);l.useEffect(()=>{if(!e)return;function o(d){a.current(d)}return window.addEventListener(t,o,n),()=>window.removeEventListener(t,o,n)},[e,t,n])}const Ut=30;function In(e,t,r){let n=Ne(r),a=l.useCallback(function(c,i){if(c.defaultPrevented)return;let f=i(c);if(f===null||!f.getRootNode().contains(f)||!f.isConnected)return;let p=function y(v){return typeof v=="function"?y(v()):Array.isArray(v)||v instanceof Set?v:[v]}(t);for(let y of p)if(y!==null&&(y.contains(f)||c.composed&&c.composedPath().includes(y)))return;return!Pn(f,sr.Loose)&&f.tabIndex!==-1&&c.preventDefault(),n.current(c,f)},[n,t]),o=l.useRef(null);Xe(e,"pointerdown",c=>{var i,f;qt()||(o.current=((f=(i=c.composedPath)==null?void 0:i.call(c))==null?void 0:f[0])||c.target)},!0),Xe(e,"pointerup",c=>{if(qt()||!o.current)return;let i=o.current;return o.current=null,a(c,()=>i)},!0);let d=l.useRef({x:0,y:0});Xe(e,"touchstart",c=>{d.current.x=c.touches[0].clientX,d.current.y=c.touches[0].clientY},!0),Xe(e,"touchend",c=>{let i={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(i.x-d.current.x)>=Ut||Math.abs(i.y-d.current.y)>=Ut))return a(c,()=>fe(c.target)?c.target:null)},!0),or(e,"blur",c=>a(c,()=>nn(window.document.activeElement)?window.document.activeElement:null),!0)}function Ze(...e){return l.useMemo(()=>ze(...e),[...e])}function ir(e,t,r,n){let a=Ne(r);l.useEffect(()=>{e=e??window;function o(d){a.current(d)}return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)},[e,t,n])}function Hn(e){return l.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function qn(e,t){let r=e(),n=new Set;return{getSnapshot(){return r},subscribe(a){return n.add(a),()=>n.delete(a)},dispatch(a,...o){let d=t[a].call(r,...o);d&&(r=d,n.forEach(c=>c()))}}}function Un(){let e;return{before({doc:t}){var r;let n=t.documentElement,a=(r=t.defaultView)!=null?r:window;e=Math.max(0,a.innerWidth-n.clientWidth)},after({doc:t,d:r}){let n=t.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),o=Math.max(0,e-a);r.style(n,"paddingRight",`${o}px`)}}}function Wn(){return lr()?{before({doc:e,d:t,meta:r}){function n(a){return r.containers.flatMap(o=>o()).some(o=>o.contains(a))}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=se();c.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let o=(a=window.scrollY)!=null?a:window.pageYOffset,d=null;t.addEventListener(e,"click",c=>{if(fe(c.target))try{let i=c.target.closest("a");if(!i)return;let{hash:f}=new URL(i.href),p=e.querySelector(f);fe(p)&&!n(p)&&(d=p)}catch{}},!0),t.addEventListener(e,"touchstart",c=>{if(fe(c.target)&&rn(c.target))if(n(c.target)){let i=c.target;for(;i.parentElement&&n(i.parentElement);)i=i.parentElement;t.style(i,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(e,"touchmove",c=>{if(fe(c.target)){if(an(c.target))return;if(n(c.target)){let i=c.target;for(;i.parentElement&&i.dataset.headlessuiPortal!==""&&!(i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth);)i=i.parentElement;i.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),t.add(()=>{var c;let i=(c=window.scrollY)!=null?c:window.pageYOffset;o!==i&&window.scrollTo(0,o),d&&d.isConnected&&(d.scrollIntoView({block:"nearest"}),d=null)})})}}:{}}function Xn(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Kn(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let be=qn(()=>new Map,{PUSH(e,t){var r;let n=(r=this.get(e))!=null?r:{doc:e,count:0,d:se(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let n={doc:e,d:t,meta:Kn(r)},a=[Wn(),Un(),Xn()];a.forEach(({before:o})=>o?.(n)),a.forEach(({after:o})=>o?.(n))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});be.subscribe(()=>{let e=be.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let n=t.get(r.doc)==="hidden",a=r.count!==0;(a&&!n||!a&&n)&&be.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&be.dispatch("TEARDOWN",r)}});function Bn(e,t,r=()=>({containers:[]})){let n=Hn(be),a=t?n.get(t):void 0,o=a?a.count>0:!1;return L(()=>{if(!(!t||!e))return be.dispatch("PUSH",t,r),()=>be.dispatch("POP",t,r)},[e,t]),o}function Vn(e,t,r=()=>[document.body]){let n=Me(e,"scroll-lock");Bn(n,t,a=>{var o;return{containers:[...(o=a.containers)!=null?o:[],r]}})}function Yn(e=0){let[t,r]=l.useState(e),n=l.useCallback(i=>r(i),[t]),a=l.useCallback(i=>r(f=>f|i),[t]),o=l.useCallback(i=>(t&i)===i,[t]),d=l.useCallback(i=>r(f=>f&~i),[r]),c=l.useCallback(i=>r(f=>f^i),[r]);return{flags:t,setFlag:n,addFlag:a,hasFlag:o,removeFlag:d,toggleFlag:c}}var zn={},Wt,Xt;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Wt=process==null?void 0:zn)==null?void 0:Wt.NODE_ENV)==="test"&&typeof((Xt=Element?.prototype)==null?void 0:Xt.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Gn=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Gn||{});function Zn(e){let t={};for(let r in e)e[r]===!0&&(t[`data-${r}`]="");return t}function Qn(e,t,r,n){let[a,o]=l.useState(r),{hasFlag:d,addFlag:c,removeFlag:i}=Yn(e&&a?3:0),f=l.useRef(!1),p=l.useRef(!1),y=wt();return L(()=>{var v;if(e){if(r&&o(!0),!t){r&&c(3);return}return(v=n?.start)==null||v.call(n,r),Jn(t,{inFlight:f,prepare(){p.current?p.current=!1:p.current=f.current,f.current=!0,!p.current&&(r?(c(3),i(4)):(c(4),i(2)))},run(){p.current?r?(i(3),c(4)):(i(4),c(3)):r?i(1):c(1)},done(){var h;p.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(f.current=!1,i(7),r||o(!1),(h=n?.end)==null||h.call(n,r))}})}},[e,r,t,y]),e?[a,{closed:d(1),enter:d(2),leave:d(4),transition:d(2)||d(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Jn(e,{prepare:t,run:r,done:n,inFlight:a}){let o=se();return ta(e,{prepare:t,inFlight:a}),o.nextFrame(()=>{r(),o.requestAnimationFrame(()=>{o.add(ea(e,n))})}),o.dispose}function ea(e,t){var r,n;let a=se();if(!e)return a.dispose;let o=!1;a.add(()=>{o=!0});let d=(n=(r=e.getAnimations)==null?void 0:r.call(e).filter(c=>c instanceof CSSTransition))!=null?n:[];return d.length===0?(t(),a.dispose):(Promise.allSettled(d.map(c=>c.finished)).then(()=>{o||t()}),a.dispose)}function ta(e,{inFlight:t,prepare:r}){if(t!=null&&t.current){r();return}let n=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=n}function jt(e,t){let r=l.useRef([]),n=F(e);l.useEffect(()=>{let a=[...r.current];for(let[o,d]of t.entries())if(r.current[o]!==d){let c=n(t,a);return r.current=t,c}},[n,...t])}let Qe=l.createContext(null);Qe.displayName="OpenClosedContext";var B=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(B||{});function Je(){return l.useContext(Qe)}function ra({value:e,children:t}){return N.createElement(Qe.Provider,{value:e},t)}function na({children:e}){return N.createElement(Qe.Provider,{value:null},e)}function aa(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let ue=[];aa(()=>{function e(t){if(!fe(t.target)||t.target===document.body||ue[0]===t.target)return;let r=t.target;r=r.closest(Ye),ue.unshift(r??t.target),ue=ue.filter(n=>n!=null&&n.isConnected),ue.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function cr(e){let t=F(e),r=l.useRef(!1);l.useEffect(()=>(r.current=!1,()=>{r.current=!0,Ge(()=>{r.current&&t()})}),[t])}function sa(){let e=typeof document>"u";return"useSyncExternalStore"in Ot?(t=>t.useSyncExternalStore)(Ot)(()=>()=>{},()=>!1,()=>!e):!1}function Ie(){let e=sa(),[t,r]=l.useState(ye.isHandoffComplete);return t&&ye.isHandoffComplete===!1&&r(!1),l.useEffect(()=>{t!==!0&&r(!0)},[t]),l.useEffect(()=>ye.handoff(),[]),e?!1:t}let ur=l.createContext(!1);function la(){return l.useContext(ur)}function Kt(e){return N.createElement(ur.Provider,{value:e.force},e.children)}function oa(e){let t=la(),r=l.useContext(fr),[n,a]=l.useState(()=>{var o;if(!t&&r!==null)return(o=r.current)!=null?o:null;if(ye.isServer)return null;let d=e?.getElementById("headlessui-portal-root");if(d)return d;if(e===null)return null;let c=e.createElement("div");return c.setAttribute("id","headlessui-portal-root"),e.body.appendChild(c)});return l.useEffect(()=>{n!==null&&(e!=null&&e.body.contains(n)||e==null||e.body.appendChild(n))},[n,e]),l.useEffect(()=>{t||r!==null&&a(r.current)},[r,a,t]),n}let dr=l.Fragment,ia=D(function(e,t){let{ownerDocument:r=null,...n}=e,a=l.useRef(null),o=Q(sn(h=>{a.current=h}),t),d=Ze(a),c=r??d,i=oa(c),[f]=l.useState(()=>{var h;return ye.isServer?null:(h=c?.createElement("div"))!=null?h:null}),p=l.useContext(yt),y=Ie();L(()=>{!i||!f||i.contains(f)||(f.setAttribute("data-headlessui-portal",""),i.appendChild(f))},[i,f]),L(()=>{if(f&&p)return p.register(f)},[p,f]),cr(()=>{var h;!i||!f||(zt(f)&&i.contains(f)&&i.removeChild(f),i.childNodes.length<=0&&((h=i.parentElement)==null||h.removeChild(i)))});let v=W();return y?!i||!f?null:Hr.createPortal(v({ourProps:{ref:o},theirProps:n,slot:{},defaultTag:dr,name:"Portal"}),f):null});function ca(e,t){let r=Q(t),{enabled:n=!0,ownerDocument:a,...o}=e,d=W();return n?N.createElement(ia,{...o,ownerDocument:a,ref:r}):d({ourProps:{ref:r},theirProps:o,slot:{},defaultTag:dr,name:"Portal"})}let ua=l.Fragment,fr=l.createContext(null);function da(e,t){let{target:r,...n}=e,a={ref:Q(t)},o=W();return N.createElement(fr.Provider,{value:r},o({ourProps:a,theirProps:n,defaultTag:ua,name:"Popover.Group"}))}let yt=l.createContext(null);function fa(){let e=l.useContext(yt),t=l.useRef([]),r=F(o=>(t.current.push(o),e&&e.register(o),()=>n(o))),n=F(o=>{let d=t.current.indexOf(o);d!==-1&&t.current.splice(d,1),e&&e.unregister(o)}),a=l.useMemo(()=>({register:r,unregister:n,portals:t}),[r,n,t]);return[t,l.useMemo(()=>function({children:o}){return N.createElement(yt.Provider,{value:a},o)},[a])]}let ma=D(ca),mr=D(da),pa=Object.assign(ma,{Group:mr});function ha(e,t=typeof document<"u"?document.defaultView:null,r){let n=Me(e,"escape");ir(t,"keydown",a=>{n&&(a.defaultPrevented||a.key===Qt.Escape&&r(a))})}function ga(){var e;let[t]=l.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,n]=l.useState((e=t?.matches)!=null?e:!1);return L(()=>{if(!t)return;function a(o){n(o.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),r}function va({defaultContainers:e=[],portals:t,mainTreeNode:r}={}){let n=Ze(r),a=F(()=>{var o,d;let c=[];for(let i of e)i!==null&&(me(i)?c.push(i):"current"in i&&me(i.current)&&c.push(i.current));if(t!=null&&t.current)for(let i of t.current)c.push(i);for(let i of(o=n?.querySelectorAll("html > *, body > *"))!=null?o:[])i!==document.body&&i!==document.head&&me(i)&&i.id!=="headlessui-portal-root"&&(r&&(i.contains(r)||i.contains((d=r?.getRootNode())==null?void 0:d.host))||c.some(f=>i.contains(f))||c.push(i));return c});return{resolveContainers:a,contains:F(o=>a().some(d=>d.contains(o)))}}let pr=l.createContext(null);function Bt({children:e,node:t}){let[r,n]=l.useState(null),a=hr(t??r);return N.createElement(pr.Provider,{value:a},e,a===null&&N.createElement(gt,{features:Ve.Hidden,ref:o=>{var d,c;if(o){for(let i of(c=(d=ze(o))==null?void 0:d.querySelectorAll("html > *, body > *"))!=null?c:[])if(i!==document.body&&i!==document.head&&me(i)&&i!=null&&i.contains(o)){n(i);break}}}}))}function hr(e=null){var t;return(t=l.useContext(pr))!=null?t:e}function Et(){let e=l.useRef(!1);return L(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ae=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ae||{});function ba(){let e=l.useRef(0);return or(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function gr(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)me(r.current)&&t.add(r.current);return t}let ya="div";var ve=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(ve||{});function xa(e,t){let r=l.useRef(null),n=Q(r,t),{initialFocus:a,initialFocusFallback:o,containers:d,features:c=15,...i}=e;Ie()||(c=0);let f=Ze(r);Ea(c,{ownerDocument:f});let p=Ca(c,{ownerDocument:f,container:r,initialFocus:a,initialFocusFallback:o});_a(c,{ownerDocument:f,container:r,containers:d,previousActiveElement:p});let y=ba(),v=F(E=>{if(!we(r.current))return;let _=r.current;($=>$())(()=>{ae(y.current,{[Ae.Forwards]:()=>{De(_,re.First,{skipElements:[E.relatedTarget,o]})},[Ae.Backwards]:()=>{De(_,re.Last,{skipElements:[E.relatedTarget,o]})}})})}),h=Me(!!(c&2),"focus-trap#tab-lock"),b=wt(),j=l.useRef(!1),g={ref:n,onKeyDown(E){E.key=="Tab"&&(j.current=!0,b.requestAnimationFrame(()=>{j.current=!1}))},onBlur(E){if(!(c&4))return;let _=gr(d);we(r.current)&&_.add(r.current);let $=E.relatedTarget;fe($)&&$.dataset.headlessuiFocusGuard!=="true"&&(vr(_,$)||(j.current?De(r.current,ae(y.current,{[Ae.Forwards]:()=>re.Next,[Ae.Backwards]:()=>re.Previous})|re.WrapAround,{relativeTo:E.target}):fe(E.target)&&ne(E.target)))}},w=W();return N.createElement(N.Fragment,null,h&&N.createElement(gt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:Ve.Focusable}),w({ourProps:g,theirProps:i,defaultTag:ya,name:"FocusTrap"}),h&&N.createElement(gt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:Ve.Focusable}))}let wa=D(xa),Na=Object.assign(wa,{features:ve});function ja(e=!0){let t=l.useRef(ue.slice());return jt(([r],[n])=>{n===!0&&r===!1&&Ge(()=>{t.current.splice(0)}),n===!1&&r===!0&&(t.current=ue.slice())},[e,ue,t]),F(()=>{var r;return(r=t.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function Ea(e,{ownerDocument:t}){let r=!!(e&8),n=ja(r);jt(()=>{r||t?.activeElement===t?.body&&ne(n())},[r]),cr(()=>{r&&ne(n())})}function Ca(e,{ownerDocument:t,container:r,initialFocus:n,initialFocusFallback:a}){let o=l.useRef(null),d=Me(!!(e&1),"focus-trap#initial-focus"),c=Et();return jt(()=>{if(e===0)return;if(!d){a!=null&&a.current&&ne(a.current);return}let i=r.current;i&&Ge(()=>{if(!c.current)return;let f=t?.activeElement;if(n!=null&&n.current){if(n?.current===f){o.current=f;return}}else if(i.contains(f)){o.current=f;return}if(n!=null&&n.current)ne(n.current);else{if(e&16){if(De(i,re.First|re.AutoFocus)!==bt.Error)return}else if(De(i,re.First)!==bt.Error)return;if(a!=null&&a.current&&(ne(a.current),t?.activeElement===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=t?.activeElement})},[a,d,e]),o}function _a(e,{ownerDocument:t,container:r,containers:n,previousActiveElement:a}){let o=Et(),d=!!(e&4);ir(t?.defaultView,"focus",c=>{if(!d||!o.current)return;let i=gr(n);we(r.current)&&i.add(r.current);let f=a.current;if(!f)return;let p=c.target;we(p)?vr(i,p)?(a.current=p,ne(p)):(c.preventDefault(),c.stopPropagation(),ne(f)):ne(a.current)},!0)}function vr(e,t){for(let r of e)if(r.contains(t))return!0;return!1}function br(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:xr)!==l.Fragment||N.Children.count(e.children)===1}let et=l.createContext(null);et.displayName="TransitionContext";var Sa=(e=>(e.Visible="visible",e.Hidden="hidden",e))(Sa||{});function $a(){let e=l.useContext(et);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function ka(){let e=l.useContext(tt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let tt=l.createContext(null);tt.displayName="NestingContext";function rt(e){return"children"in e?rt(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function yr(e,t){let r=Ne(e),n=l.useRef([]),a=Et(),o=wt(),d=F((h,b=de.Hidden)=>{let j=n.current.findIndex(({el:g})=>g===h);j!==-1&&(ae(b,{[de.Unmount](){n.current.splice(j,1)},[de.Hidden](){n.current[j].state="hidden"}}),o.microTask(()=>{var g;!rt(n)&&a.current&&((g=r.current)==null||g.call(r))}))}),c=F(h=>{let b=n.current.find(({el:j})=>j===h);return b?b.state!=="visible"&&(b.state="visible"):n.current.push({el:h,state:"visible"}),()=>d(h,de.Unmount)}),i=l.useRef([]),f=l.useRef(Promise.resolve()),p=l.useRef({enter:[],leave:[]}),y=F((h,b,j)=>{i.current.splice(0),t&&(t.chains.current[b]=t.chains.current[b].filter(([g])=>g!==h)),t?.chains.current[b].push([h,new Promise(g=>{i.current.push(g)})]),t?.chains.current[b].push([h,new Promise(g=>{Promise.all(p.current[b].map(([w,E])=>E)).then(()=>g())})]),b==="enter"?f.current=f.current.then(()=>t?.wait.current).then(()=>j(b)):j(b)}),v=F((h,b,j)=>{Promise.all(p.current[b].splice(0).map(([g,w])=>w)).then(()=>{var g;(g=i.current.shift())==null||g()}).then(()=>j(b))});return l.useMemo(()=>({children:n,register:c,unregister:d,onStart:y,onStop:v,wait:f,chains:p}),[c,d,n,y,v,p,f])}let xr=l.Fragment,wr=Be.RenderStrategy;function Fa(e,t){var r,n;let{transition:a=!0,beforeEnter:o,afterEnter:d,beforeLeave:c,afterLeave:i,enter:f,enterFrom:p,enterTo:y,entered:v,leave:h,leaveFrom:b,leaveTo:j,...g}=e,[w,E]=l.useState(null),_=l.useRef(null),$=br(e),k=Q(...$?[_,t,E]:t===null?[]:[t]),P=(r=g.unmount)==null||r?de.Unmount:de.Hidden,{show:O,appear:je,initial:le}=$a(),[R,J]=l.useState(O?"visible":"hidden"),X=ka(),{register:T,unregister:V}=X;L(()=>T(_),[T,_]),L(()=>{if(P===de.Hidden&&_.current){if(O&&R!=="visible"){J("visible");return}return ae(R,{hidden:()=>V(_),visible:()=>T(_)})}},[R,_,T,V,O,P]);let M=Ie();L(()=>{if($&&M&&R==="visible"&&_.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[_,R,M,$]);let Ee=le&&!je,Ce=je&&O&&le,I=l.useRef(!1),q=yr(()=>{I.current||(J("hidden"),V(_))},X),_e=F(Se=>{I.current=!0;let $e=Se?"enter":"leave";q.onStart(_,$e,z=>{z==="enter"?o?.():z==="leave"&&c?.()})}),K=F(Se=>{let $e=Se?"enter":"leave";I.current=!1,q.onStop(_,$e,z=>{z==="enter"?d?.():z==="leave"&&i?.()}),$e==="leave"&&!rt(q)&&(J("hidden"),V(_))});l.useEffect(()=>{$&&a||(_e(O),K(O))},[O,$,a]);let He=!(!a||!$||!M||Ee),[,S]=Qn(He,w,O,{start:_e,end:K}),Y=ge({ref:k,className:((n=ht(g.className,Ce&&f,Ce&&p,S.enter&&f,S.enter&&S.closed&&p,S.enter&&!S.closed&&y,S.leave&&h,S.leave&&!S.closed&&b,S.leave&&S.closed&&j,!S.transition&&O&&v))==null?void 0:n.trim())||void 0,...Zn(S)}),pe=0;R==="visible"&&(pe|=B.Open),R==="hidden"&&(pe|=B.Closed),O&&R==="hidden"&&(pe|=B.Opening),!O&&R==="visible"&&(pe|=B.Closing);let at=W();return N.createElement(tt.Provider,{value:q},N.createElement(ra,{value:pe},at({ourProps:Y,theirProps:g,defaultTag:xr,features:wr,visible:R==="visible",name:"Transition.Child"})))}function Ta(e,t){let{show:r,appear:n=!1,unmount:a=!0,...o}=e,d=l.useRef(null),c=br(e),i=Q(...c?[d,t]:t===null?[]:[t]);Ie();let f=Je();if(r===void 0&&f!==null&&(r=(f&B.Open)===B.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[p,y]=l.useState(r?"visible":"hidden"),v=yr(()=>{r||y("hidden")}),[h,b]=l.useState(!0),j=l.useRef([r]);L(()=>{h!==!1&&j.current[j.current.length-1]!==r&&(j.current.push(r),b(!1))},[j,r]);let g=l.useMemo(()=>({show:r,appear:n,initial:h}),[r,n,h]);L(()=>{r?y("visible"):!rt(v)&&d.current!==null&&y("hidden")},[r,v]);let w={unmount:a},E=F(()=>{var k;h&&b(!1),(k=e.beforeEnter)==null||k.call(e)}),_=F(()=>{var k;h&&b(!1),(k=e.beforeLeave)==null||k.call(e)}),$=W();return N.createElement(tt.Provider,{value:v},N.createElement(et.Provider,{value:g},$({ourProps:{...w,as:l.Fragment,children:N.createElement(Nr,{ref:i,...w,...o,beforeEnter:E,beforeLeave:_})},theirProps:{},defaultTag:l.Fragment,features:wr,visible:p==="visible",name:"Transition"})))}function Oa(e,t){let r=l.useContext(et)!==null,n=Je()!==null;return N.createElement(N.Fragment,null,!r&&n?N.createElement(xt,{ref:t,...e}):N.createElement(Nr,{ref:t,...e}))}let xt=D(Ta),Nr=D(Fa),Ct=D(Oa),xe=Object.assign(xt,{Child:Ct,Root:xt});var Pa=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Pa||{}),Ra=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Ra||{});let Aa={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},_t=l.createContext(null);_t.displayName="DialogContext";function nt(e){let t=l.useContext(_t);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,nt),r}return t}function La(e,t){return ae(t.type,Aa,e,t)}let Vt=D(function(e,t){let r=l.useId(),{id:n=`headlessui-dialog-${r}`,open:a,onClose:o,initialFocus:d,role:c="dialog",autoFocus:i=!0,__demoMode:f=!1,unmount:p=!1,...y}=e,v=l.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(v.current||(v.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let h=Je();a===void 0&&h!==null&&(a=(h&B.Open)===B.Open);let b=l.useRef(null),j=Q(b,t),g=Ze(b),w=a?0:1,[E,_]=l.useReducer(La,{titleId:null,descriptionId:null,panelRef:l.createRef()}),$=F(()=>o(!1)),k=F(S=>_({type:0,id:S})),P=Ie()?w===0:!1,[O,je]=fa(),le={get current(){var S;return(S=E.panelRef.current)!=null?S:b.current}},R=hr(),{resolveContainers:J}=va({mainTreeNode:R,portals:O,defaultContainers:[le]}),X=h!==null?(h&B.Closing)===B.Closing:!1;Sn(f||X?!1:P,{allowed:F(()=>{var S,Y;return[(Y=(S=b.current)==null?void 0:S.closest("[data-headlessui-portal]"))!=null?Y:null]}),disallowed:F(()=>{var S;return[(S=R?.closest("body > *:not(#headlessui-portal-root)"))!=null?S:null]})});let T=nr.get(null);L(()=>{if(P)return T.actions.push(n),()=>T.actions.pop(n)},[T,n,P]);let V=ar(T,l.useCallback(S=>T.selectors.isTop(S,n),[T,n]));In(V,J,S=>{S.preventDefault(),$()}),ha(V,g?.defaultView,S=>{S.preventDefault(),S.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),$()}),Vn(f||X?!1:P,g,J),$n(P,b,$);let[M,Ee]=ln(),Ce=l.useMemo(()=>[{dialogState:w,close:$,setTitleId:k,unmount:p},E],[w,E,$,k,p]),I=l.useMemo(()=>({open:w===0}),[w]),q={ref:j,id:n,role:c,tabIndex:-1,"aria-modal":f?void 0:w===0?!0:void 0,"aria-labelledby":E.titleId,"aria-describedby":M,unmount:p},_e=!ga(),K=ve.None;P&&!f&&(K|=ve.RestoreFocus,K|=ve.TabLock,i&&(K|=ve.AutoFocus),_e&&(K|=ve.InitialFocus));let He=W();return N.createElement(na,null,N.createElement(Kt,{force:!0},N.createElement(pa,null,N.createElement(_t.Provider,{value:Ce},N.createElement(mr,{target:b},N.createElement(Kt,{force:!1},N.createElement(Ee,{slot:I},N.createElement(je,null,N.createElement(Na,{initialFocus:d,initialFocusFallback:b,containers:J,features:K},N.createElement(mn,{value:$},He({ourProps:q,theirProps:y,slot:I,defaultTag:Da,features:Ma,visible:w===0,name:"Dialog"})))))))))))}),Da="div",Ma=Be.RenderStrategy|Be.Static;function Ia(e,t){let{transition:r=!1,open:n,...a}=e,o=Je(),d=e.hasOwnProperty("open")||o!==null,c=e.hasOwnProperty("onClose");if(!d&&!c)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!d)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!c)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(n!==void 0||r)&&!a.static?N.createElement(Bt,null,N.createElement(xe,{show:n,transition:r,unmount:a.unmount},N.createElement(Vt,{ref:t,...a}))):N.createElement(Bt,null,N.createElement(Vt,{ref:t,open:n,...a}))}let Ha="div";function qa(e,t){let r=l.useId(),{id:n=`headlessui-dialog-panel-${r}`,transition:a=!1,...o}=e,[{dialogState:d,unmount:c},i]=nt("Dialog.Panel"),f=Q(t,i.panelRef),p=l.useMemo(()=>({open:d===0}),[d]),y=F(g=>{g.stopPropagation()}),v={ref:f,id:n,onClick:y},h=a?Ct:l.Fragment,b=a?{unmount:c}:{},j=W();return N.createElement(h,{...b},j({ourProps:v,theirProps:o,slot:p,defaultTag:Ha,name:"Dialog.Panel"}))}let Ua="div";function Wa(e,t){let{transition:r=!1,...n}=e,[{dialogState:a,unmount:o}]=nt("Dialog.Backdrop"),d=l.useMemo(()=>({open:a===0}),[a]),c={ref:t,"aria-hidden":!0},i=r?Ct:l.Fragment,f=r?{unmount:o}:{},p=W();return N.createElement(i,{...f},p({ourProps:c,theirProps:n,slot:d,defaultTag:Ua,name:"Dialog.Backdrop"}))}let Xa="h2";function Ka(e,t){let r=l.useId(),{id:n=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:o,setTitleId:d}]=nt("Dialog.Title"),c=Q(t);l.useEffect(()=>(d(n),()=>d(null)),[n,d]);let i=l.useMemo(()=>({open:o===0}),[o]),f={ref:c,id:n};return W()({ourProps:f,theirProps:a,slot:i,defaultTag:Xa,name:"Dialog.Title"})}let Ba=D(Ia),Va=D(qa);D(Wa);let Ya=D(Ka),Te=Object.assign(Ba,{Panel:Va,Title:Ya,Description:dn});const Ke=[{value:"straight_line",label:"Straight Line"},{value:"declining_balance",label:"Declining Balance"},{value:"units_of_production",label:"Units of Production"},{value:"none",label:"None"}];function pt({label:e,placeholder:t="Search…",options:r,valueLabel:n,onInputChange:a,onSelect:o,required:d,readOnly:c=!1}){const[i,f]=l.useState(!1),[p,y]=l.useState(0),v=l.useRef(null),h=l.useRef(null),j=l.useMemo(()=>{const g=new Set,w=[];for(const E of r||[]){const _=`${String(E.id)}::${E.label}`;g.has(_)||(g.add(_),w.push(E))}return w},[r]).filter(g=>g.label.toLowerCase().includes((n||"").toLowerCase()));return l.useEffect(()=>{v.current?.focus()},[i,n]),l.useEffect(()=>{const g=w=>{h.current?.contains(w.target)||f(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),l.useEffect(()=>{const g=()=>f(!1);return window.addEventListener("faims-close-combos",g),()=>window.removeEventListener("faims-close-combos",g)},[]),s.jsxs("div",{className:"relative",ref:h,children:[s.jsx("label",{className:"block text-sm mb-1",children:e}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:v,className:`faims-field pr-9 ${c?"bg-gray-100 cursor-not-allowed":""}`,placeholder:t,value:n,readOnly:c,onFocus:()=>f(!0),onChange:g=>{a(g.target.value),f(!0),y(0)},onKeyDown:g=>{if(!c)if(i||f(!0),g.key==="ArrowDown")g.preventDefault(),y(w=>Math.min(w+1,Math.max(j.length-1,0)));else if(g.key==="ArrowUp")g.preventDefault(),y(w=>Math.max(w-1,0));else if(g.key==="Enter"){g.preventDefault();const w=j[p];w&&(o(w),f(!1),requestAnimationFrame(()=>v.current?.focus()))}else g.key==="Escape"&&(f(!1),requestAnimationFrame(()=>v.current?.focus()))},required:d}),s.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onMouseDown:g=>{c||(g.preventDefault(),f(w=>!w),requestAnimationFrame(()=>v.current?.focus()))},"aria-label":"Toggle options",children:"▼"})]}),i&&s.jsx("ul",{className:"absolute z-50 mt-1 max-h-56 w-full overflow-auto rounded-md border bg-white shadow-lg",children:j.length?j.map((g,w)=>s.jsx("li",{className:`px-3 py-2 cursor-pointer ${w===p?"bg-amber-100 font-semibold":"hover:bg-amber-50"}`,onMouseDown:E=>{E.preventDefault(),o(g),f(!1),requestAnimationFrame(()=>v.current?.focus())},children:g.label},`${g.id}-${g.label}`)):s.jsx("li",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches"})}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type to search; pick an item to bind."})]})}function za({open:e,title:t,message:r,confirmText:n="Delete",cancelText:a="Cancel",onClose:o,onConfirm:d}){return s.jsx(xe,{appear:!0,show:e,as:l.Fragment,children:s.jsxs(Te,{as:"div",className:"relative z-[100]",onClose:o,children:[s.jsx(xe.Child,{as:l.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black/40"})}),s.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsx(xe.Child,{as:l.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsxs(Te.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl",children:[s.jsx(Te.Title,{className:"text-lg font-semibold text-gray-900",children:t}),s.jsx("div",{className:"mt-2 text-sm text-gray-700",children:r}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",onClick:o,children:a}),s.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-500",onClick:d,children:n})]})]})})})})]})})}function Ga({open:e,title:t="Notice",message:r,onClose:n}){return s.jsx(xe,{appear:!0,show:e,as:l.Fragment,children:s.jsxs(Te,{as:"div",className:"relative z-[100]",onClose:n,children:[s.jsx(xe.Child,{as:l.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black/40"})}),s.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:s.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:s.jsx(xe.Child,{as:l.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-150",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsxs(Te.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 shadow-xl",children:[s.jsx(Te.Title,{className:"text-lg font-semibold text-gray-900",children:t}),s.jsx("div",{className:"mt-2 text-sm text-gray-700",children:r}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{type:"button",className:"px-4 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-500",onClick:n,children:"OK"})})]})})})})]})})}function ss(){const[e,t]=l.useState("class"),[r,n]=l.useState(null),[a,o]=l.useState(null),[d,c]=l.useState(!1),[i,f]=l.useState(10),[p,y]=l.useState(1),[v,h]=l.useState(1),[b,j]=l.useState(""),[g,w]=l.useState(""),[E,_]=l.useState("code"),$=l.useRef(null),[k,P]=l.useState([]),[O,je]=l.useState([]),[le,R]=l.useState([]),[J,X]=l.useState(!1),[T,V]=l.useState("add"),[M,Ee]=l.useState(null),[Ce,I]=l.useState(""),[q,_e]=l.useState([]),K=l.useMemo(()=>{const u=new Set;return q.filter(m=>{const x=m.class_code?.trim();return!x||u.has(x)?!1:(u.add(x),!0)})},[q]);l.useEffect(()=>{const u=q.map(m=>m.class_code);console.log("[Taxonomy] classOptions total:",q.length,"unique:",new Set(u).size)},[q]);const[He,S]=l.useState(""),[Y,pe]=l.useState([]),[at,Se]=l.useState(""),[$e,z]=l.useState(""),jr=u=>u.toUpperCase().replace(/[^A-Z0-9-]/g,""),[oe,ie]=l.useState({class_code:"",class_name:"",default_life_months:60,default_depr_method:"straight_line",residual_rate:0,is_active:!0,sort_order:0}),[Oe,ke]=l.useState({class_code:void 0,cat_code:"",cat_name:"",is_active:!0,sort_order:0}),[ee,te]=l.useState({cat_code:void 0,type_code:"",type_name:"",life_months_override:void 0,depr_method_override:void 0,residual_rate_override:void 0,is_active:!0,sort_order:0}),[Er,St]=l.useState(!1),[Cr,_r]=l.useState("Notice"),[Sr,$r]=l.useState(""),[kr,st]=l.useState(!1),[Fr,Tr]=l.useState("Are you sure?"),[Or,Pr]=l.useState(""),$t=l.useRef(null),[lt,kt]=l.useState(!1);async function Rr(u){return u?((await A.get("/assets/types",{params:{per_page:1,page:1,cat_code:u}})).data.data?.length??0)>0:!1}function qe(u,m="Notice"){_r(m),$r(u),St(!0)}l.useEffect(()=>{(async()=>{try{const m=await A.get("/settings/paginaterecs");f(Number(m.data?.value)||10)}catch{}await Promise.all([ce(1,e,g),ot(),Ft()])})()},[]),l.useEffect(()=>($.current&&clearTimeout($.current),$.current=setTimeout(()=>w(b),300),()=>{$.current&&clearTimeout($.current)}),[b]),l.useEffect(()=>{ce(1,e,g)},[g,e,E,r?.id,a?.id]);async function ce(u=1,m=e,x=""){c(!0);try{if(m==="class"){const C=await A.get("/assets/classes",{params:{per_page:i,page:u,q:x,order:E==="recent"?"recent":"class_code"}});P(C.data.data),y(C.data.current_page),h(C.data.last_page)}else if(m==="category"){const C=await A.get("/assets/categories",{params:{per_page:i,page:u,q:x,order:E==="recent"?"recent":"cat_code",class_code:r?.class_code||void 0}});je(C.data.data),y(C.data.current_page),h(C.data.last_page)}else{const C=await A.get("/assets/types",{params:{per_page:i,page:u,q:x,order:E==="recent"?"recent":"type_code",cat_code:a?.cat_code||void 0}});R(C.data.data),y(C.data.current_page),h(C.data.last_page)}}finally{c(!1)}}async function ot(){let m=1,x=1;const C=[];for(;;){const G=await A.get("/assets/classes",{params:{per_page:200,page:m,order:"class_code"}});if(C.push(...G.data.data??[]),x=G.data.last_page??1,m>=x)break;m++}const H=new Map;for(const G of C)H.has(G.class_code)||H.set(G.class_code,G);const Fe=Array.from(H.values());return _e(Fe),Fe}async function Ft(){const u=await A.get("/assets/categories",{params:{per_page:1e3,page:1,order:"cat_code"}});let m=u.data.data??[];const x=u.data.last_page??1;for(let C=2;C<=x;C++){const H=await A.get("/assets/categories",{params:{per_page:100,page:C,order:"cat_code"}});m=m.concat(H.data.data??[])}return pe(m),m}async function Ar(){if(window.dispatchEvent(new Event("faims-close-combos")),V("add"),Ee(null),e==="class"&&ie({class_code:"",class_name:"",default_life_months:60,default_depr_method:"straight_line",residual_rate:0,is_active:!0,sort_order:0}),e==="category"&&(await ot(),ke({class_code:r?.class_code,cat_code:"",cat_name:"",is_active:!0,sort_order:0}),kt(!1),I(r?`${r.class_code} • ${r.class_name}`:"")),e==="type"){te({cat_code:a?.cat_code,type_code:"",type_name:"",is_active:!0,sort_order:0});const u=a?`${a.cat_code} • ${a.cat_name}`:"";z(u)}X(!0)}async function Lr(u){if(window.dispatchEvent(new Event("faims-close-combos")),V("edit"),Ee(u.id),e==="class"){ie(u),X(!0);return}if(e==="category"){const m=u;ke(m);const x=k.find(H=>H.class_code===m.class_code);I(x?`${x.class_code} • ${x.class_name}`:"");const C=await Rr(m.cat_code);kt(C),X(!0);return}if(e==="type"){const m=u;te(m);const x=Y.find(C=>C.cat_code===m.cat_code);z(x?`${x.cat_code} • ${x.cat_name}`:""),X(!0);return}}function Ue(){X(!1)}async function Dr(u){u.preventDefault(),await Pt("lrwsis");try{if(e==="class"){const m=oe;T==="edit"&&M?await A.patch(`/assets/classes/${M}`,m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0}):await A.post("/assets/classes",m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0});const x=await ot();I("");const C=x.find(H=>H.class_code===(oe.class_code||""));C&&(n(C),I(`${C.class_code} • ${C.class_name}`))}else if(e==="category"){const m={...Oe,class_code:Oe.class_code??r?.class_code};if(!m.class_code){alert("Select a Class first.");return}T==="edit"&&M?await A.patch(`/assets/categories/${M}`,m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0}):await A.post("/assets/categories",m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0}),await Ft()}else{const m={...ee,cat_code:ee.cat_code??a?.cat_code};if(!m.cat_code){alert("Select a Category first.");return}T==="edit"&&M?await A.patch(`/assets/types/${M}`,m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0}):await A.post("/assets/types",m,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0})}Ue(),await ce(p)}catch(m){const x=m?.response?.data?.message||"Save failed";qe(x,"Validation Error")}}async function Mr(u){const m=e==="class"?k.find(C=>C.id===u):e==="category"?O.find(C=>C.id===u):le.find(C=>C.id===u),x=e==="class"?`${m?.class_code} • ${m?.class_name}`:e==="category"?`${m?.cat_code} • ${m?.cat_name}`:`${m?.type_code} • ${m?.type_name}`;Tr("Confirm Deletion"),Pr(`You are about to delete “${x}”. This action cannot be undone.`),st(!0),$t.current=async()=>{st(!1),await Pt("lrwsis");const C={class:"/assets/classes",category:"/assets/categories",type:"/assets/types"};try{await A.delete(`${C[e]}/${u}`,{headers:{"X-XSRF-TOKEN":he.get("XSRF-TOKEN")||""},withCredentials:!0});const Fe=(e==="class"?k.length:e==="category"?O.length:le.length)===1&&p>1?p-1:p;await ce(Fe),qe(`“${x}” has been deleted.`,"Deleted")}catch(H){const Fe=H?.response?.status,G=H?.response?.data?.message;Fe===409&&G?qe(G,"Blocked"):qe(G||"Delete failed","Error")}}}const Tt=e==="class"?k:e==="category"?O:le;return s.jsxs("div",{className:"p-6 bg-gray-50 min-h-full faims-ui",children:[s.jsx("nav",{className:"mb-4 faims-tabs border-b border-gray-200",children:s.jsx("ul",{className:"flex gap-2",children:["class","category","type"].map(u=>{const m=u==="class"?"Class (Group)":u==="category"?"Category (Sub-Group)":"Type",x=e===u;return s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>t(u),className:`tab ${x?"active":""}`,children:m})},u)})})}),s.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[s.jsxs("button",{onClick:Ar,className:"inline-flex items-center gap-2 bg-green-700 text-white px-4 py-2 rounded hover:bg-green-600",children:[s.jsx(qr,{className:"h-5 w-5"})," Add New"]}),s.jsx("input",{className:"w-96 border rounded px-3 py-2",placeholder:"Search…",value:b,onChange:u=>j(u.target.value)}),s.jsxs("select",{className:"border rounded px-2 py-2",value:E,onChange:u=>_(u.target.value),children:[s.jsx("option",{value:"code",children:"Sort: Code"}),s.jsx("option",{value:"name",children:"Sort: Name"}),s.jsx("option",{value:"recent",children:"Sort: Recent"}),s.jsx("option",{value:"sort",children:"Sort: Manual"})]}),e!=="class"&&s.jsxs("select",{className:"border rounded px-2 py-2",value:r?.id??"",onChange:async u=>{const m=Number(u.target.value||0),x=k.find(C=>C.id===m)||null;n(x),o(null)},children:[s.jsx("option",{value:"",children:"Select Class…"}),k.map(u=>s.jsxs("option",{value:u.id,children:[u.class_code," • ",u.class_name]},u.id))]}),e==="type"&&s.jsx("div",{className:"col-span-4",children:s.jsx(pt,{label:"Category",placeholder:"Search or select…",options:Y.filter(u=>!r||u.class_code===r.class_code).map(u=>({id:u.id,label:`${u.cat_code} • ${u.cat_name}`})),valueLabel:at,onInputChange:Se,onSelect:u=>{Se(u.label);const m=Y.find(x=>x.id===Number(u.id))||null;o(m)},required:!1})})]}),d&&s.jsx("div",{className:"flex justify-center my-6",children:s.jsx("div",{className:"w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),!d&&s.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:s.jsxs("table",{className:"w-full text-left",children:[s.jsxs("thead",{className:"bg-amber-50 text-gray-800",children:[e==="class"&&s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"#"}),s.jsx("th",{className:"p-2",children:"Code"}),s.jsx("th",{className:"p-2",children:"Name"}),s.jsx("th",{className:"p-2",children:"Life"}),s.jsx("th",{className:"p-2",children:"Method"}),s.jsx("th",{className:"p-2",children:"Residual%"}),s.jsx("th",{className:"p-2",children:"Active"}),s.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]}),e==="category"&&s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"#"}),s.jsx("th",{className:"p-2",children:"Class"}),s.jsx("th",{className:"p-2",children:"Code"}),s.jsx("th",{className:"p-2",children:"Name"}),s.jsx("th",{className:"p-2",children:"Active"}),s.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]}),e==="type"&&s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"#"}),s.jsx("th",{className:"p-2",children:"Category"}),s.jsx("th",{className:"p-2",children:"Code"}),s.jsx("th",{className:"p-2",children:"Name"}),s.jsx("th",{className:"p-2",children:"Life⚑"}),s.jsx("th",{className:"p-2",children:"Method⚑"}),s.jsx("th",{className:"p-2",children:"Residual⚑"}),s.jsx("th",{className:"p-2",children:"Active"}),s.jsx("th",{className:"p-2 w-28 text-center",children:"Actions"})]})]}),s.jsxs("tbody",{children:[Tt.map((u,m)=>s.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[s.jsx("td",{className:"p-2",children:(p-1)*i+m+1}),e==="class"&&s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"p-2",children:u.class_code}),s.jsx("td",{className:"p-2",children:u.class_name}),s.jsx("td",{className:"p-2",children:u.default_life_months}),s.jsx("td",{className:"p-2",children:Ke.find(x=>x.value===u.default_depr_method)?.label}),s.jsx("td",{className:"p-2",children:u.residual_rate}),s.jsx("td",{className:"p-2",children:u.is_active?"Yes":"No"})]}),e==="category"&&s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"p-2",children:u.class_code}),s.jsx("td",{className:"p-2",children:u.cat_code}),s.jsx("td",{className:"p-2",children:u.cat_name}),s.jsx("td",{className:"p-2",children:u.is_active?"Yes":"No"})]}),e==="type"&&s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"p-2",children:u.cat_code}),s.jsx("td",{className:"p-2",children:u.type_code}),s.jsx("td",{className:"p-2",children:u.type_name}),s.jsx("td",{className:"p-2",children:u.life_months_override??"—"}),s.jsx("td",{className:"p-2",children:u.depr_method_override?Ke.find(x=>x.value===u.depr_method_override)?.label:"—"}),s.jsx("td",{className:"p-2",children:u.residual_rate_override??"—"}),s.jsx("td",{className:"p-2",children:u.is_active?"Yes":"No"})]}),s.jsx("td",{className:"p-2",children:s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>Lr(u),title:"Edit",children:s.jsx(Ur,{className:"h-5 w-5"})}),s.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>Mr(u.id),title:"Delete",children:s.jsx(Wr,{className:"h-5 w-5"})})]})})]},u.id)),Tt.length===0&&s.jsx("tr",{children:s.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:9,children:"No records found"})})]})]})}),s.jsxs("div",{className:"flex justify-between mt-4 text-sm text-gray-700",children:[s.jsx("button",{onClick:()=>ce(1),disabled:p===1,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"First"}),s.jsx("button",{onClick:()=>ce(p-1),disabled:p===1,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Previous"}),s.jsxs("span",{className:"self-center",children:["Page ",p," of ",v]}),s.jsx("button",{onClick:()=>ce(p+1),disabled:p===v,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Next"}),s.jsx("button",{onClick:()=>ce(v),disabled:p===v,className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 disabled:opacity-50",children:"Last"})]}),J&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:Ue}),s.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsx("h3",{className:"text-lg font-semibold",children:T==="edit"?e==="class"?"Edit Class":e==="category"?"Edit Category":"Edit Type":e==="class"?"Add Class":e==="category"?"Add Category":"Add Type"}),s.jsx("button",{onClick:Ue,className:"p-1 rounded hover:bg-gray-100",children:s.jsx(Ir,{className:"h-6 w-6 text-gray-600"})})]}),s.jsxs("form",{onSubmit:Dr,className:"p-6 grid grid-cols-12 gap-4",children:[e==="class"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Class Code"}),s.jsx("input",{value:oe.class_code||"",onChange:u=>ie(m=>({...m,class_code:jr(u.target.value).slice(0,8)})),pattern:"[A-Z0-9\\-]{1,25}",title:'Use letters A–Z, digits 0–9 and "-" only',className:`faims-field ${T==="edit"?"cursor-not-allowed":""}`,required:!0,readOnly:T==="edit",maxLength:8})]}),s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Class Name"}),s.jsx("input",{value:oe.class_name||"",onChange:u=>ie(m=>({...m,class_name:u.target.value})),className:"faims-field",required:!0,maxLength:150})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Life (mo)"}),s.jsx("input",{type:"number",min:1,value:oe.default_life_months??60,onChange:u=>ie(m=>({...m,default_life_months:+u.target.value})),className:"faims-field",required:!0})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Method"}),s.jsx("select",{value:oe.default_depr_method||"straight_line",onChange:u=>ie(m=>({...m,default_depr_method:u.target.value})),className:"faims-field",required:!0,children:Ke.map(u=>s.jsx("option",{value:u.value,children:u.label},u.value))})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Residual %"}),s.jsx("input",{type:"number",min:0,max:100,step:.01,value:oe.residual_rate??0,onChange:u=>ie(m=>({...m,residual_rate:+u.target.value})),className:"faims-field",required:!0})]}),s.jsx("div",{className:"col-span-2 flex items-end gap-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!oe.is_active,onChange:u=>ie(m=>({...m,is_active:u.target.checked}))}),s.jsx("span",{className:"text-sm",children:"Active"})]})})]}),e==="category"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx(pt,{label:"Class",placeholder:"Search or select class…",required:!0,readOnly:T==="edit"&&lt,options:K.map(u=>({id:u.id,label:`${u.class_code} • ${u.class_name}`})),valueLabel:Ce,onInputChange:I,onSelect:u=>{if(T==="edit"&&lt)return;I(u.label);const m=K.find(x=>x.id===Number(u.id));ke(x=>({...x,class_code:m?.class_code}))}})}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Category Code"}),s.jsx("input",{value:Oe.cat_code||"",onChange:u=>ke(m=>({...m,cat_code:u.target.value.toUpperCase().slice(0,8)})),className:"faims-field",required:!0,maxLength:8,readOnly:T==="edit"&&lt})]}),s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Category Name"}),s.jsx("input",{value:Oe.cat_name||"",onChange:u=>ke(m=>({...m,cat_name:u.target.value})),className:"faims-field",required:!0,maxLength:150})]}),s.jsx("div",{className:"col-span-2 flex items-end gap-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!Oe.is_active,onChange:u=>ke(m=>({...m,is_active:u.target.checked}))}),s.jsx("span",{className:"text-sm",children:"Active"})]})})]}),e==="type"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx(pt,{label:"Category",placeholder:"Search or select category…",options:Y.filter(u=>!r||u.class_code===r.class_code).map(u=>({id:u.id,label:`${u.cat_code} • ${u.cat_name}`})),valueLabel:$e,onInputChange:z,onSelect:u=>{z(u.label);const m=Y.find(x=>x.id===Number(u.id));te(x=>({...x,cat_code:m?.cat_code}))},required:!0})}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Type Code"}),s.jsx("input",{value:ee.type_code||"",onChange:u=>te(m=>({...m,type_code:u.target.value.toUpperCase().slice(0,20)})),className:"faims-field",required:!0,maxLength:20})]}),s.jsxs("div",{className:"col-span-5",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Type Name"}),s.jsx("input",{value:ee.type_name||"",onChange:u=>te(m=>({...m,type_name:u.target.value})),className:"faims-field",required:!0,maxLength:150})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Life Override (mo)"}),s.jsx("input",{type:"number",min:1,value:ee.life_months_override??"",onChange:u=>te(m=>({...m,life_months_override:u.target.value?+u.target.value:void 0})),className:"faims-field",placeholder:"inherit"})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Method Override"}),s.jsxs("select",{value:ee.depr_method_override??"",onChange:u=>te(m=>({...m,depr_method_override:u.target.value||void 0})),className:"faims-field",children:[s.jsx("option",{value:"",children:"inherit"}),Ke.map(u=>s.jsx("option",{value:u.value,children:u.label},u.value))]})]}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-sm mb-1",children:"Residual % Override"}),s.jsx("input",{type:"number",min:0,max:100,step:.01,value:ee.residual_rate_override??"",onChange:u=>te(m=>({...m,residual_rate_override:u.target.value?+u.target.value:void 0})),className:"faims-field",placeholder:"inherit"})]}),s.jsx("div",{className:"col-span-2 flex items-end gap-2",children:s.jsxs("label",{className:"inline-flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:!!ee.is_active,onChange:u=>te(m=>({...m,is_active:u.target.checked}))}),s.jsx("span",{className:"text-sm",children:"Active"})]})}),T==="edit"&&ee.cat_code&&s.jsx("div",{className:"col-span-12 text-sm text-gray-600",children:s.jsx("button",{type:"button",className:"underline",onClick:async()=>{const u=M,m=await A.get(`/assets/types/${u}/next-code`);alert(`Next code: ${m.data.code}`)},children:"Preview next asset code"})})]}),s.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[s.jsx("button",{type:"button",onClick:Ue,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:T==="edit"?"Update":"Submit"})]})]})]})]}),s.jsx(za,{open:kr,title:Fr,message:Or,confirmText:"Yes, delete",cancelText:"Cancel",onClose:()=>st(!1),onConfirm:()=>$t.current?.()}),s.jsx(Ga,{open:Er,title:Cr,message:Sr,onClose:()=>St(!1)}),s.jsx("style",{children:`
/* =========================
   FAIMS – Taxonomy Styles
   Scope: .faims-ui (safe to co-exist)
   Theme: Amber (nav/table) + Emerald (form)
   ========================= */

/* ---------- Tabs (amber) ---------- */
.faims-ui .faims-tabs .tab {
  background:#ffffff;
  color:#374151;                 /* gray-700 */
  padding:0.625rem 1.25rem;      /* px-5 py-2.5 */
  border:1px solid #e5e7eb;      /* gray-200 */
  border-bottom:none;
  border-top-left-radius:0.5rem;
  border-top-right-radius:0.5rem;
  position:relative;
  font-weight:700;
  transition:background-color .15s, color .15s, box-shadow .15s, border-color .15s;
}
.faims-ui .faims-tabs .tab:hover {
  background:#fef3c7;            /* amber-100 */
  color:#111827;                  /* gray-900 */
  box-shadow: inset 0 -3px 0 #f59e0b; /* amber-500 underline on hover */
}
.faims-ui .faims-tabs .tab.active {
  background:#ca8a04;            /* amber-600 */
  color:#ffffff;
  border-color:#ca8a04;
}
.faims-ui .faims-tabs .tab.active::after {
  content:"";
  position:absolute; left:0; right:0; bottom:-1px;
  height:4px; background:#ca8a04; /* amber-600 */
  border-top-left-radius:4px; border-top-right-radius:4px;
}

/* ---------- Table (amber) ---------- */
.faims-ui .faims-table table { border-collapse: separate; border-spacing: 0; }
.faims-ui .faims-table thead th {
  background:#fffbeb;            /* amber-50 */
  color:#1f2937;                  /* gray-800 */
}
.faims-ui .faims-table tbody tr td {
  background:#ffffff;
  transition: background-color .12s, font-weight .12s, color .12s;
}
.faims-ui .faims-table tbody tr:nth-child(even) td { 
  background:#fffbeb;            /* amber-50 */
}
.faims-ui .faims-table tbody tr:hover td { 
  background:#fef3c7;            /* amber-100 */
  font-weight:600;
  color:#111827;                  /* gray-900 */
}

/* ---------- Shadows + helpers (amber) ---------- */
.faims-ui .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1); }
.faims-ui .bg-amber-100 { background:#fef3c7; }
.faims-ui .hover:bg-amber-50:hover { background:#fffbeb; }

/* ====================================
   FORM CONTROLS (emerald emphasis)
   Apply className="faims-field" to:
   <input>, <select>, <textarea>
   ==================================== */
.faims-ui .faims-field {
  width: 100%;
  border: 1.5px solid #e5e7eb;   /* gray-200 default */
  border-radius: 0.5rem;         /* rounded-lg */
  padding: 0.5rem 0.75rem;       /* px-3 py-2 */
  background: #ffffff;
  transition: border-color .15s, box-shadow .15s, background-color .15s, color .15s;
}
.faims-ui .faims-field:hover {
  border-color: #6ee7b7;         /* emerald-300 */
}
.faims-ui .faims-field:focus {
  outline: none;
  border-color: #059669;         /* emerald-600 */
  box-shadow: 0 0 0 3px rgba(16,185,129,.25); /* emerald ring */
}

/* Read-only & Disabled visuals */
.faims-ui .faims-field[readonly] {
  background: #f3f4f6;           /* gray-100 */
  color: #6b7280;                 /* gray-500 */
  cursor: not-allowed;
}
.faims-ui .faims-field:disabled {
  background: #f3f4f6;
  color: #9ca3af;
  cursor: not-allowed;
}

/* Selects: space for caret */
.faims-ui select.faims-field { padding-right: 2.25rem; }

/* Checkboxes / radios in emerald */
.faims-ui input[type="checkbox"],
.faims-ui input[type="radio"] {
  accent-color: #059669;         /* emerald-600 */
}

/* ---------- Dialog buttons (Headless UI) ---------- */
.faims-ui .btn-primary {
  background:#047857;            /* emerald-700 */
  color:#fff;
  padding:0.5rem 1rem;           /* px-4 py-2 */
  border-radius:0.5rem;
  transition: background-color .15s;
}
.faims-ui .btn-primary:hover { background:#059669; } /* emerald-600 */

.faims-ui .btn-secondary {
  background:#e5e7eb;            /* gray-200 */
  color:#111827;
  padding:0.5rem 1rem;
  border-radius:0.5rem;
  transition: background-color .15s;
}
.faims-ui .btn-secondary:hover { background:#d1d5db; } /* gray-300 */


`})]})}export{ss as default};
