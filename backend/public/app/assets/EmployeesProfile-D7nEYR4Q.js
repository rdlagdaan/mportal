import{n as p,j as e,b as We,F as re,a as L}from"./index-BzLHdLrC.js";import{r as l}from"./handsontable-B9UYrM3w.js";import{F as ce,a as ie,b as oe,c as D}from"./csrf-B07tlZWM.js";import"./react-DJG_os-6.js";const Qe=9;function Ze(c){return c?.data&&Array.isArray(c.data.data)?{data:c.data.data,current_page:Number(c.data.current_page??1),last_page:Number(c.data.last_page??1)}:Array.isArray(c?.data)?{data:c.data,current_page:Number(c.current_page??1),last_page:Number(c.last_page??1)}:{data:[],current_page:1,last_page:1}}const Je=c=>Array.isArray(c)?c:[];function Y({label:c,placeholder:K="Search…",options:W,valueLabel:O,onInputChange:M,onSelect:_,required:E}){const[P,r]=l.useState(!1),[C,y]=l.useState(0),f=l.useRef(null),A=l.useRef(null),F=W.filter(t=>t.label.toLowerCase().includes((O||"").toLowerCase()));return l.useEffect(()=>{f.current?.focus()},[P,O]),l.useEffect(()=>{const t=h=>{A.current?.contains(h.target)||r(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),l.useEffect(()=>{const t=()=>r(!1);return window.addEventListener("faims-close-combos",t),()=>window.removeEventListener("faims-close-combos",t)},[]),e.jsxs("div",{className:"relative",ref:A,children:[e.jsx("label",{className:"block text-sm mb-1",children:c}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:f,className:"w-full border rounded px-3 py-2 pr-9",placeholder:K,value:O,onFocus:()=>r(!0),onChange:t=>{M(t.target.value),r(!0),y(0)},onKeyDown:t=>{if(P||r(!0),t.key==="ArrowDown")t.preventDefault(),y(h=>Math.min(h+1,Math.max(F.length-1,0)));else if(t.key==="ArrowUp")t.preventDefault(),y(h=>Math.max(h-1,0));else if(t.key==="Enter"){t.preventDefault();const h=F[C];h&&(_(h),r(!1),requestAnimationFrame(()=>f.current?.focus()))}else t.key==="Escape"&&(r(!1),requestAnimationFrame(()=>f.current?.focus()))},required:E}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",onMouseDown:t=>{t.preventDefault(),r(h=>!h),requestAnimationFrame(()=>f.current?.focus())},"aria-label":"Toggle options",children:"▼"})]}),P&&e.jsx("ul",{className:"absolute z-50 mt-1 max-h-56 w-full overflow-auto rounded-md border bg-white shadow-lg",children:F.length?F.map((t,h)=>e.jsx("li",{className:`px-3 py-2 cursor-pointer ${h===C?"bg-amber-100 font-semibold":"hover:bg-amber-50"}`,onMouseDown:$=>{$.preventDefault(),_(t),r(!1),requestAnimationFrame(()=>f.current?.focus())},children:t.label},`${t.id}`)):e.jsx("li",{className:"px-3 py-2 text-sm text-gray-500",children:"No matches"})}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Type to search; pick an item to bind."})]})}function ra(){const[c,K]=l.useState([]),[W,O]=l.useState([]),[M,_]=l.useState(!1),[E,P]=l.useState(10),[r,C]=l.useState(1),[y,f]=l.useState(1),[A,F]=l.useState(""),[t,h]=l.useState(""),[$,ge]=l.useState("empno"),X=l.useRef(null),[ve,Q]=l.useState(!1),[Z,J]=l.useState("add"),[m,ee]=l.useState(null),[j,ae]=l.useState("personal"),[ye,we]=l.useState([]),[ea,_e]=l.useState([]),[aa,Ce]=l.useState([]),[ke,Se]=l.useState([]),[Ee,Ae]=l.useState([]),[de,Fe]=l.useState([]),[me,Re]=l.useState([]),[i,o]=l.useState({employee_number:"",status:"ACTIVE",last_name:"",first_name:"",middle_name:"",sex:"MALE",blood_type:null}),[u,d]=l.useState({}),[R,k]=l.useState({}),[x,N]=l.useState({}),[ue,q]=l.useState([]),[pe,H]=l.useState([]);l.useEffect(()=>{(async()=>{try{const s=await p.get("/settings/paginaterecs");P(Number(s.data?.value)||10)}catch{}await Promise.all([G(1,t),Te()])})()},[]),l.useEffect(()=>(X.current&&clearTimeout(X.current),X.current=setTimeout(()=>h(A),300),()=>{X.current&&clearTimeout(X.current)}),[A]),l.useEffect(()=>{G(1,t)},[t,$]);async function Te(){try{const a=await p.get("/hrsi/lookups");we(a.data.org_units||[]),_e(a.data.employee_rolles||[]),Ce(a.data.ranks||[]),Se(a.data.job_statuses||[]),Ae(a.data.job_positions||[]),Fe(a.data.religions||[]),Re(a.data.civil_statuses||[])}catch{}}async function he(a=1,s=""){_(!0);try{const n=await p.get("/app/api/hrsi/employees",{params:{per_page:E,page:a,q:s,order:"name"},withCredentials:!0}),b=Ze(n.data);K(Je(b.data)),C(b.current_page||1),f(b.last_page||1)}catch(n){console.error("employees fetch failed",n),K([]),C(1),f(1)}finally{_(!1)}}l.useEffect(()=>{he(1,t)},[t,E]);const z=a=>{const s=Math.max(1,Math.min(a,y||1));C(s),he(s,t)};async function G(a=1,s=""){_(!0);try{const n=await p.get("/hrsi/employees",{params:{per_page:E,page:a,q:s,order:$}});O(n.data.data),C(n.data.current_page),f(n.data.last_page)}finally{_(!1)}}function Ie(){window.dispatchEvent(new Event("faims-close-combos")),J("add"),ee(null),ae("personal"),o({employee_number:"",status:"ACTIVE",last_name:"",first_name:"",middle_name:"",sex:"MALE",blood_type:null}),d({}),k({}),N({}),q([]),H([]),Q(!0)}async function Le(a){window.dispatchEvent(new Event("faims-close-combos")),J("edit"),ee(a.id),ae("personal"),Q(!0);try{const s=await p.get(`/hrsi/employees/${a.id}`);o(s.data.personal),d(s.data.contact),k(s.data.govt),N(s.data.family),q(s.data.education||[]),H(s.data.appointments||[])}catch{}}function xe(){Q(!1)}async function De(a){a.preventDefault(),await D("lrwsis");const s={"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""};try{const n=m;if(j==="personal")if(Z==="add"){const b=await p.post("/hrsi/employees",i,{headers:s,withCredentials:!0});ee(b.data.id),J("edit")}else n&&await p.patch(`/hrsi/employees/${n}`,i,{headers:s,withCredentials:!0});else j==="contact"&&m?await p.patch(`/hrsi/employees/${m}/contact`,u,{headers:s,withCredentials:!0}):j==="govt"&&m?await p.patch(`/hrsi/employees/${m}/govt`,R,{headers:s,withCredentials:!0}):j==="family"&&m&&await p.patch(`/hrsi/employees/${m}/family`,x,{headers:s,withCredentials:!0});j==="personal"&&await G(r),alert("Saved")}catch(n){alert(n?.response?.data?.message||"Save failed")}}async function Oe(a){if(!confirm("Delete this employee?"))return;await D("lrwsis"),await p.delete(`/hrsi/employees/${a}`,{headers:{"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""},withCredentials:!0});const s=W.length===1&&r>1?r-1:r;await G(s)}const[Me,T]=l.useState(!1),[g,v]=l.useState({completed:!0}),[se,be]=l.useState("add"),[le,je]=l.useState(null);function Pe(){be("add"),je(null),v({completed:!0}),T(!0)}function $e(a){be("edit"),je(a.id),v(a),T(!0)}async function Xe(a){if(a.preventDefault(),!m)return;await D("lrwsis");const s={"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""};if(se==="add"){const n=await p.post(`/hrsi/employees/${m}/education`,g,{headers:s,withCredentials:!0});q(b=>[n.data,...b])}else if(le){const n=await p.patch(`/hrsi/employees/${m}/education/${le}`,g,{headers:s,withCredentials:!0});q(b=>b.map(B=>B.id===le?n.data:B))}T(!1)}async function qe(a){m&&confirm("Delete this education record?")&&(await D("lrwsis"),await p.delete(`/hrsi/employees/${m}/education/${a}`,{headers:{"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""},withCredentials:!0}),q(s=>s.filter(n=>n.id!==a)))}const[He,I]=l.useState(!1),[S,w]=l.useState({}),[te,Ne]=l.useState("add"),[ne,fe]=l.useState(null),[Be,U]=l.useState(""),[Ke,V]=l.useState("");function ze(){Ne("add"),fe(null),w({}),U(""),V(""),I(!0)}function Ge(a){Ne("edit"),fe(a.id),w(a),U(a.org_unit_name||""),V(a.position_name||""),I(!0)}async function Ue(a){if(a.preventDefault(),!m)return;await D("lrwsis");const s={"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""};if(te==="add"){const n=await p.post(`/hrsi/employees/${m}/appointments`,S,{headers:s,withCredentials:!0});H(b=>[n.data,...b])}else if(ne){const n=await p.patch(`/hrsi/employees/${m}/appointments/${ne}`,S,{headers:s,withCredentials:!0});H(b=>b.map(B=>B.id===ne?n.data:B))}I(!1)}async function Ve(a){m&&confirm("Delete this appointment?")&&(await D("lrwsis"),await p.delete(`/hrsi/employees/${m}/appointments/${a}`,{headers:{"X-XSRF-TOKEN":L.get("XSRF-TOKEN")||""},withCredentials:!0}),H(s=>s.filter(n=>n.id!==a)))}const Ye=[{key:"personal",label:"Personal Info"},{key:"contact",label:"Contact Info"},{key:"govt",label:"Government Info"},{key:"family",label:"Family Info"},{key:"education",label:"Education Info"},{key:"dept",label:"Department Info"}];return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-full faims-ui",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs("button",{onClick:Ie,className:"inline-flex items-center gap-2 bg-green-700 text-white px-4 py-2 rounded hover:bg-green-600",children:[e.jsx(ce,{className:"h-5 w-5"})," Add New"]}),e.jsxs("div",{className:"relative",children:[e.jsx(We,{className:"h-5 w-5 absolute left-2 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{className:"w-96 border rounded pl-8 pr-3 py-2",placeholder:"Search by name or employee no.",value:A,onChange:a=>F(a.target.value)})]}),e.jsxs("select",{className:"border rounded px-2 py-2",value:$,onChange:a=>ge(a.target.value),children:[e.jsx("option",{value:"empno",children:"Sort: Employee #"}),e.jsx("option",{value:"last",children:"Sort: Last name"}),e.jsx("option",{value:"recent",children:"Sort: Recent"})]})]}),M&&e.jsx("div",{className:"flex justify-center my-6",children:e.jsx("div",{className:"w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}),!M&&e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50 text-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Employee Number"}),e.jsx("th",{className:"p-2",children:"Last Name"}),e.jsx("th",{className:"p-2",children:"First Name"}),e.jsx("th",{className:"p-2",children:"Middle Name"}),e.jsx("th",{className:"p-2",children:"Current Department"}),e.jsx("th",{className:"p-2",children:"Role"}),e.jsx("th",{className:"p-2",children:"Current Position"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Actions"})]})}),e.jsxs("tbody",{children:[(Array.isArray(c)?c:[]).map((a,s)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50",children:[e.jsx("td",{className:"p-2",children:(r-1)*E+s+1}),e.jsx("td",{className:"p-2",children:a.employee_number}),e.jsx("td",{className:"p-2",children:a.last_name}),e.jsx("td",{className:"p-2",children:a.first_name}),e.jsx("td",{className:"p-2",children:a.middle_name||"—"}),e.jsx("td",{className:"p-2",children:a.current_department||"—"}),e.jsx("td",{className:"p-2",children:a.current_role||"—"}),e.jsx("td",{className:"p-2",children:a.current_position||"—"}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",onClick:()=>Le(a),title:"Edit",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>Oe(a.id),title:"Delete",children:e.jsx(oe,{className:"h-5 w-5"})})]})})]},a.id)),(Array.isArray(c)?c:[]).length===0&&!M&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:Qe,children:"No records found"})})]})]})}),e.jsxs("div",{className:"flex justify-between mt-4 text-sm text-gray-700",children:[e.jsx("button",{onClick:()=>z(1),disabled:r===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"First"}),e.jsx("button",{onClick:()=>z(r-1),disabled:r===1,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"self-center",children:["Page ",r," of ",y]}),e.jsx("button",{onClick:()=>z(r+1),disabled:r===y,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Next"}),e.jsx("button",{onClick:()=>z(y),disabled:r===y,className:"px-3 py-1 bg-gray-200 rounded disabled:opacity-50",children:"Last"})]}),ve&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:xe}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-6xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:Z==="edit"?"Update Employee":"Add Employee"}),e.jsx("button",{onClick:xe,className:"p-1 rounded hover:bg-gray-100",children:e.jsx(re,{className:"h-6 w-6 text-gray-600"})})]}),e.jsx("nav",{className:"px-4 pt-2 faims-tabs border-b border-gray-200",children:e.jsx("ul",{className:"flex gap-2 flex-wrap",children:Ye.map(a=>e.jsx("li",{children:e.jsx("button",{type:"button",onClick:()=>ae(a.key),className:`tab ${j===a.key?"active":""}`,children:a.label})},a.key))})}),e.jsxs("form",{onSubmit:De,className:"p-6 grid grid-cols-12 gap-4 max-h-[70vh] overflow-auto",children:[j==="personal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Employee Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2 font-mono",value:i.employee_number,onChange:a=>o(s=>({...s,employee_number:a.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:i.status,onChange:a=>o(s=>({...s,status:a.target.value})),children:[e.jsx("option",{children:"ACTIVE"}),e.jsx("option",{children:"INACTIVE"}),e.jsx("option",{children:"RETIRED"}),e.jsx("option",{children:"RESIGNED"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date Hired"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:i.date_hired||"",onChange:a=>o(s=>({...s,date_hired:a.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Last Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.last_name,onChange:a=>o(s=>({...s,last_name:a.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"First Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.first_name,onChange:a=>o(s=>({...s,first_name:a.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Middle Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.middle_name||"",onChange:a=>o(s=>({...s,middle_name:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Nick Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.nick_name||"",onChange:a=>o(s=>({...s,nick_name:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Birth Date"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:i.date_of_birth||"",onChange:a=>o(s=>({...s,date_of_birth:a.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Birth Place"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.birth_place||"",onChange:a=>o(s=>({...s,birth_place:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Gender"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:i.sex,onChange:a=>o(s=>({...s,sex:a.target.value})),children:[e.jsx("option",{value:"MALE",children:"MALE"}),e.jsx("option",{value:"FEMALE",children:"FEMALE"}),e.jsx("option",{value:"OTHER",children:"OTHER"}),e.jsx("option",{value:"PREFER_NOT_TO_SAY",children:"PREFER NOT TO SAY"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Citizenship"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:i.citizenship||"",onChange:a=>o(s=>({...s,citizenship:a.target.value}))})]}),e.jsx("div",{className:"col-span-3",children:e.jsx(Y,{label:"Religion",options:de.map(a=>({id:a.id,label:`${a.name}`})),valueLabel:de.find(a=>a.id===i.religion_id)?.name||"",onInputChange:()=>{},onSelect:a=>o(s=>({...s,religion_id:Number(a.id)}))})}),e.jsx("div",{className:"col-span-3",children:e.jsx(Y,{label:"Civil Status",options:me.map(a=>({id:a.id,label:`${a.name}`})),valueLabel:me.find(a=>a.id===i.civil_status_id)?.name||"",onInputChange:()=>{},onSelect:a=>o(s=>({...s,civil_status_id:Number(a.id)}))})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Blood Type"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:i.blood_type||"",onChange:a=>o(s=>({...s,blood_type:a.target.value||null})),children:[e.jsx("option",{value:"",children:"—"}),["O+","O-","A+","A-","B+","B-","AB+","AB-"].map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Height (cm)"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:i.height_cm??"",onChange:a=>o(s=>({...s,height_cm:a.target.value?+a.target.value:null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Weight (kg)"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:i.weight_kg??"",onChange:a=>o(s=>({...s,weight_kg:a.target.value?+a.target.value:null}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:Z==="edit"?"Update":"Submit"})})]}),j==="contact"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mobile Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.mobile_number||"",onChange:a=>d(s=>({...s,mobile_number:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Landline"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.landline||"",onChange:a=>d(s=>({...s,landline:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Personal Email"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.personal_email||"",onChange:a=>d(s=>({...s,personal_email:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Company Email"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.company_email||"",onChange:a=>d(s=>({...s,company_email:a.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"CITY ADDRESS"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Street / Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_address_line||"",onChange:a=>d(s=>({...s,city_address_line:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Barangay"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_barangay||"",onChange:a=>d(s=>({...s,city_barangay:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Town"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_town||"",onChange:a=>d(s=>({...s,city_town:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"City"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_city||"",onChange:a=>d(s=>({...s,city_city:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Zip Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_zip||"",onChange:a=>d(s=>({...s,city_zip:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Country"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.city_country||"PHILIPPINES",onChange:a=>d(s=>({...s,city_country:a.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"PROVINCIAL ADDRESS"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Street / Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_address_line||"",onChange:a=>d(s=>({...s,prov_address_line:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Barangay"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_barangay||"",onChange:a=>d(s=>({...s,prov_barangay:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Town"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_town||"",onChange:a=>d(s=>({...s,prov_town:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"City"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_city||"",onChange:a=>d(s=>({...s,prov_city:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Zip Code"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_zip||"",onChange:a=>d(s=>({...s,prov_zip:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Country"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:u.prov_country||"PHILIPPINES",onChange:a=>d(s=>({...s,prov_country:a.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save Contact"})})]}),j==="govt"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"SSS Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.sss||"",onChange:a=>k(s=>({...s,sss:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"TIN Number"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.tin||"",onChange:a=>k(s=>({...s,tin:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PAG-IBIG"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.pagibig||"",onChange:a=>k(s=>({...s,pagibig:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PHILHEALTH"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.philhealth||"",onChange:a=>k(s=>({...s,philhealth:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"PRC License"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:R.prc||"",onChange:a=>k(s=>({...s,prc:a.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save IDs"})})]}),j==="family"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"Father Information"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.father_name||"",onChange:a=>N(s=>({...s,father_name:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Birthday"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:x.father_birthday||"",onChange:a=>N(s=>({...s,father_birthday:a.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Age (auto)"}),e.jsx("input",{disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100",value:x.father_birthday?Math.floor((Date.now()-Date.parse(x.father_birthday))/(365.25*24*3600*1e3)):"—"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father Occupation"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.father_occupation||"",onChange:a=>N(s=>({...s,father_occupation:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Father's Employer"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.father_employer||"",onChange:a=>N(s=>({...s,father_employer:a.target.value}))})]}),e.jsx("div",{className:"col-span-12 font-semibold text-gray-800",children:"Mother Information"}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.mother_name||"",onChange:a=>N(s=>({...s,mother_name:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Birthday"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:x.mother_birthday||"",onChange:a=>N(s=>({...s,mother_birthday:a.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Age (auto)"}),e.jsx("input",{disabled:!0,className:"w-full border rounded px-3 py-2 bg-gray-100",value:x.mother_birthday?Math.floor((Date.now()-Date.parse(x.mother_birthday))/(365.25*24*3600*1e3)):"—"})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Occupation"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.mother_occupation||"",onChange:a=>N(s=>({...s,mother_occupation:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Mother Employer"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.mother_employer||"",onChange:a=>N(s=>({...s,mother_employer:a.target.value}))})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Parent Address"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:x.parent_address||"",onChange:a=>N(s=>({...s,parent_address:a.target.value}))})]}),e.jsx("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:"Save Family Info"})})]}),j==="education"&&e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:"Education Information"}),e.jsxs("button",{type:"button",onClick:Pe,className:"inline-flex items-center gap-2 bg-green-700 text-white px-3 py-1.5 rounded hover:bg-green-600",children:[e.jsx(ce,{className:"h-5 w-5"})," Add New"]})]}),e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"School Level"}),e.jsx("th",{className:"p-2",children:"School Name"}),e.jsx("th",{className:"p-2",children:"Location"}),e.jsx("th",{className:"p-2",children:"Date From"}),e.jsx("th",{className:"p-2",children:"Date To"}),e.jsx("th",{className:"p-2",children:"Completed"}),e.jsx("th",{className:"p-2",children:"Course"}),e.jsx("th",{className:"p-2",children:"Honors/Awards"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[ue.map((a,s)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:s+1}),e.jsx("td",{className:"p-2",children:a.school_level}),e.jsx("td",{className:"p-2",children:a.school_name}),e.jsx("td",{className:"p-2",children:a.school_location||""}),e.jsx("td",{className:"p-2",children:a.date_from||""}),e.jsx("td",{className:"p-2",children:a.date_to||""}),e.jsx("td",{className:"p-2",children:a.completed?"YES":"NO"}),e.jsx("td",{className:"p-2",children:a.course||""}),e.jsx("td",{className:"p-2",children:a.honors||""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",type:"button",onClick:()=>$e(a),title:"Edit",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",type:"button",onClick:()=>qe(a.id),title:"Delete",children:e.jsx(oe,{className:"h-5 w-5"})})]})})]},a.id)),ue.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:10,children:"No records"})})]})]})})]}),j==="dept"&&e.jsxs("div",{className:"col-span-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:"Department Information (Appointments)"}),e.jsxs("button",{type:"button",onClick:ze,className:"inline-flex items-center gap-2 bg-green-700 text-white px-3 py-1.5 rounded hover:bg-green-600",children:[e.jsx(ce,{className:"h-5 w-5"})," Add New"]})]}),e.jsx("div",{className:"border bg-white rounded-xl shadow-sm faims-table",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-amber-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"#"}),e.jsx("th",{className:"p-2",children:"Position"}),e.jsx("th",{className:"p-2",children:"Workplace"}),e.jsx("th",{className:"p-2",children:"Effective From"}),e.jsx("th",{className:"p-2",children:"Effective To"}),e.jsx("th",{className:"p-2",children:"Classification"}),e.jsx("th",{className:"p-2",children:"Status"}),e.jsx("th",{className:"p-2",children:"Salary"}),e.jsx("th",{className:"p-2 w-24 text-center",children:"Action"})]})}),e.jsxs("tbody",{children:[pe.map((a,s)=>e.jsxs("tr",{className:"border-t border-gray-100 even:bg-gray-50 hover:bg-emerald-50 transition-colors",children:[e.jsx("td",{className:"p-2",children:s+1}),e.jsx("td",{className:"p-2",children:a.position_name||""}),e.jsx("td",{className:"p-2",children:a.org_unit_name||""}),e.jsx("td",{className:"p-2",children:a.effective_from||""}),e.jsx("td",{className:"p-2",children:a.effective_to||""}),e.jsx("td",{className:"p-2",children:a.classification||""}),e.jsx("td",{className:"p-2",children:a.status||""}),e.jsx("td",{className:"p-2",children:typeof a.salary=="number"?a.salary.toFixed(2):""}),e.jsx("td",{className:"p-2",children:e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{className:"text-blue-600 hover:text-blue-800",type:"button",onClick:()=>Ge(a),title:"Edit",children:e.jsx(ie,{className:"h-5 w-5"})}),e.jsx("button",{className:"text-red-600 hover:text-red-800",type:"button",onClick:()=>Ve(a.id),title:"Delete",children:e.jsx(oe,{className:"h-5 w-5"})})]})})]},a.id)),pe.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-4 text-center text-gray-500",colSpan:9,children:"No records"})})]})]})})]})]})]})]}),Me&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>T(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-3xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:se==="edit"?"Edit Education":"Add Education"}),e.jsx("button",{onClick:()=>T(!1),className:"p-1 rounded hover:bg-gray-100",children:e.jsx(re,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:Xe,className:"p-6 grid grid-cols-12 gap-4",children:[e.jsxs("div",{className:"col-span-4",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Level"}),e.jsx("select",{className:"w-full border rounded px-2 py-2",value:g.school_level||"",onChange:a=>v(s=>({...s,school_level:a.target.value})),required:!0,children:["ELEMENTARY","HIGH SCHOOL","VOCATIONAL","COLLEGE","GRADUATE"].map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Name"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.school_name||"",onChange:a=>v(s=>({...s,school_name:a.target.value})),required:!0})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"School Location"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.school_location||"",onChange:a=>v(s=>({...s,school_location:a.target.value}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date From"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:g.date_from||"",onChange:a=>v(s=>({...s,date_from:a.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Date To"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:g.date_to||"",onChange:a=>v(s=>({...s,date_to:a.target.value||null}))})]}),e.jsx("div",{className:"col-span-3 flex items-end gap-2",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!!g.completed,onChange:a=>v(s=>({...s,completed:a.target.checked}))}),e.jsx("span",{className:"text-sm",children:"Completed"})]})}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Course"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.course||"",onChange:a=>v(s=>({...s,course:a.target.value}))})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Honors/Awards"}),e.jsx("input",{className:"w-full border rounded px-3 py-2",value:g.honors||"",onChange:a=>v(s=>({...s,honors:a.target.value}))})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:se==="edit"?"Update":"Submit"})]})]})]})]}),He&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:()=>I(!1)}),e.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:te==="edit"?"Edit Appointment":"Add Appointment"}),e.jsx("button",{onClick:()=>I(!1),className:"p-1 rounded hover:bg-gray-100",children:e.jsx(re,{className:"h-6 w-6 text-gray-600"})})]}),e.jsxs("form",{onSubmit:Ue,className:"p-6 grid grid-cols-12 gap-4",children:[e.jsx("div",{className:"col-span-6",children:e.jsx(Y,{label:"Workplace",options:ye.map(a=>({id:a.id,label:`${a.code} • ${a.name}`})),valueLabel:Be,onInputChange:U,onSelect:a=>{U(a.label),w(s=>({...s,org_unit_id:Number(a.id)}))},required:!0})}),e.jsx("div",{className:"col-span-6",children:e.jsx(Y,{label:"Position",options:Ee.map(a=>({id:a.id,label:`${a.name}`})),valueLabel:Ke,onInputChange:V,onSelect:a=>{V(a.label),w(s=>({...s,position_id:Number(a.id)}))},required:!0})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Effective From"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:S.effective_from||"",onChange:a=>w(s=>({...s,effective_from:a.target.value||null})),required:!0})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Effective To"}),e.jsx("input",{type:"date",className:"w-full border rounded px-3 py-2",value:S.effective_to||"",onChange:a=>w(s=>({...s,effective_to:a.target.value||null}))})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Classification"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:S.classification||"",onChange:a=>w(s=>({...s,classification:a.target.value})),children:[e.jsx("option",{value:"",children:"—"}),e.jsx("option",{children:"FACULTY"}),e.jsx("option",{children:"STAFF"}),e.jsx("option",{children:"ADMIN"})]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded px-2 py-2",value:S.status||"",onChange:a=>w(s=>({...s,status:a.target.value})),children:[e.jsx("option",{value:"",children:"—"}),ke.map(a=>e.jsx("option",{value:a.name,children:a.name},a.id))]})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-sm mb-1",children:"Salary"}),e.jsx("input",{type:"number",className:"w-full border rounded px-3 py-2",value:S.salary??"",onChange:a=>w(s=>({...s,salary:a.target.value?+a.target.value:null}))})]}),e.jsxs("div",{className:"col-span-12 flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-600",children:te==="edit"?"Update":"Submit"})]})]})]})]}),e.jsx("style",{children:`
      .faims-ui .faims-tabs .tab{background:#fff;color:#374151;padding:.625rem 1.25rem;border:1px solid #e5e7eb;border-bottom:none;border-top-left-radius:.5rem;border-top-right-radius:.5rem;position:relative;font-weight:700;transition:background-color .15s,color .15s,box-shadow .15s}
      .faims-ui .faims-tabs .tab:hover{background:#fef3c7;color:#111827;box-shadow:inset 0 -3px 0 #f59e0b}
      .faims-ui .faims-tabs .tab.active{background:#ca8a04;color:#fff}
      .faims-ui .faims-tabs .tab.active::after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:4px;background:#ca8a04;border-top-left-radius:4px;border-top-right-radius:4px}
      .faims-ui .faims-table table{border-collapse:separate;border-spacing:0}
      .faims-ui .faims-table thead th{background:#fffbeb;color:#1f2937}
      .faims-ui .faims-table tbody tr td{background:#fff;transition:background-color .12s,font-weight .12s,color .12s}
      .faims-ui .faims-table tbody tr:nth-child(even) td{background:#fffbeb}
      .faims-ui .faims-table tbody tr:hover td{background:#fef3c7;font-weight:600;color:#111827}
      `})]})}export{ra as default};
