import{j as e,n as N}from"./index-DLWAe2W6.js";import{r}from"./handsontable-B9UYrM3w.js";import"./react-DJG_os-6.js";function M(){const[a,n]=r.useState({asset_number:"",description:"",group_name:"",depr_amt:"",remaining_amt:"",spent_months:"",remain_months:""}),[c,m]=r.useState(20),[d,g]=r.useState(1),[j,f]=r.useState([]),[v,_]=r.useState(0),[w,b]=r.useState(!1);async function x(){const t=(await N.get("/assets/depreciation",{params:{...a,per:c,page:d}})).data;f(t.data??t),_(t.total??t.length??0)}r.useEffect(()=>{x()},[JSON.stringify(a),c,d]);const[h,y]=r.useState(""),[p,S]=r.useState("");async function C(){if(!h||!p)return alert("Start and End are required (YYYY-MM-DD).");b(!0);try{await N.post("/assets/depreciation/process",{start:h,end:p}),await x()}finally{b(!1)}}return e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-end gap-3 bg-yellow-100 p-3 rounded border",children:[e.jsx("button",{className:"px-3 py-2 rounded bg-yellow-400 border shadow-sm",onClick:x,title:"Refresh Depreciation Records",children:"ðŸ”„ Refresh Depreciation Records"}),e.jsxs("div",{className:"grid grid-cols-6 gap-2 items-end w-full",children:[e.jsx(i,{label:"Asset Number",value:a.asset_number,onChange:s=>n(t=>({...t,asset_number:s}))}),e.jsx(i,{label:"Asset Desc",value:a.description,onChange:s=>n(t=>({...t,description:s}))}),e.jsx(i,{label:"Group Asset Name",value:a.group_name,onChange:s=>n(t=>({...t,group_name:s}))}),e.jsx(i,{label:"Depreciated Amt â‰¥",value:a.depr_amt,onChange:s=>n(t=>({...t,depr_amt:s}))}),e.jsx(i,{label:"Remaining Amt â‰¥",value:a.remaining_amt,onChange:s=>n(t=>({...t,remaining_amt:s}))}),e.jsx(i,{label:"Spent Months â‰¥",value:a.spent_months,onChange:s=>n(t=>({...t,spent_months:s}))})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-2 items-end w-full",children:[e.jsx(i,{label:"Remaining Months â‰¥",value:a.remain_months,onChange:s=>n(t=>({...t,remain_months:s}))}),e.jsx("div",{className:"col-span-2"}),e.jsx("div",{className:"col-span-2"}),e.jsx("div",{className:"col-span-1 flex items-center justify-end gap-2",children:e.jsxs("select",{className:"border rounded px-2 py-1",value:c,onChange:s=>m(+s.target.value),children:[e.jsx("option",{children:"20"}),e.jsx("option",{children:"50"}),e.jsx("option",{children:"100"})]})})]})]}),e.jsx("div",{className:"bg-yellow-50 p-3 rounded border",children:e.jsxs("div",{className:"flex items-end gap-3",children:[e.jsx(i,{label:"Start Date",placeholder:"YYYY-MM-01",value:h,onChange:y}),e.jsx(i,{label:"End Date",placeholder:"YYYY-MM-01",value:p,onChange:S}),e.jsx("button",{onClick:C,disabled:w,className:"px-4 py-2 rounded bg-green-700 text-white disabled:opacity-50",title:"Process Asset Depreciation",children:"ðŸ’¾ Process Asset Depreciation"})]})}),e.jsx("div",{className:"overflow-auto border rounded",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-green-800 text-white",children:e.jsxs("tr",{children:[e.jsx(l,{children:"Asset Number"}),e.jsx(l,{children:"Description"}),e.jsx(l,{children:"Group Name"}),e.jsx(l,{className:"text-right",children:"Gross Amt"}),e.jsx(l,{className:"text-right",children:"Deprctd Amt"}),e.jsx(l,{className:"text-right",children:"Remaining Amt"}),e.jsx(l,{className:"text-right",children:"Spent Months"}),e.jsx(l,{className:"text-right",children:"Remaining Months"})]})}),e.jsx("tbody",{children:j.map(s=>e.jsxs("tr",{className:"odd:bg-white even:bg-green-50",children:[e.jsx(o,{children:s.asset_number}),e.jsx(o,{children:s.description}),e.jsx(o,{children:s.group_name}),e.jsx(o,{className:"text-right",children:u(s.gross_amount)}),e.jsx(o,{className:"text-right",children:u(s.depr_amount)}),e.jsx(o,{className:"text-right",children:u(s.remaining_amount)}),e.jsx(o,{className:"text-right",children:s.spent_months}),e.jsx(o,{className:"text-right",children:s.remaining_months})]},s.id))})]})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{className:"px-2 py-1 border rounded",disabled:d<=1,onClick:()=>g(s=>s-1),children:"Prev"}),e.jsxs("span",{children:["Page ",d]}),e.jsx("button",{className:"px-2 py-1 border rounded",disabled:j.length<c,onClick:()=>g(s=>s+1),children:"Next"}),e.jsxs("span",{className:"text-gray-500",children:["Total ~",v]})]})]})}function i({label:a,value:n,onChange:c,placeholder:m}){return e.jsxs("label",{className:"text-sm w-full",children:[e.jsxs("div",{className:"text-green-800 font-semibold mb-1",children:[a,":"]}),e.jsx("input",{className:"w-full border px-2 py-1 rounded bg-yellow-100 focus:bg-white",value:n,onChange:d=>c(d.target.value),placeholder:m})]})}function l({children:a,className:n}){return e.jsx("th",{className:`p-2 text-left ${n||""}`,children:a})}function o({children:a,className:n}){return e.jsx("td",{className:`p-2 ${n||""}`,children:a})}function u(a){return(a??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}export{M as default};
