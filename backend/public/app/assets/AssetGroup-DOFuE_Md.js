import{j as e,n as d}from"./index-CnVwUPtV.js";import{r as n}from"./handsontable-B9UYrM3w.js";import"./react-DJG_os-6.js";function C(){const[p,x]=n.useState([]),[c,m]=n.useState(""),[l,h]=n.useState(10),[o,u]=n.useState(1),[g,j]=n.useState(0),[t,a]=n.useState({});async function i(){const s=await d.get("/assets/groups",{params:{q:c,per:l,page:o}});x(s.data.data??s.data),j(s.data.total??s.data.length??0)}n.useEffect(()=>{i()},[c,l,o]);async function N(){!t.group_code||!t.group_name||(t.id?await d.patch(`/assets/groups/${t.id}`,t):await d.post("/assets/groups",t),a({}),i())}async function b(s){confirm("Delete this group?")&&(await d.delete(`/assets/groups/${s}`),i())}return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"Search group code/name",value:c,onChange:s=>m(s.target.value)}),e.jsxs("select",{className:"border px-2 py-1 rounded",value:l,onChange:s=>h(+s.target.value),children:[e.jsx("option",{children:"10"}),e.jsx("option",{children:"20"}),e.jsx("option",{children:"50"})]}),e.jsx("button",{className:"px-3 py-1 rounded bg-green-700 text-white",onClick:()=>a({}),children:"New Asset Group"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 bg-yellow-50 border p-3 rounded mb-4",children:[e.jsx("input",{className:"border px-2 py-1 rounded col-span-1",placeholder:"Group Code",value:t.group_code??"",onChange:s=>a(r=>({...r,group_code:s.target.value}))}),e.jsx("input",{className:"border px-2 py-1 rounded col-span-2",placeholder:"Group Name",value:t.group_name??"",onChange:s=>a(r=>({...r,group_name:s.target.value}))}),e.jsx("input",{className:"border px-2 py-1 rounded col-span-1",placeholder:"Life (months)",type:"number",min:1,value:t.life_months??60,onChange:s=>a(r=>({...r,life_months:+s.target.value}))}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("button",{onClick:N,className:"px-4 py-2 bg-green-700 text-white rounded",children:"Save"}),t.id&&e.jsx("button",{onClick:()=>a({}),className:"ml-2 px-3 py-2 bg-gray-100 rounded",children:"Cancel Edit"})]})]}),e.jsx("div",{className:"overflow-auto border rounded",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-green-800 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"Actions"}),e.jsx("th",{className:"p-2 text-left",children:"Group Code"}),e.jsx("th",{className:"p-2 text-left",children:"Group Name"}),e.jsx("th",{className:"p-2 text-left",children:"Life"})]})}),e.jsx("tbody",{children:p.map(s=>e.jsxs("tr",{className:"odd:bg-white even:bg-green-50",children:[e.jsxs("td",{className:"p-2",children:[e.jsx("button",{className:"text-blue-600 mr-2",onClick:()=>a(s),children:"Edit"}),e.jsx("button",{className:"text-red-600",onClick:()=>b(s.id),children:"Delete"})]}),e.jsx("td",{className:"p-2",children:s.group_code}),e.jsx("td",{className:"p-2",children:s.group_name}),e.jsx("td",{className:"p-2",children:s.life_months})]},s.id))})]})}),e.jsxs("div",{className:"mt-2 flex gap-2 items-center",children:[e.jsx("button",{className:"px-2 py-1 border rounded",disabled:o<=1,onClick:()=>u(s=>s-1),children:"Prev"}),e.jsxs("span",{children:["Page ",o]}),e.jsx("button",{className:"px-2 py-1 border rounded",disabled:p.length<l,onClick:()=>u(s=>s+1),children:"Next"}),e.jsxs("span",{className:"text-gray-500",children:["Total ~",g]})]})]})}export{C as default};
